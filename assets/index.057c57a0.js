var Ne=Object.defineProperty,Ve=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var se=(e,t,o)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,x=(e,t)=>{for(var o in t||(t={}))xe.call(t,o)&&se(e,o,t[o]);if(de)for(var o of de(t))Ce.call(t,o)&&se(e,o,t[o]);return e},H=(e,t)=>Ve(e,Be(t));var A=(e,t,o)=>(se(e,typeof t!="symbol"?t+"":t,o),o),ie=(e,t,o)=>{if(!t.has(e))throw TypeError("Cannot "+o)};var f=(e,t,o)=>(ie(e,t,"read from private field"),o?o.call(e):t.get(e)),y=(e,t,o)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,o)},k=(e,t,o,r)=>(ie(e,t,"write to private field"),r?r.call(e,o):t.set(e,o),o);var b=(e,t,o)=>(ie(e,t,"access private method"),o);import{showOpenFilePicker,showSaveFilePicker}from"https://unpkg.com/native-file-system-adapter@2.0.4/mod.js";import{A as Ayva,_,S as Slider,o as openBlock,c as createElementBlock,n as normalizeClass,r as resolveComponent,a as createBaseVNode,t as toDisplayString,b as createVNode,d as createBlock,w as withCtx,e as withDirectives,v as vShow,f as vModelText,g as normalizeStyle,p as pushScopeId,h as popScopeId,i as createTextVNode,j as withModifiers,F as Fragment,k as renderList,J as Joi,T as TempestStroke,W as WorkerWrapper,l as WorkerWrapper$1,m as WorkerWrapper$2,q as WorkerWrapper$3,s as WorkerWrapper$4,u as editor$2,x as languages,R as Range,G as GeneratorBehavior,y as ScriptBehavior,z as useNotification,L as La,B as jshint,C as h,D as createStaticVNode,E as nextTick,V as VariableDuration,H as computed,I as WebSerialDevice,K as createApp,M as naive}from"./vendor.724de859.js";const p=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function o(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=o(i);fetch(i.href,s)}};p();var editor$1="",lilGui="",main="",naiveUi="";window.showOpenFilePicker||(console.warn("Using ponyfills for File System Access API"),window.showOpenFilePicker=showOpenFilePicker,window.showSaveFilePicker=showSaveFilePicker);const ayvaConfig=Ayva.defaultConfiguration;function createAyva(){return new Ayva(ayvaConfig)}class Storage{constructor(t){A(this,"namespace","");this.namespace=t}load(t){const o=localStorage.getItem(this.storageKey(t));return o!=null&&o!=="undefined"?JSON.parse(o):null}save(t,o){localStorage.setItem(this.storageKey(t),JSON.stringify(o))}storageKey(t){return`${this.namespace}--${t}`}remove(t){localStorage.removeItem(this.storageKey(t))}}function makeCollapsible(e){e._openAnimated=function(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{this.domElement.style.height=null;const o=this.$children.clientHeight;this.$children.style.height=`${o}px`,this.domElement.classList.add("transition");const r=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",r),window.dispatchEvent(new Event("resize")))};this.$children.addEventListener("transitionend",r);const i=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame(()=>{this.$children.style.height=`${i}px`})}),this},e.$title=e.querySelector(".title"),e.$children=e.querySelector(".children"),e.domElement=e,e._closed=!1,e.$title.addEventListener("click",()=>{e._openAnimated(e._closed)})}const formatter=(e=0,t="")=>({to(o){return`${o.toFixed(e)}${t}`},from(o){return Number(o.replace(",-",""))}});function has(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function clamp(e,t,o){return Math.max(t,Math.min(o,e))}function validNumber(e,t,o){return!(!Number.isFinite(e)||t!==void 0&&e<t||o!==void 0&&e>o)}function createConstantProperty(e,t,o){Object.defineProperty(e,t,{value:o,writeable:!1,configurable:!1,enumerable:!0})}function clampHeight(e,t,o){const r=e.getBoundingClientRect(),i=r.height+(window.innerHeight-(r.y+r.height));e.style.height=`${clamp(i,t,o)}px`}function mergeTooltips(e,t,o){const r=getComputedStyle(e).direction==="rtl",i=e.noUiSlider.options.direction==="rtl",s=e.noUiSlider.options.orientation==="vertical",n=e.noUiSlider.getTooltips(),a=e.noUiSlider.getOrigins();n.forEach(function(l,d){l&&a[d].appendChild(l)}),e.noUiSlider.on("update",function(l,d,m,u,g){const S=[[]],$=[[]],V=[[]];let c=0;n[0]&&(S[0][0]=0,[$[0][0]]=g,[V[0][0]]=l);for(let v=1;v<g.length;v++)(!n[v]||g[v]-g[v-1]>t)&&(c++,S[c]=[],V[c]=[],$[c]=[]),n[v]&&(S[c].push(v),V[c].push(l[v]),$[c].push(g[v]));S.forEach(function(v,T){const R=v.length;for(let U=0;U<R;U++){const F=v[U];if(U===R-1){let q=0;$[T].forEach(function($e){q+=1e3-$e});const we=s?"bottom":"right",Se=i?0:R-1,ke=1e3-$[T][Se];q=(r&&!s?100:0)+q/R-ke,n[F].innerHTML=V[T].join(o),n[F].style.display="block",n[F].style[we]=`${q}%`}else n[F].style.display="none"}})})}const eventMixin={on(e,t){this._eventHandlers||(this._eventHandlers={}),this._eventHandlers[e]||(this._eventHandlers[e]=[]),this._eventHandlers[e].push(t)},off(e,t){var r;const o=(r=this._eventHandlers)==null?void 0:r[e];if(!!o)for(let i=0;i<o.length;i++)o[i]===t&&o.splice(i--,1)},$emit(e,...t){var o;!((o=this._eventHandlers)!=null&&o[e])||this._eventHandlers[e].forEach(r=>r.apply(this,t))}};function triggerMouseEvent(e,t){const o=new MouseEvent(t);e.dispatchEvent(o)}var nouislider_css_vue_type_style_index_0_src_f6761d2a_lang="",ayvaSliders_css_vue_type_style_index_1_src_f6761d2a_lang="",_export_sfc=(e,t)=>{const o=e.__vccOpts||e;for(const[r,i]of t)o[r]=i;return o};const storage$6=new Storage("slider-value"),_sfc_main$f={expose:["set","get"],props:{options:{type:Object,default:()=>{}},activeTooltips:{type:Boolean,default:!1},storageKey:{type:String,default:null},modelValue:{type:[Number,Array],default:null},mergeTooltips:{type:Boolean,default:!0}},emits:["update","update:modelValue","change","start","end"],data(){return{value:null,defaultOptions:{tooltips:!0,connect:!0,orientation:"horizontal"},slider:null}},computed:{mergedOptions(){return x(x({},this.defaultOptions),this.options)},sliderClass(){return[this.mergedOptions.orientation,{"active-tooltips":this.activeTooltips}]}},watch:{mergedOptions(){this.initSlider()},modelValue(e){_.isEqual(e,this.value)||(e.length?this.slider.set(...e):this.slider.set(e))}},beforeMount(){this.storageKey&&(this.value=storage$6.load(this.storageKey))},mounted(){this.initSlider()},methods:{cleanValue(e){return Number(e.replaceAll(/[a-zA-Z]/g,""))},onUpdate(e){e.length===1?this.value=this.cleanValue(e[0]):this.value=e.map(t=>this.cleanValue(t)),this.storageKey&&this.save(),this.$emit("update",this.value),this.$emit("update:modelValue",this.value)},initSlider(){const e=this.value,t=this.$refs.slider;this.slider&&this.slider.destroy(),this.slider=Slider.create(t,this.mergedOptions),this.mergeTooltips&&mergeTooltips(t,10," - "),this.slider.on("update",this.onUpdate),this.slider.on("change",(...o)=>{this.onUpdate(...o),this.$emit("change",...o)}),this.slider.on("start",(...o)=>{this.$emit("start",...o)}),this.slider.on("end",(...o)=>{this.$emit("end",...o)}),t.querySelectorAll(".noUi-handle").forEach(o=>{o.addEventListener("dblclick",()=>{this.slider.reset()})}),e&&this.slider.set(e)},save(){storage$6.save(this.storageKey,this.value)},set(...e){this.slider.set(e)},get(){const e=this.slider.get();return e.length===1?e[0]:e}}};function _sfc_render$f(e,t,o,r,i,s){return openBlock(),createElementBlock("div",{ref:"slider",class:normalizeClass(["slider",s.sliderClass])},null,2)}var AyvaSlider=_export_sfc(_sfc_main$f,[["render",_sfc_render$f]]);const _sfc_main$e={props:{connected:{type:Boolean,default:!1},mode:{type:String,default:""}},emits:["request-connection"],computed:{connectedClass(){return this.connected?"connected":"disconnected"},connectedText(){return this.connected?"Connected":"Disconnected"}}},_hoisted_1$t=["disabled"],_hoisted_2$q=createBaseVNode("span",{class:"connect-status-icon"},null,-1),_hoisted_3$p={class:"connect-status"},_hoisted_4$a={class:"connect-icon"};function _sfc_render$e(e,t,o,r,i,s){const n=resolveComponent("connect-icon");return openBlock(),createElementBlock("div",{class:normalizeClass(["connect-status-container lil-gui",s.connectedClass]),disabled:o.mode!=="Stopped"?"":null},[_hoisted_2$q,createBaseVNode("span",_hoisted_3$p,toDisplayString(s.connectedText),1),createBaseVNode("span",_hoisted_4$a,[createVNode(n)])],10,_hoisted_1$t)}var AyvaConnected=_export_sfc(_sfc_main$e,[["render",_sfc_render$e]]);const storage$5=new Storage("ayva-dropdown"),_sfc_main$d={props:{modelValue:{type:String,default:null},storageKey:{type:String,default:null},options:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],data(){return{initialValue:null}},computed:{label(){return this.options.reduce((t,o)=>(t[o.key]=o.label,t),{})[this.modelValue]||""}},watch:{modelValue(e){this.storageKey&&storage$5.save(this.storageKey,e)}},beforeMount(){this.storageKey&&(this.initialValue=storage$5.load(this.storageKey))},mounted(){this.initialValue!==null&&this.initialValue!==void 0&&this.notifyChange(this.initialValue)},methods:{onChange(e){this.storageKey&&storage$5.save(this.storageKey,e),this.notifyChange(e)},notifyChange(e){this.$emit("update:modelValue",e),this.$emit("change",e)}}},_hoisted_1$s={class:"ayva-dropdown-input"};function _sfc_render$d(e,t,o,r,i,s){const n=resolveComponent("chevron-dropdown-icon"),a=resolveComponent("n-dropdown");return openBlock(),createBlock(a,{class:"ayva-dropdown",placement:"bottom-start",trigger:"click",size:"small",options:o.options,onSelect:s.onChange},{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$s,[createBaseVNode("span",null,toDisplayString(s.label),1),createVNode(n,{class:"chevron"})])]),_:1},8,["options","onSelect"])}var AyvaDropdown=_export_sfc(_sfc_main$d,[["render",_sfc_render$d]]),ayvaModal_css_vue_type_style_index_0_src_7f23f503_scoped_true_lang="",AyvaSettings_vue_vue_type_style_index_1_scoped_true_lang="";const storage$4=new Storage("output-settings"),_sfc_main$c={components:{AyvaDropdown},inject:["globalEvents"],emits:["close"],data(){return{connectionTypeOptions:[{key:"serial",label:"Serial"},{key:"websocket",label:"WebSocket"},{key:"console",label:"Console"}],connectionType:"serial",host:storage$4.load("host")||"localhost",port:storage$4.load("port")||80,frequency:storage$4.load("frequency")||50}},computed:{modalStyle(){return this.connectionType==="websocket"?{height:"161px"}:{height:"80px"}},portInvalid(){const e=Number(this.port);return!(Number.isFinite(e)&&e>=1&&e<=65535)},frequencyInvalid(){const e=Number(this.frequency);return!(Number.isFinite(e)&&e>=10&&e<=250)},hostInvalid(){return!this.host||!this.host.trim()}},methods:{restrictNumbers(e){const t=["Backspace","Delete","ArrowLeft","ArrowRight"];!e.key.match(/[0-9]/)&&t.indexOf(e.key)===-1&&e.preventDefault()},close(){this.frequencyInvalid||this.portInvalid||(storage$4.save("connectionType",this.connectionType),storage$4.save("frequency",this.frequency),storage$4.save("host",this.host),storage$4.save("port",this.port),this.$emit("close"),this.globalEvents.$emit("refresh-output-settings"))}}},_withScopeId$5=e=>(pushScopeId("data-v-7f23f503"),e=e(),popScopeId(),e),_hoisted_1$r={class:"header"},_hoisted_2$p={class:"toolbar"},_hoisted_3$o=_withScopeId$5(()=>createBaseVNode("span",{class:"toolbar-left"},[createBaseVNode("span",null,"Output Settings")],-1)),_hoisted_4$9={class:"toolbar-right"},_hoisted_5$9={class:"limits lil-gui children"},_hoisted_6$7={class:"settings"},_hoisted_7$4=_withScopeId$5(()=>createBaseVNode("div",{class:"settings-label"}," Type: ",-1)),_hoisted_8$4={class:"settings"},_hoisted_9$4=_withScopeId$5(()=>createBaseVNode("div",{class:"settings-label"}," Host: ",-1)),_hoisted_10$4=createTextVNode(" Host cannot be blank. "),_hoisted_11$4={class:"settings"},_hoisted_12$4=_withScopeId$5(()=>createBaseVNode("div",{class:"settings-label"}," Port: ",-1)),_hoisted_13$4=createTextVNode(" Port must be a number between 1 and 65535. "),_hoisted_14$3={class:"settings",style:{display:"none"}},_hoisted_15$3=_withScopeId$5(()=>createBaseVNode("div",{class:"settings-label"}," Frequency: ",-1)),_hoisted_16$3=createTextVNode(" Frequency must be a number between 10 and 250. ");function _sfc_render$c(e,t,o,r,i,s){const n=resolveComponent("close-icon"),a=resolveComponent("ayva-dropdown"),l=resolveComponent("n-tooltip");return openBlock(),createElementBlock("div",{class:"modal-body-small",style:normalizeStyle(s.modalStyle)},[createBaseVNode("div",_hoisted_1$r,[createBaseVNode("div",_hoisted_2$p,[_hoisted_3$o,createBaseVNode("span",_hoisted_4$9,[createBaseVNode("span",null,[createVNode(n,{class:"close icon",disabled:s.frequencyInvalid||s.portInvalid?"":void 0,onClick:s.close},null,8,["disabled","onClick"])])])]),createBaseVNode("div",_hoisted_5$9,[createBaseVNode("div",_hoisted_6$7,[_hoisted_7$4,createVNode(a,{modelValue:i.connectionType,"onUpdate:modelValue":t[0]||(t[0]=d=>i.connectionType=d),class:"connection-type",options:i.connectionTypeOptions,"storage-key":"connection-type"},null,8,["modelValue","options"])]),withDirectives(createBaseVNode("div",_hoisted_8$4,[_hoisted_9$4,createBaseVNode("div",null,[createVNode(l,{show:s.hostInvalid,class:"error-tooltip"},{trigger:withCtx(()=>[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>i.host=d),class:normalizeClass(["host",s.hostInvalid?"error":""])},null,2),[[vModelText,i.host]])]),default:withCtx(()=>[_hoisted_10$4]),_:1},8,["show"])])],512),[[vShow,i.connectionType==="websocket"]]),withDirectives(createBaseVNode("div",_hoisted_11$4,[_hoisted_12$4,createBaseVNode("div",null,[createVNode(l,{show:s.portInvalid,class:"error-tooltip"},{trigger:withCtx(()=>[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":t[2]||(t[2]=d=>i.port=d),class:normalizeClass(["port",s.portInvalid?"error":""]),maxlength:"5",onKeydown:t[3]||(t[3]=(...d)=>s.restrictNumbers&&s.restrictNumbers(...d))},null,34),[[vModelText,i.port]])]),default:withCtx(()=>[_hoisted_13$4]),_:1},8,["show"])])],512),[[vShow,i.connectionType==="websocket"]]),createBaseVNode("div",_hoisted_14$3,[_hoisted_15$3,createBaseVNode("div",null,[createVNode(l,{show:s.frequencyInvalid,class:"error-tooltip"},{trigger:withCtx(()=>[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":t[4]||(t[4]=d=>i.frequency=d),class:normalizeClass(["frequency",s.frequencyInvalid?"error":""]),maxlength:"3",onKeydown:t[5]||(t[5]=(...d)=>s.restrictNumbers&&s.restrictNumbers(...d))},null,34),[[vModelText,i.frequency]])]),default:withCtx(()=>[_hoisted_16$3]),_:1},8,["show"])])])])])],4)}var AyvaSettings=_export_sfc(_sfc_main$c,[["render",_sfc_render$c],["__scopeId","data-v-7f23f503"]]),AyvaOutput_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$b={components:{AyvaSlider,AyvaConnected,AyvaSettings},inject:{device:{from:"globalDevice"}},props:{mode:{type:String,default:null}},emits:["update-limits","request-connection","disconnect"],data(){return{axes:["stroke","surge","sway","twist","roll","pitch"],sliderOptions:{start:[.2,.8],tooltips:!0,margin:.1,connect:!0,range:{min:[0],max:[1]}},showSettings:!1}},mounted(){makeCollapsible(this.$el)},methods:{onUpdate(e,t){const[o,r]=t;this.updateLimit(e,o,r)},updateLimit(e,t,o){const r={min:Number(t),max:Number(o)};this.$emit("update-limits",{name:e,limits:r})},toggleConnection(){!this.device.connected&&this.mode==="Stopped"?this.$emit("request-connection"):this.device.connected&&this.mode==="Stopped"&&this.$emit("disconnect")}}},_withScopeId$4=e=>(pushScopeId("data-v-7c8657d0"),e=e(),popScopeId(),e),_hoisted_1$q={class:"limits-container lil-gui root"},_hoisted_2$o={class:"title",style:{"padding-right":"0"}},_hoisted_3$n=_withScopeId$4(()=>createBaseVNode("span",null,"Output Range",-1)),_hoisted_4$8={class:"limits lil-gui children"},_hoisted_5$8={class:"axis"},_hoisted_6$6={class:"lil-gui"};function _sfc_render$b(e,t,o,r,i,s){const n=resolveComponent("ayva-connected"),a=resolveComponent("settings-icon"),l=resolveComponent("ayva-slider"),d=resolveComponent("ayva-settings"),m=resolveComponent("n-modal");return openBlock(),createElementBlock("div",_hoisted_1$q,[createBaseVNode("div",_hoisted_2$o,[_hoisted_3$n,createVNode(n,{connected:s.device.connected,mode:o.mode,onClick:withModifiers(s.toggleConnection,["stop"])},null,8,["connected","mode","onClick"]),createVNode(a,{disabled:o.mode!=="Stopped"||s.device.connected?"":null,class:"settings icon",onClick:t[0]||(t[0]=withModifiers(u=>o.mode!="Stopped"||s.device.connected?"":i.showSettings=!0,["stop"]))},null,8,["disabled"])]),createBaseVNode("div",_hoisted_4$8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.axes,u=>(openBlock(),createElementBlock("div",{key:u,class:normalizeClass(["limit",u])},[createBaseVNode("div",_hoisted_5$8,toDisplayString(u),1),createVNode(l,{options:i.sliderOptions,"storage-key":`${u}-limit`,onUpdate:g=>s.onUpdate(u,g)},null,8,["options","storage-key","onUpdate"])],2))),128))]),createVNode(m,{show:i.showSettings,"auto-focus":!1},{default:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("div",_hoisted_6$6,[createVNode(d,{ref:"ayvaSettings",onClose:t[1]||(t[1]=u=>i.showSettings=!1)},null,512)])])]),_:1},8,["show"])])}var AyvaOutput=_export_sfc(_sfc_main$b,[["render",_sfc_render$b],["__scopeId","data-v-7c8657d0"]]);const storage$3=new Storage("checkbox-value"),_sfc_main$a={props:{modelValue:{type:Boolean,default:!1},storageKey:{type:String,default:null}},emits:["update:modelValue","change"],data(){return{initialValue:null}},watch:{modelValue(e){this.storageKey&&storage$3.save(this.storageKey,e)}},beforeMount(){this.storageKey&&(this.initialValue=storage$3.load(this.storageKey))},mounted(){this.initialValue!==null&&this.initialValue!==void 0&&this.notifyChange(this.initialValue)},methods:{onChange(e){const{checked:t}=e.target;this.storageKey&&storage$3.save(this.storageKey,t),this.notifyChange(t)},notifyChange(e){this.$emit("update:modelValue",e),this.$emit("change",e)}}},_hoisted_1$p=["checked"];function _sfc_render$a(e,t,o,r,i,s){return openBlock(),createElementBlock("input",{type:"checkbox",checked:o.modelValue,onChange:t[0]||(t[0]=(...n)=>s.onChange&&s.onChange(...n))},null,40,_hoisted_1$p)}var AyvaCheckbox=_export_sfc(_sfc_main$a,[["render",_sfc_render$a]]);const storage$2=new Storage("bpm-select"),_sfc_main$9={props:{modelValue:{type:String,default:null},storageKey:{type:String,default:null}},emits:["update:modelValue","change"],data(){return{initialValue:null,options:[{key:"transition",label:"On Transition"},{key:"continuous",label:"Continuously"}]}},computed:{label(){return this.options.reduce((t,o)=>(t[o.key]=o.label,t),{})[this.modelValue]||""}},watch:{modelValue(e){this.storageKey&&storage$2.save(this.storageKey,e)}},beforeMount(){this.storageKey&&(this.initialValue=storage$2.load(this.storageKey))},mounted(){this.initialValue!==null&&this.initialValue!==void 0&&this.notifyChange(this.initialValue)},methods:{onChange(e){this.storageKey&&storage$2.save(this.storageKey,e),this.notifyChange(e)},notifyChange(e){this.$emit("update:modelValue",e),this.$emit("change",e)}}},_hoisted_1$o={class:"ayva-dropdown-input"};function _sfc_render$9(e,t,o,r,i,s){const n=resolveComponent("chevron-dropdown-icon"),a=resolveComponent("n-dropdown");return openBlock(),createBlock(a,{class:"bpm-select ayva-dropdown",placement:"bottom-start",trigger:"click",size:"small",options:i.options,onSelect:s.onChange},{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$o,[createBaseVNode("span",null,toDisplayString(s.label),1),createVNode(n,{class:"chevron"})])]),_:1},8,["options","onSelect"])}var AyvaBpmSelect=_export_sfc(_sfc_main$9,[["render",_sfc_render$9]]);const keyPattern=/[a-z0-9-]+/,parametersSchema=Joi.object({from:Joi.number().required().min(0).max(1),to:Joi.number().required().min(0).max(1),phase:Joi.number(),ecc:Joi.number(),noise:Joi.any(),motion:Joi.string()}).required(),noiseSchema=Joi.object({from:Joi.number().min(0).max(1),to:Joi.number().min(0).max(1)}).min(1).required(),behaviorSchema=Joi.object({name:Joi.string().required().pattern(keyPattern),type:Joi.string().required().pattern(/tempest-stroke|ayvascript/),data:Joi.object().required()}),scriptSchema=Joi.object({script:Joi.string().required()});function validateTempestStroke(e){const t=Object.keys(e);if(!t.length)return!1;for(const o of t){if(parametersSchema.validate(e[o]).error)return!1;if(has(e[o],"noise")){const{noise:r}=e[o];if(!validNumber(r,0,1)&&noiseSchema.validate(r).error)return!1}}return!0}function validateAyvaScript(e){return!scriptSchema.validate(e).error}var validator={validate(e){for(const t of e){if(behaviorSchema.validate(t).error)return!1;const{type:o,data:r}=t;if(o==="tempest-stroke")return validateTempestStroke(r);if(o==="ayvascript")return validateAyvaScript(r)}return!1}};const storage$1=new Storage("custom-behaviors"),fileOptions$1={types:[{description:"Ayva Behaviors",accept:{"application/json":[".json"]}}],excludeAcceptAllOption:!0,multiple:!1,suggestedName:"ayva-behaviors.json"};class CustomBehaviorStorage{migrateLegacyStrokes(){const t=new Storage("custom-tempest-strokes"),o=t.load("all");o&&(Object.entries(o).forEach(([r,i])=>{this.save(r,"tempest-stroke",i)}),t.remove("all"))}load(){const t=storage$1.load("all")||{},o=this.deserialize(t);return Object.entries(o).forEach(([r,i])=>{i.type==="tempest-stroke"&&TempestStroke.update(r,i.data)}),o}save(t,o,r){const i=this.load();i[t]={type:o,data:r},storage$1.save("all",this.serialize(i))}delete(t){const o=this.load();delete o[t],storage$1.save("all",o),TempestStroke.remove(t),localStorage.removeItem(`checkbox-value--free-play-pattern-${t}`)}async import(t){let o;try{[o]=await window.showOpenFilePicker(fileOptions$1)}catch{return}const r=await o.getFile(),i=JSON.parse(await r.text());if(!Array.isArray(i)||!validator.validate(i))throw new SyntaxError("Invalid behavior file.");const s=this.load(),n=[];for(const a of i){let{name:l}=a;if(s[l]){let d=2;for(;s[l];)l=`${a.name}-${d++}`;n.push(l)}this.save(l,a.type,a.data)}n.length&&t instanceof Function&&t(n)}async export(){let t;try{t=await window.showSaveFilePicker(fileOptions$1)}catch{return}const o=await t.createWritable(),r=this.serialize(this.load()),i=Object.entries(r).map(([s,n])=>({name:s,type:n.type,data:n.data}));await o.write(JSON.stringify(i,null,2)),await o.close()}async exportOne(t){let o;try{o=await window.showSaveFilePicker(H(x({},fileOptions$1),{suggestedName:`${t}.json`}))}catch{return}const r=await o.createWritable(),i=this.serialize(this.load()),{type:s,data:n}=i[t],a=[{name:t,type:s,data:n}];await r.write(JSON.stringify(a,null,2)),await r.close()}serialize(t){const o=_.cloneDeep(t);return Object.values(o).forEach(r=>{r.type==="tempest-stroke"&&Object.values(r.data).forEach(i=>{if(i.motion instanceof Function)switch(i.motion.name){case"tempestMotion":i.motion="Ayva.tempestMotion";break;case"parabolicMotion":i.motion="Ayva.parabolicMotion";break;case"linearMotion":i.motion="Ayva.linearMotion";break;default:console.warn("Invalid motion property:",i.motion),delete i.motion}else i.motion!==void 0&&typeof i.motion!="string"&&(console.warn("Invalid motion property:",i.motion),delete i.motion)})}),o}deserialize(t){const o=_.cloneDeep(t);return Object.values(o).forEach(r=>{r.type==="tempest-stroke"&&Object.values(r.data).forEach(i=>{switch(i.motion){case"Ayva.tempestMotion":i.motion=Ayva.tempestMotion;break;case"Ayva.parabolicMotion":i.motion=Ayva.parabolicMotion;break;case"Ayva.linearMotion":i.motion=Ayva.linearMotion;break;default:i.motion&&(console.warn("Invalid motion property:",i.motion),delete i.motion)}})}),o}}self.MonacoEnvironment={getWorker(e,t){return t==="json"?new WorkerWrapper:t==="css"||t==="scss"||t==="less"?new WorkerWrapper$1:t==="html"||t==="handlebars"||t==="razor"?new WorkerWrapper$2:t==="typescript"||t==="javascript"?new WorkerWrapper$3:new WorkerWrapper$4}};const ayvascriptTheme={base:"vs-dark",inherit:!0,colors:{"editor.background":"#111111"},rules:[],settings:[]};editor$2.defineTheme("ayvascript",ayvascriptTheme);languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!0});var ayvascriptEditor={create(e,t=""){return editor$2.create(e,{value:t,theme:"ayvascript",language:"javascript",hover:!1,tabSize:2,quickSuggestions:!1,lightbulb:{enabled:!1},minimap:{enabled:!1}})},syntaxError(e,t,o){return e.deltaDecorations([],[{range:new Range(t,o-1,t,o),options:{className:"squiggly-error",glyphMarginClassName:"syntax-error"}}])}},O;class ScriptRunner extends GeneratorBehavior{constructor(o,r){super();y(this,O,void 0);k(this,O,new ScriptBehavior(o,r))}get complete(){return f(this,O).complete}set complete(o){f(this,O).complete=o}*generate(o){try{yield f(this,O).perform(o).then(()=>{this.complete&&this.$emit("complete")}).catch(this.handleError.bind(this))}catch(r){this.handleError(r)}}handleError(o){this.complete=!0,this.$emit("error",o),this.$emit("complete")}}O=new WeakMap;Object.assign(ScriptRunner.prototype,eventMixin);var ayvaModal_css_vue_type_style_index_0_src_286ec1f6_scoped_true_lang="",AyvaScriptEditor_vue_vue_type_style_index_1_scoped_true_lang="";const customBehaviorStorage$2=new CustomBehaviorStorage,ayva$2=createAyva();let emulator$2,editor;const _sfc_main$8={components:{AyvaCheckbox},inject:{globalAyva:{from:"globalAyva"},device:{from:"globalDevice"},parameters:{from:"globalParameters"}},props:{editScript:{type:String,default:null}},emits:["close","save"],setup(){return{notify:useNotification()}},data(){return{playing:!1,tempestStrokeLibrary:TempestStroke.library,customBehaviorLibrary:{},previewOnDevice:!1,scriptName:"",script:"",isScriptValid:!1,decorations:[]}},computed:{edit(){return!!this.editScript},saveText(){return this.edit?"Save":"Add to Library"},disabled(){return this.playing?"":void 0},scriptNameDuplicate(){return this.editScript&&this.scriptName===this.editScript?!1:!!this.tempestStrokeLibrary[this.scriptName]||!!this.customBehaviorLibrary[this.scriptName]},scriptNameValid(){return this.scriptName.length&&!this.scriptNameDuplicate&&!this.scriptNameReserved},scriptNameReserved(){return this.scriptName==="default"||this.scriptName==="header"},scriptValid(){return!!this.script.trim()&&this.validateScript(this.script)}},watch:{previewOnDevice(){this.previewOnDevice?ayva$2.addOutput(this.device):(ayva$2.removeOutput(this.device),this.resetGlobalDevicePosition())},"device.connected"(e){e||(ayva$2.removeOutput(this.device),this.previewOnDevice=!1)},scriptName(e){this.scriptName=e.replaceAll(/[^a-zA-Z0-9-]/g,"").toLowerCase()}},beforeMount(){this.customBehaviorLibrary=customBehaviorStorage$2.load()},mounted(){emulator$2=new La(this.$refs.emulator),ayva$2.addOutput(emulator$2),Object.keys(ayva$2.axes).forEach(t=>{ayva$2.updateLimits(t,this.globalAyva.$[t].min,this.globalAyva.$[t].max)}),this.editScript?(this.scriptName=this.editScript,this.script=this.customBehaviorLibrary[this.scriptName].data.script):this.script=`/**
 * Enter AyvaScript here...
 */`,editor=ayvascriptEditor.create(this.$refs.editor,this.script),editor.getModel().onDidChangeContent(()=>{this.script=editor.getValue();for(const t of this.decorations)editor.deltaDecorations(t,[]);this.validateScript(this.script)});const e=ayva$2.stop.bind(ayva$2);ayva$2.stop=()=>{e(),this.onAyvaStop()}},unmounted(){ayva$2.stop(),ayva$2.removeOutput(emulator$2),ayva$2.removeOutput(this.device),emulator$2.destroy(),this.previewOnDevice&&this.resetGlobalDevicePosition()},methods:{togglePlaying(){this.playing?ayva$2.stop():this.validateScript(this.script,!0)&&this.play()},save(){this.editScript&&customBehaviorStorage$2.delete(this.editScript),customBehaviorStorage$2.save(this.scriptName,"ayvascript",{script:this.script}),this.$emit("close"),this.$emit("save")},close(){this.$emit("close")},play(){this.playing=!0,editor.updateOptions({readOnly:!0});const e=Object.keys(this.parameters).reduce((o,r)=>(o[_.camelCase(r)]=_.cloneDeep(this.parameters[r]),o),{}),t=new ScriptRunner(this.script,{GLOBALS:{input:null,output:null,parameters:e,mode:"manual"}});t.on("complete",()=>{ayva$2.stop()}),t.on("error",o=>{this.notify.error({content:"Exception occurred while running script:",meta:o.message})}),ayva$2.do(t)},onAyvaStop(){ayva$2.home(1),this.playing=!1,editor.updateOptions({readOnly:!1})},validateScript(e,t=!1){const o=["function* generate() {",...e.split(`
`),"}"],r=jshint.JSHINT(o,{esversion:11,noyield:!0,debug:!0}),i=Object.values(jshint.JSHINT.errors.filter(s=>s.line!==1&&s.line!==o.length).map(s=>H(x({},s),{line:s.line-1})).reduce((s,n)=>(s[n.line]=s[n.line]||n,s),{}));if(!r){const s=[];for(const n of i)this.decorations.push(ayvascriptEditor.syntaxError(editor,n.line,n.character)),s.push(h("div",[`Line ${n.line}: ${n.reason}`])),s.push(h("br"));t&&this.notify.error({content:"Syntax error(s):",meta:()=>h("div",s)})}return r},resetGlobalDevicePosition(){for(const e in ayva$2.$)this.globalAyva.$[e].value=ayva$2.$[e].value}}},_withScopeId$3=e=>(pushScopeId("data-v-286ec1f6"),e=e(),popScopeId(),e),_hoisted_1$n={class:"header","hover-info":""},_hoisted_2$n={class:"toolbar"},_hoisted_3$m={class:"toolbar-left"},_hoisted_4$7={class:"toolbar-right"},_hoisted_5$7={class:"main-inputs"},_hoisted_6$5={class:"setup"},_hoisted_7$3=["disabled"],_hoisted_8$3={key:0,class:"device"},_hoisted_9$3=_withScopeId$3(()=>createBaseVNode("label",{for:"preview-on-device"},"Send preview to actual device.",-1)),_hoisted_10$3={key:1,class:"device"},_hoisted_11$3=_withScopeId$3(()=>createBaseVNode("label",{disabled:""},"No device connected. Preview only available on emulator.",-1)),_hoisted_12$3=[_hoisted_11$3],_hoisted_13$3={class:"editor-column"},_hoisted_14$2={class:"emulator-column","hover-info":""},_hoisted_15$2={ref:"emulator",class:"emulator"},_hoisted_16$2={class:"save-container","hover-info":""},_hoisted_17$2=_withScopeId$3(()=>createBaseVNode("label",null,"Name:",-1)),_hoisted_18$2=createTextVNode(" A behavior with that name already exists. "),_hoisted_19$2=["disabled"];function _sfc_render$8(e,t,o,r,i,s){const n=resolveComponent("close-icon"),a=resolveComponent("play-icon"),l=resolveComponent("stop-icon"),d=resolveComponent("ayva-checkbox"),m=resolveComponent("n-tooltip");return openBlock(),createElementBlock("div",{class:"modal-body",onMouseover:t[4]||(t[4]=(...u)=>e.onHover&&e.onHover(...u))},[createBaseVNode("div",_hoisted_1$n,[createBaseVNode("div",_hoisted_2$n,[createBaseVNode("span",_hoisted_3$m,[createBaseVNode("span",null,toDisplayString(s.edit?"Edit":"Create")+" AyvaScript",1)]),createBaseVNode("span",_hoisted_4$7,[createBaseVNode("span",null,[createVNode(n,{class:"close icon",onClick:s.close},null,8,["onClick"])])])]),createBaseVNode("div",_hoisted_5$7,[createBaseVNode("div",_hoisted_6$5,[createBaseVNode("button",{class:"play",disabled:!i.script.trim(),onClick:t[0]||(t[0]=(...u)=>s.togglePlaying&&s.togglePlaying(...u))},[createBaseVNode("span",null,[withDirectives(createVNode(a,{class:"play-icon"},null,512),[[vShow,!i.playing]]),withDirectives(createVNode(l,{class:"stop-icon"},null,512),[[vShow,i.playing]])]),createBaseVNode("span",null,toDisplayString(i.playing?"Stop":"Play"),1)],8,_hoisted_7$3)]),s.device&&s.device.connected?(openBlock(),createElementBlock("div",_hoisted_8$3,[createBaseVNode("span",null,[createVNode(d,{id:"preview-on-device",modelValue:i.previewOnDevice,"onUpdate:modelValue":t[1]||(t[1]=u=>i.previewOnDevice=u)},null,8,["modelValue"]),_hoisted_9$3])])):(openBlock(),createElementBlock("div",_hoisted_10$3,_hoisted_12$3))])]),createBaseVNode("div",_hoisted_13$3,[createBaseVNode("div",{ref:"editor",class:normalizeClass(["editor",i.playing?"readonly":""])},null,2)]),createBaseVNode("div",_hoisted_14$2,[createBaseVNode("div",_hoisted_15$2,null,512)]),createBaseVNode("div",_hoisted_16$2,[createBaseVNode("div",null,[_hoisted_17$2,createVNode(m,{show:s.scriptNameDuplicate,class:"error-tooltip"},{trigger:withCtx(()=>[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":t[2]||(t[2]=u=>i.scriptName=u),class:normalizeClass(["name",s.scriptNameDuplicate?"error":""])},null,2),[[vModelText,i.scriptName]])]),default:withCtx(()=>[_hoisted_18$2]),_:1},8,["show"]),createBaseVNode("button",{class:"ayva-button primary",disabled:!s.scriptNameValid||!s.scriptValid||i.playing,onClick:t[3]||(t[3]=(...u)=>s.save&&s.save(...u))},toDisplayString(s.saveText),9,_hoisted_19$2)])])],32)}var AyvaScriptEditor=_export_sfc(_sfc_main$8,[["render",_sfc_render$8],["__scopeId","data-v-286ec1f6"]]),AyvaKnob_vue_vue_type_style_index_0_scoped_true_lang="";const storage=new Storage("knob-value"),_sfc_main$7={props:{modelValue:{type:Number,default:0},storageKey:{type:String,default:null},size:{type:Number,default:18}},emits:["update:modelValue","change"],data(){return{initialValue:0,active:!1}},computed:{center(){return this.size/2},radius(){return this.size/2-1},arcLength(){return 2*Math.PI*this.radius},arcOffset(){return this.arcLength*(1-this.modelValue)}},watch:{modelValue(e){this.storageKey&&storage.save(this.storageKey,e)}},beforeMount(){this.storageKey&&(this.initialValue=storage.load(this.storageKey))},mounted(){this.initialValue!==null&&this.initialValue!==void 0&&this.notifyChange(this.initialValue),document.addEventListener("pointerlockchange",this.onPointerLockChange),document.addEventListener("mouseup",this.stop)},unmounted(){document.removeEventListener("pointerlockchange",this.onPointerLockChange),document.removeEventListener("mouseup",this.stop)},methods:{setValue(e){this.storageKey&&storage.save(this.storageKey,e),this.notifyChange(e)},notifyChange(e){this.$emit("update:modelValue",e),this.$emit("change",e)},update(e){if(this.active){const t=clamp(Number((-e.movementY/100).toFixed(2)),-1,1),o=clamp(this.modelValue+t,0,1);this.setValue(o)}},start(){this.active=!0,this.$refs.knob.requestPointerLock()},stop(){this.active&&(this.active=!1,document.exitPointerLock())},wheel(e){const t=clamp(Number((-e.deltaY/200).toFixed(2)),-1,1),o=clamp(this.modelValue+t,0,1);this.setValue(o)},onPointerLockChange(){document.pointerLockElement!==this.$refs.knob&&this.stop()}}},_hoisted_1$m=["width","height"],_hoisted_2$m=createStaticVNode('<defs data-v-abf81582><radialGradient id="trackGradient" data-v-abf81582><stop offset="0%" stop-color="black" data-v-abf81582></stop><stop offset="95%" stop-color="var(--ayva-background-medium)" data-v-abf81582></stop></radialGradient><linearGradient id="knobGradient" x1="0%" y1="0%" x2="100%" y2="0" data-v-abf81582><stop offset="0%" stop-color="rgb(100, 100, 100)" data-v-abf81582></stop><stop offset="50%" stop-color="rgb(48, 48, 48)" data-v-abf81582></stop></linearGradient></defs>',1),_hoisted_3$l=["cx","cy","r"],_hoisted_4$6=["cx","cy","r"],_hoisted_5$6=["cx","cy","r","stroke-dasharray","stroke-dashoffset"];function _sfc_render$7(e,t,o,r,i,s){return openBlock(),createElementBlock("svg",{ref:"knob",xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:o.size,height:o.size,class:"container",onMousedown:t[0]||(t[0]=withModifiers((...n)=>s.start&&s.start(...n),["left"])),onMousemove:t[1]||(t[1]=(...n)=>s.update&&s.update(...n)),onWheel:t[2]||(t[2]=withModifiers((...n)=>s.wheel&&s.wheel(...n),["prevent"]))},[_hoisted_2$m,createBaseVNode("circle",{cx:s.center,cy:s.center,r:s.radius,fill:"url('#trackGradient')"},null,8,_hoisted_3$l),createBaseVNode("circle",{class:"knob",cx:s.center,cy:s.center,r:s.radius-2,fill:"url('#knobGradient')"},null,8,_hoisted_4$6),createBaseVNode("circle",{cx:s.center,cy:s.center,r:s.radius,"stroke-dasharray":s.arcLength,"stroke-dashoffset":s.arcOffset,stroke:"rgb(138, 99, 131)","stroke-width":"2",fill:"none"},null,8,_hoisted_5$6)],40,_hoisted_1$m)}var AyvaKnob=_export_sfc(_sfc_main$7,[["render",_sfc_render$7],["__scopeId","data-v-abf81582"]]);const _hoisted_1$l={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 34"},_hoisted_2$l=createBaseVNode("path",{d:"M1 17q5.25-17 11.5 0T25 17",fill:"transparent",stroke:"#8A6383","stroke-width":"2"},null,-1),_hoisted_3$k=[_hoisted_2$l];function render$f(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$l,_hoisted_3$k)}var SineIcon={render:render$f},__glob_0_14=Object.freeze(Object.defineProperty({__proto__:null,render:render$f,default:SineIcon},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$k={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 34"},_hoisted_2$k=createBaseVNode("path",{d:"M2 25q10.5-30 21 0",fill:"transparent",stroke:"#8A6383","stroke-width":"2"},null,-1),_hoisted_3$j=[_hoisted_2$k];function render$e(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$k,_hoisted_3$j)}var ParabolaIcon={render:render$e},__glob_0_11=Object.freeze(Object.defineProperty({__proto__:null,render:render$e,default:ParabolaIcon},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$j={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 34"},_hoisted_2$j=createBaseVNode("path",{fill:"transparent",stroke:"#8A6383","stroke-width":"2",d:"m0 25 12.5-15L25 25"},null,-1),_hoisted_3$i=[_hoisted_2$j];function render$d(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$j,_hoisted_3$i)}var LinearIcon={render:render$d},__glob_0_10=Object.freeze(Object.defineProperty({__proto__:null,render:render$d,default:LinearIcon},Symbol.toStringTag,{value:"Module"})),TempestMotion_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$6={components:{AyvaSlider,AyvaKnob},props:{modelValue:{type:Object,default:()=>({from:.5,to:.5,phase:0,ecc:0,noise:{from:0,to:0},motion:Ayva.tempestMotion})},displayName:{type:String,default:""},angle:{type:Number,default:0},scrollElement:{type:Object,default:null}},emits:["update:modelValue"],data(){return{rangeOptions:{animate:!1,range:{min:0,max:1},start:[.5,.5],orientation:"vertical",direction:"rtl",behaviour:"unconstrained",step:.01},phaseOptions:{range:{min:-4,max:4},start:[0],step:.05},eccOptions:{range:{min:-1,max:1},start:[0],step:.05},motionOptions:[{label:"Sinusoidal",value:"Ayva.tempestMotion"},{label:"Parabolic",value:"Ayva.parabolicMotion"},{label:"Linear",value:"Ayva.linearMotion"}],from:.5,to:.5,phase:0,ecc:0,motion:Ayva.tempestMotion,noise:{from:0,to:0},current:{from:.5,to:.5},selectedMotion:"Ayva.tempestMotion",lastFromDirection:1,lastToDirection:-1}},computed:{range:{get(){return[this.from,this.to]},set(e){[this.from,this.to]=e}}},watch:{modelValue:{immediate:!0,deep:!0,handler(e){nextTick(()=>{if(this.changed(e)){const{rangeSlider:t,phaseSlider:o,eccSlider:r}=this.$refs;t.set(e.from,e.to),o.set(e.phase),r.set(e.ecc),this.motion=e.motion,this.noise=typeof e.noise=="object"?e.noise:{from:e.noise,to:e.noise},this.current=e.$current,this.motion?this.selectedMotion=`Ayva.${this.motion.name}`:this.selectedMotion="Ayva.tempestMotion"}})},flush:"post"},angle(){this.plot()},selectedMotion(updatedMotion){this.motion=eval(updatedMotion),this.updateModelValue()}},mounted(){["from","to","phase","ecc","noise.from","noise.to"].forEach(t=>this.$watch(t,o=>{t==="from"?this.current.from=o:t==="to"&&(this.current.to=o),this.plot(),this.updateModelValue()}))},methods:{onWheel(e){const t=e.deltaY*.003,o=(this.from+this.to)/2,r=g=>g>0?{min:0,max:o}:{min:o,max:1},i=(g,S)=>clamp(g,S.min,S.max),s=g=>{const S=o-g;return S>0?1:S<0?-1:0};let n,a;const l=s(this.from)||this.lastFromDirection,d=s(this.to)||this.lastToDirection,m=r(l),u=r(d);n=this.from+t*l,a=this.to+t*d,n=i(n,m),a=i(a,u),this.$refs.rangeSlider.set(n,a),this.lastFromDirection=l,this.lastToDirection=d},plot(){if(this.scrollElement){const u=this.scrollElement.getBoundingClientRect(),g=this.$refs.wave.getBoundingClientRect();if(g.top+g.height<u.top||g.top>u.top+u.height)return}const{from:e,to:t,phase:o,ecc:r,motion:i,noise:s,current:n}=this,a=this.createPlotFunction(e,t,o,r,i),{width:l,height:d}=this.getScale();if(this.getContext().clearRect(0,0,l,d),this.plotMotion(a,this.getPlotColor()),this.plotProgressDot(this.createPlotFunction(n.from,n.to,o,r,i)),s.from||s.to)for(let u=0;u<1;u+=.1){const g=e+(t-e)/2*((s.from||0)*u),S=t+(e-t)/2*((s.to||0)*(1-u)),$=this.createPlotFunction(g,S,o,r,i);this.plotMotion($,this.getPlotColor(.1))}},plotMotion(e,t){const o=this.getContext(),{width:r,height:i,widthScale:s,heightScale:n}=this.getScale();o.beginPath();let a=!0;for(let l=0;l<r;l++){const d=l/s;let m=(e(d)-0)*n;m=i-6-m,a?(o.moveTo(l,m),a=!1):o.lineTo(l,m)}o.lineCap="round",o.setLineDash([3,3]),o.strokeStyle=t,o.lineWidth=2,o.stroke(),o.closePath()},plotProgressDot(e){const t=this.getContext(),{width:o,height:r,widthScale:i,heightScale:s}=this.getScale(),a=this.angle%(Math.PI*2)/(Math.PI*2)*o,l=r-6-(e(a/i)-0)*s;t.beginPath(),t.arc(a,l,4,0,2*Math.PI),t.fillStyle=this.getPlotColor(),t.fill()},createPlotFunction(e,t,o,r,i){return s=>i&&i.name==="parabolicMotion"?this.parabolicMotion(e,t,o,r,s):i&&i.name==="linearMotion"?this.linearMotion(e,t,o,r,s):this.sinMotion(e,t,o,r,s)},getContext(){return this.$refs.wave.getContext("2d")},getScale(){const{width:e,height:t}=this.$refs.wave,o=e/(Math.PI*2),r=t-12;return{width:e,height:t,widthScale:o,heightScale:r}},getPlotColor(e=1){return`rgba(138, 99, 131, ${e})`},sinMotion(e,t,o,r,i){const s=.5*(t-e),n=.5*(t+e),a=i+.5*Math.PI*o;return n-s*Math.cos(a+r*Math.sin(a))},parabolicMotion(e,t,o,r,i){const{sin:s,PI:n}=Math,a=t-e,l=t,d=i+.5*n*o,m=this.mod(d,2*n)/n-1+r/n*s(d);return l-a*m*m},linearMotion(e,t,o,r,i){const{abs:s,sin:n,PI:a}=Math,l=t-e,d=t,m=i+.5*a*o,u=this.mod(m,2*a)/a-1+r/a*n(m);return d-l*s(u)},mod(e,t){return(e%t+t)%t},updateModelValue(){const{from:e,to:t,phase:o,ecc:r,motion:i,noise:s,current:n}=this;this.$emit("update:modelValue",{from:e,to:t,phase:o,ecc:r,motion:i,noise:s,$current:n})},changed(e){return!!Object.keys(e).filter(o=>o==="$current"?e.$current.from!==this.current.from||e.$current.to!==this.current.to:e[o]!==this[o]).length},renderMotionLabel(e){let t;switch(e.label){case"Sinusoidal":t=SineIcon;break;case"Parabolic":t=ParabolaIcon;break;case"Linear":t=LinearIcon;break}return h("div",{style:"display: flex"},[h(t,{style:"width: 25px; height: 20px; position: relative; left: -2px;"}),h("span",[e.label])])}}},_hoisted_1$i={class:"tempest-motion"},_hoisted_2$i={class:"range"},_hoisted_3$h={class:"wave"},_hoisted_4$5={class:"display-name"},_hoisted_5$5={class:"phase"},_hoisted_6$4={class:"ecc"};function _sfc_render$6(e,t,o,r,i,s){const n=resolveComponent("ayva-slider"),a=resolveComponent("ayva-knob"),l=resolveComponent("function-icon"),d=resolveComponent("n-popselect");return openBlock(),createElementBlock("div",_hoisted_1$i,[createBaseVNode("div",_hoisted_2$i,[createVNode(n,{ref:"rangeSlider",modelValue:s.range,"onUpdate:modelValue":t[0]||(t[0]=m=>s.range=m),options:i.rangeOptions,"merge-tooltips":!1,"active-tooltips":"","hover-info":"Range"},null,8,["modelValue","options"])]),createBaseVNode("div",_hoisted_3$h,[createBaseVNode("canvas",{ref:"wave",width:"435",height:"100",onWheel:t[1]||(t[1]=withModifiers((...m)=>s.onWheel&&s.onWheel(...m),["prevent"]))},null,544)]),createBaseVNode("div",_hoisted_4$5,[createBaseVNode("label",null,toDisplayString(o.displayName),1)]),createBaseVNode("div",_hoisted_5$5,[createVNode(n,{ref:"phaseSlider",modelValue:i.phase,"onUpdate:modelValue":t[2]||(t[2]=m=>i.phase=m),options:i.phaseOptions,"active-tooltips":"","hover-info":"Phase"},null,8,["modelValue","options"])]),createBaseVNode("div",_hoisted_6$4,[createVNode(n,{ref:"eccSlider",modelValue:i.ecc,"onUpdate:modelValue":t[3]||(t[3]=m=>i.ecc=m),options:i.eccOptions,"active-tooltips":"","hover-info":"Eccentricity"},null,8,["modelValue","options"])]),createVNode(a,{modelValue:i.noise.from,"onUpdate:modelValue":t[4]||(t[4]=m=>i.noise.from=m),class:"noise from","hover-info":"Noise (From)"},null,8,["modelValue"]),createVNode(a,{modelValue:i.noise.to,"onUpdate:modelValue":t[5]||(t[5]=m=>i.noise.to=m),class:"noise to","hover-info":"Noise (To)"},null,8,["modelValue"]),createVNode(d,{value:i.selectedMotion,"onUpdate:value":t[6]||(t[6]=m=>i.selectedMotion=m),placement:"bottom-start",class:"motion",trigger:"click",options:i.motionOptions,"render-label":s.renderMotionLabel},{default:withCtx(()=>[createVNode(l,{class:"function icon","hover-info":"Function"})]),_:1},8,["value","options","render-label"])])}var TempestMotion=_export_sfc(_sfc_main$6,[["render",_sfc_render$6],["__scopeId","data-v-77818888"]]),ayvaModal_css_vue_type_style_index_0_src_49f611fc_scoped_true_lang="";const customBehaviorStorage$1=new CustomBehaviorStorage,ayva$1=createAyva();let emulator$1;const defaultStroke={stroke:{from:.5,to:.5,phase:0,ecc:0}},_sfc_main$5={components:{TempestMotion,AyvaSlider,AyvaCheckbox},inject:{globalAyva:{from:"globalAyva"},device:{from:"globalDevice"}},props:{editStroke:{type:String,default:null}},emits:["close","save"],data(){return{active:{type:Boolean,default:!0},axes:this.createAxes("default",defaultStroke),availableAxes:ayvaConfig.axes.map(e=>H(x({},e),{label:`${e.alias} (${e.name})`,value:e.name,emulator:["L0","R0","R1","R2"].indexOf(e.name)!==-1})),previewAngle:0,previewBpm:60,previewBpmOptions:{start:[60],tooltips:!0,connect:!0,padding:[10],step:1,range:{min:0,max:200},format:formatter()},tempestStrokeLibrary:TempestStroke.library,customBehaviorLibrary:{},transitionDuration:.5,presetIndex:0,presetLabel:"Presets",previewOnDevice:!1,axisScrollTop:0,strokeName:"",contextClue:"",contextClueTimeout:null,axisScrollElement:null}},computed:{edit(){return!!this.editStroke},saveText(){return this.edit?"Save":"Add to Library"},axesByAlias(){return(this.axes||[]).reduce((e,t)=>(e[t.alias]=t,e),{})},selectedAxes:{get(){return this.axes.map(e=>e.name)},set(e){const t=new Set(e),o=new Set(this.axes.map(s=>s.name)),r=new Set([...o].filter(s=>!t.has(s))),i=this.axes.reduce((s,n)=>(s.set(n.name,n),s),new Map);this.axes=this.availableAxes.filter(s=>t.has(s.name)).map(s=>{const n=i.get(s.name);if(!n){const a=ayva$1.getAxis(s.name).type==="auxiliary"?0:.5;return this.createAxis(s.name,{from:a,to:a,phase:0,ecc:0})}return n});for(const s of r){const n=ayva$1.getAxis(s).type==="auxiliary"?0:.5;ayva$1.$[s].value=n}}},tempestStrokeOptions(){const e=Object.keys(this.tempestStrokeLibrary).filter(t=>!this.customBehaviorLibrary[t]).reduce((t,o)=>(t[o]=this.tempestStrokeLibrary[o],t),{});return Object.keys(e).sort().map(t=>({key:t,label:t}))},customStrokeOptions(){return Object.keys(this.customStrokeLibrary).sort().map(e=>({key:e,label:e}))},strokeLibraryDropdownOptions(){return[{key:"default",label:"Default",props:{class:"default-option"}},{key:"header",type:"render",render:()=>h("div",{class:"stroke-library-heading"},h("div",{disabled:this.customStrokeOptions.length?void 0:""},"Custom"))},...this.customStrokeOptions,{key:"header",type:"render",render:()=>h("div",{class:"stroke-library-heading"},"Library")},...this.tempestStrokeOptions]},strokeLibraryOptions(){return this.strokeLibraryDropdownOptions.filter(e=>e.key!=="header")},disabled(){return this.active?void 0:""},strokeNameDuplicate(){return this.editStroke&&this.strokeName===this.editStroke?!1:!!this.tempestStrokeLibrary[this.strokeName]||!!this.customBehaviorLibrary[this.strokeName]},strokeNameValid(){return this.strokeName.length&&!this.strokeNameDuplicate&&!this.strokeNameReserved},strokeNameReserved(){return this.strokeName==="default"||this.strokeName==="header"},customStrokeLibrary(){const e={};return Object.entries(this.customBehaviorLibrary).forEach(([t,o])=>{o.type==="tempest-stroke"&&(e[t]=o.data)}),e}},watch:{active:{immediate:!0,handler(e){ayva$1.stop(),e&&nextTick(()=>{this.animatePreview()})}},previewOnDevice(){this.previewOnDevice?ayva$1.addOutput(this.device):(ayva$1.removeOutput(this.device),this.resetGlobalDevicePosition())},"device.connected"(e){e||(ayva$1.removeOutput(this.device),this.previewOnDevice=!1)},strokeName(e){this.strokeName=e.replaceAll(/[^a-zA-Z0-9-]/g,"").toLowerCase()}},beforeMount(){this.customBehaviorLibrary=customBehaviorStorage$1.load()},mounted(){if(emulator$1=new La(this.$refs.emulator),ayva$1.addOutput(emulator$1),Object.keys(ayva$1.axes).forEach(e=>{ayva$1.updateLimits(e,this.globalAyva.$[e].min,this.globalAyva.$[e].max)}),window.addEventListener("scroll",this.onAxisScroll,{passive:!0,capture:!0}),this.editStroke){this.strokeName=this.editStroke;const e=this.strokeLibraryOptions.find(t=>t.key===this.editStroke);this.selectPreset(this.editStroke,e)}this.axisScrollElement=this.$refs.axisScrollParent},unmounted(){ayva$1.stop(),ayva$1.removeOutput(emulator$1),ayva$1.removeOutput(this.device),emulator$1.destroy(),window.removeEventListener("scroll",this.onAxisScroll),this.previewOnDevice&&this.resetGlobalDevicePosition()},methods:{animatePreview(){const{granularity:e}=TempestStroke,t=30/e,o=Math.PI/e,r=[];for(const i of this.availableAxes)r.push({axis:i.name,value:this.createPreviewValueProvider(i),duration:t/this.previewBpm});ayva$1.move(...r).then(i=>{i&&(this.previewAngle+=o,this.active&&this.animatePreview())})},createPreviewValueProvider(e){const t=o=>{const r=this.axesByAlias[e.alias];if(r&&r.parameters){const{from:i,to:s,phase:n,ecc:a,motion:l,$current:d}=r.parameters,m=(l||Ayva.tempestMotion)((d==null?void 0:d.from)||i,(d==null?void 0:d.to)||s,n,a,this.previewBpm,this.previewAngle)(o);return d&&r.parameters.noise&&this.generateNoise(r.parameters),m}return null};return o=>t(o)},generateNoise(e){const{PI:t}=Math,o=t/TempestStroke.granularity,r=u=>u*180/t,i=u=>validNumber(e.noise)?e.noise:e.noise[u]||0,n=e.phase*t/2+this.previewAngle,a=Math.round(r(n%(t*2))),l=Math.round(a+r(o)),d=a<360&&l>=360,m=a<180&&l>=180;if(d){const u=i("to"),g=(e.from-e.to)/2;e.$current.to=e.to+u*g*Math.random()}else if(m){const u=i("from"),g=(e.to-e.from)/2;e.$current.from=e.from+u*g*Math.random()}},selectPreset(e,t){const o=this.customStrokeLibrary[e]||this.tempestStrokeLibrary[e]||defaultStroke;o&&(this.presetLabel=t.label,this.presetIndex=this.strokeLibraryOptions.findIndex(r=>r.key===e),this.active=!1,this.previewAngle=0,this.$refs.axisScroll.scrollTo(0),nextTick(()=>{this.axes=this.createAxes(e,o);const r=this.getResetMoves(o);ayva$1.move(...r).then(()=>{this.active=!0})}))},nextPreset(){let e;this.presetIndex===null?e=0:e=(this.presetIndex+1)%this.strokeLibraryOptions.length;const t=this.strokeLibraryOptions[e];this.selectPreset(t.key,t)},previousPreset(){let e;this.presetIndex===null||this.presetIndex===0?e=this.strokeLibraryOptions.length-1:e=this.presetIndex-1;const t=this.strokeLibraryOptions[e];this.selectPreset(t.key,t)},getResetMoves(e){const t=this.transitionDuration,o=new TempestStroke(e).getStartMoves(ayva$1,{duration:t}),r=o.reduce((n,a)=>(n.add(a.axis),n),new Set),s=ayvaConfig.axes.filter(n=>!r.has(n.name)&&!r.has(n.alias)).map(n=>({to:n.type==="auxiliary"?0:.5,duration:t,axis:n.name}));return[...o,...s]},createAxes(e,t){return Object.keys(t).map(r=>{const i=x({},t[r]);return this.createAxis(r,i)}).filter(r=>e==="default"||!(r.parameters.from===.5&&r.parameters.to===.5))},createAxis(e,t){const{alias:o,name:r}=ayva$1.getAxis(e);return t.$current={from:t.from,to:t.to},{alias:o,name:r,parameters:t,label:`${o} (${r})`}},onAxisScroll(){this.axisScrollTop=this.$el.querySelector(".n-scrollbar-container").scrollTop},onHover(e){const t=e.path.find(o=>o.hasAttribute&&o.hasAttribute("hover-info"));t&&(this.contextClue=t.getAttribute("hover-info"))},save(){this.editStroke&&customBehaviorStorage$1.delete(this.editStroke);const e=this.axes.reduce((t,o)=>(t[o.name]=o.parameters,delete t[o.name].$current,t),{});customBehaviorStorage$1.save(this.strokeName,"tempest-stroke",e),this.$emit("close"),this.$emit("save")},resetGlobalDevicePosition(){for(const e in ayva$1.$)this.globalAyva.$[e].value=ayva$1.$[e].value}}},_withScopeId$2=e=>(pushScopeId("data-v-49f611fc"),e=e(),popScopeId(),e),_hoisted_1$h={class:"header","hover-info":""},_hoisted_2$h={class:"toolbar"},_hoisted_3$g={class:"toolbar-left"},_hoisted_4$4={class:"toolbar-right"},_hoisted_5$4=["disabled"],_hoisted_6$3={class:"presets-button"},_hoisted_7$2={class:"main-inputs"},_hoisted_8$2={class:"setup"},_hoisted_9$2={class:"context-clue"},_hoisted_10$2={class:"select-axes"},_hoisted_11$2=createTextVNode("Axes "),_hoisted_12$2={key:0,class:"device"},_hoisted_13$2=_withScopeId$2(()=>createBaseVNode("label",{for:"preview-on-device"},"Send preview to actual device.",-1)),_hoisted_14$1={key:1,class:"device"},_hoisted_15$1=_withScopeId$2(()=>createBaseVNode("label",{disabled:""},"No device connected. Preview only available on emulator.",-1)),_hoisted_16$1=[_hoisted_15$1],_hoisted_17$1={ref:"axisScrollParent",class:"axis-column"},_hoisted_18$1={class:"axis-scroll"},_hoisted_19$1={class:"emulator-column","hover-info":""},_hoisted_20$1={ref:"emulator",class:"emulator"},_hoisted_21$1={class:"preview-bpm"},_hoisted_22$1=["disabled"],_hoisted_23$1={class:"save-container","hover-info":""},_hoisted_24$1=_withScopeId$2(()=>createBaseVNode("label",null,"Name:",-1)),_hoisted_25$1=createTextVNode(" A behavior with that name already exists. "),_hoisted_26$1=["disabled"];function _sfc_render$5(e,t,o,r,i,s){const n=resolveComponent("n-dropdown"),a=resolveComponent("chevron-left-icon"),l=resolveComponent("chevron-right-icon"),d=resolveComponent("close-icon"),m=resolveComponent("axis-icon"),u=resolveComponent("n-popselect"),g=resolveComponent("ayva-checkbox"),S=resolveComponent("tempest-motion"),$=resolveComponent("n-scrollbar"),V=resolveComponent("ayva-slider"),c=resolveComponent("n-tooltip");return openBlock(),createElementBlock("div",{class:"modal-body",onMouseover:t[8]||(t[8]=(...v)=>s.onHover&&s.onHover(...v))},[createBaseVNode("div",_hoisted_1$h,[createBaseVNode("div",_hoisted_2$h,[createBaseVNode("span",_hoisted_3$g,[createBaseVNode("span",null,toDisplayString(s.edit?"Edit":"Create")+" TempestStroke",1)]),createBaseVNode("span",_hoisted_4$4,[createBaseVNode("span",{class:"presets",disabled:s.disabled},[createVNode(n,{placement:"bottom-start",trigger:"click",size:"small",options:s.strokeLibraryDropdownOptions,onSelect:s.selectPreset},{default:withCtx(()=>[createBaseVNode("span",_hoisted_6$3,toDisplayString(i.presetLabel),1)]),_:1},8,["options","onSelect"]),createBaseVNode("span",null,[createVNode(a,{class:"icon",onClick:t[0]||(t[0]=v=>s.previousPreset())}),createVNode(l,{class:"icon",onClick:t[1]||(t[1]=v=>s.nextPreset())})])],8,_hoisted_5$4),createBaseVNode("span",null,[createVNode(d,{class:"close icon",onClick:t[2]||(t[2]=v=>e.$emit("close"))})])])]),createBaseVNode("div",_hoisted_7$2,[createBaseVNode("div",_hoisted_8$2,[createBaseVNode("span",_hoisted_9$2,toDisplayString(i.contextClue),1),createVNode(u,{value:s.selectedAxes,"onUpdate:value":t[3]||(t[3]=v=>s.selectedAxes=v),trigger:"click",multiple:"",options:i.availableAxes},{default:withCtx(()=>[createBaseVNode("span",_hoisted_10$2,[createVNode(m,{class:"icon"}),_hoisted_11$2])]),_:1},8,["value","options"])]),s.device&&s.device.connected?(openBlock(),createElementBlock("div",_hoisted_12$2,[createBaseVNode("span",null,[createVNode(g,{id:"preview-on-device",modelValue:i.previewOnDevice,"onUpdate:modelValue":t[4]||(t[4]=v=>i.previewOnDevice=v)},null,8,["modelValue"]),_hoisted_13$2])])):(openBlock(),createElementBlock("div",_hoisted_14$1,_hoisted_16$1))])]),createBaseVNode("div",_hoisted_17$1,[createVNode($,{ref:"axisScroll","data-scroll":i.axisScrollTop,trigger:"none"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_18$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.axes,v=>(openBlock(),createElementBlock("div",{key:v.name,class:"tempest-motion-container"},[createVNode(S,{modelValue:v.parameters,"onUpdate:modelValue":T=>v.parameters=T,"display-name":v.label,angle:i.previewAngle,disabled:s.disabled,"scroll-element":i.axisScrollElement},null,8,["modelValue","onUpdate:modelValue","display-name","angle","disabled","scroll-element"])]))),128))])]),_:1},8,["data-scroll"])],512),createBaseVNode("div",_hoisted_19$1,[createBaseVNode("div",_hoisted_20$1,null,512),createBaseVNode("div",_hoisted_21$1,[createVNode(V,{modelValue:i.previewBpm,"onUpdate:modelValue":t[5]||(t[5]=v=>i.previewBpm=v),options:i.previewBpmOptions,disabled:s.disabled},null,8,["modelValue","options","disabled"]),createBaseVNode("div",{class:"label",disabled:s.disabled}," Preview BPM ",8,_hoisted_22$1)])]),createBaseVNode("div",_hoisted_23$1,[createBaseVNode("div",null,[_hoisted_24$1,createVNode(c,{show:s.strokeNameDuplicate,class:"error-tooltip"},{trigger:withCtx(()=>[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":t[6]||(t[6]=v=>i.strokeName=v),class:normalizeClass(["name",s.strokeNameDuplicate?"error":""])},null,2),[[vModelText,i.strokeName]])]),default:withCtx(()=>[_hoisted_25$1]),_:1},8,["show"]),createBaseVNode("button",{class:"ayva-button primary",disabled:!s.strokeNameValid,onClick:t[7]||(t[7]=(...v)=>s.save&&s.save(...v))},toDisplayString(s.saveText),9,_hoisted_26$1)])])],32)}var TempestStrokeEditor=_export_sfc(_sfc_main$5,[["render",_sfc_render$5],["__scopeId","data-v-49f611fc"]]),AyvaFreePlay_vue_vue_type_style_index_0_scoped_true_lang="";let previewAyva=null,previewEmulator=null;const customBehaviorStorage=new CustomBehaviorStorage,_sfc_main$4={components:{AyvaSlider,AyvaCheckbox,AyvaBpmSelect,AyvaScriptEditor,TempestStrokeEditor},inject:["globalAyva"],props:{currentStrokeName:{type:String,default:null},mode:{type:String,default:null}},emits:["update-parameters","update-strokes","select-stroke"],setup(){return{notify:useNotification()}},data(){return{twist:!1,bpmOptions:{range:{min:0,max:200},start:[20,60],padding:[10],step:1,format:formatter()},accelerationOptions:{range:{min:0,max:200},start:[0,20],step:1,format:formatter()},patternDurationOptions:{range:{min:0,max:30},start:[5,10],padding:[1],step:.1,format:formatter(1,"s")},transitionDurationOptions:{range:{min:0,max:30},start:[2,5],padding:[.5],step:.1,format:formatter(1,"s")},twistRangeOptions:{range:{min:0,max:1},start:[0,1],margin:.1},twistPhaseOptions:{range:{min:-4,max:4},start:[0]},twistEccOptions:{range:{min:-1,max:1},start:[0]},strokes:[],customBehaviorLibrary:{},previewElement:null,previewParent:null,showScriptEditor:!1,editScript:null,showStrokeEditor:!1,editStroke:null,bpmMode:"transition",settingsOptions:[{key:"create-stroke",label:"Create TempestStroke"},{key:"create-script",label:"Create AyvaScript"},{key:"import",label:"Import"},{key:"export",label:"Export"}],customStrokeActions:[{key:"edit",label:"Edit"},{key:"export",label:"Export"},{key:"delete",label:"Delete"}]}},computed:{disableTwist(){return this.twist?null:""},disableAcceleration(){return this.bpmMode!=="continuous"?"":null},selectAllStrokes:{get(){return this.strokes.reduce((e,t)=>e&&t.enabled,!0)},set(e){this.strokes.forEach(t=>{t.enabled=!!e})}}},watch:{twist:{immediate:!0,handler(e){this.fireUpdateParameter("twist",e)}},strokes:{immediate:!0,handler(){this.fireUpdateStrokes()}},selectAllStrokes(){this.fireUpdateStrokes()}},mounted(){this.$el.querySelectorAll(".free-play-container").forEach(e=>{makeCollapsible(e)}),this.previewElement=document.createElement("div"),this.previewElement.classList.add("preview-popup"),previewEmulator=new La(this.previewElement),window.addEventListener("resize",this.onResize),this.refreshStrokes(),this.onResize(),this.fireUpdateParameter("bpm-mode",this.bpmMode)},unmounted(){window.removeEventListener("resize",this.onResize)},methods:{refreshStrokes(){const e=this.strokes.reduce((i,s)=>(i[s.name]=s.enabled,i),{});this.customBehaviorLibrary=customBehaviorStorage.load();const t=(i,s=!1)=>Object.keys(i).sort().map(n=>{var a;return{name:n,custom:s,type:i[n].type||"tempest-stroke",enabled:(a=e[n])!=null?a:!0}}),o=TempestStroke.library,r=Object.keys(o).filter(i=>!this.customBehaviorLibrary[i]).reduce((i,s)=>(i[s]=o[s],i),{});this.strokes=[...t(this.customBehaviorLibrary,!0),...t(r)],this.onResize()},onResize(){nextTick(()=>{if(!this.$refs.strokesContainer.classList.contains("closed")){const e=this.$refs.tempestStrokeContainer.getBoundingClientRect().height;clampHeight(this.$refs.strokesContainer,200,e+50)}})},onUpdate(e,t){this.fireUpdateParameter(e,t)},onSettings(e){if(e==="create-stroke")this.openStrokeEditor();else if(e==="create-script")this.openScriptEditor();else if(e==="import"){const t=o=>{this.notify.warning({content:"Some strokes renamed due to conflicts:",meta:()=>h("div",o.map(r=>h("div",r)))})};customBehaviorStorage.import(t).then(()=>{this.refreshStrokes()}).catch(o=>{this.notify.error({content:"Error importing stroke:",meta:o.message})})}else e==="export"&&customBehaviorStorage.export()},onCustomStrokeAction(e,t){t==="delete"?(customBehaviorStorage.delete(e.name),this.refreshStrokes()):t==="edit"&&e.type==="tempest-stroke"?this.openStrokeEditor(e.name):t==="edit"&&e.type==="ayvascript"?this.openScriptEditor(e.name):t==="export"&&customBehaviorStorage.exportOne(e.name)},openScriptEditor(e=null){this.editScript=e,this.showScriptEditor=!0,this.animateEditorResize(1e3)},openStrokeEditor(e=null){this.editStroke=e,this.showStrokeEditor=!0,this.animateEditorResize(1e3)},animateEditorResize(e,t){if(window.dispatchEvent(new Event("resize")),!t)requestAnimationFrame(this.animateEditorResize.bind(this,e,performance.now()));else{const o=performance.now()-t,r=e-o;r>0&&requestAnimationFrame(this.animateEditorResize.bind(this,r,performance.now()))}},fireUpdateStrokes(){const e=this.strokes.filter(t=>t.enabled).map(t=>t.name);this.$emit("update-strokes",e)},fireUpdateParameter(e,t){this.$emit("update-parameters",{name:e,value:t})},fireSelectStroke(e){this.$emit("select-stroke",e)},previewStroke(e,t){this.destroyPreview(),t&&setTimeout(()=>{const o=TempestStroke.library[e],r=o?{name:e,type:"tempest-stroke",data:o}:this.customBehaviorLibrary[e];if(r.type!=="tempest-stroke")return;this.previewParent=document.querySelector(`[data-preview-stroke="${e}"]`),this.previewParent.appendChild(this.previewElement),this.previewParent.closest(".v-binder-follower-content").classList.add("preview-popup-container"),previewAyva=this.createPreviewAyva(),previewAyva.addOutput(previewEmulator);const s=Object.keys(previewAyva.axes).reduce((n,a)=>{const l=previewAyva.axes[a];return n[l.name]=l,n},{});Object.entries(s).forEach(([n])=>{previewAyva.$[n].value=.5}),previewAyva.do(new TempestStroke(r.data))},100)},createPreviewAyva(){const e=createAyva();return Object.keys(e.axes).forEach(t=>{e.updateLimits(t,this.globalAyva.$[t].min,this.globalAyva.$[t].max)}),e},destroyPreview(){previewAyva&&(previewAyva.stop(),previewAyva=null),this.previewParent&&(this.previewParent.removeChild(this.previewElement),this.previewParent=null)}}},_withScopeId$1=e=>(pushScopeId("data-v-7d27cf8c"),e=e(),popScopeId(),e),_hoisted_1$g={class:"free-play"},_hoisted_2$g={class:"free-play-container lil-gui root"},_hoisted_3$f={class:"title"},_hoisted_4$3=_withScopeId$1(()=>createBaseVNode("span",null,"Parameters",-1)),_hoisted_5$3=_withScopeId$1(()=>createBaseVNode("a",{href:"https://ayvajs.github.io/ayvajs-docs/tutorial-ayva-stroker-lite.html",target:"_blank"},"Help",-1)),_hoisted_6$2=[_hoisted_5$3],_hoisted_7$1={class:"limits lil-gui children"},_hoisted_8$1={class:"limit"},_hoisted_9$1=_withScopeId$1(()=>createBaseVNode("div",{class:"axis"}," Change BPM ",-1)),_hoisted_10$1={class:"limit"},_hoisted_11$1=_withScopeId$1(()=>createBaseVNode("div",{class:"axis"}," BPM Range ",-1)),_hoisted_12$1={class:"limit"},_hoisted_13$1=["disabled"],_hoisted_14={class:"limit"},_hoisted_15=_withScopeId$1(()=>createBaseVNode("div",{class:"axis"}," Pattern Duration ",-1)),_hoisted_16={class:"limit"},_hoisted_17=_withScopeId$1(()=>createBaseVNode("div",{class:"axis"}," Transition Duration ",-1)),_hoisted_18={class:"limit twist"},_hoisted_19=_withScopeId$1(()=>createBaseVNode("div",{class:"axis"}," Default Twist ",-1)),_hoisted_20={class:"limit"},_hoisted_21=["disabled"],_hoisted_22={class:"limit"},_hoisted_23=["disabled"],_hoisted_24={class:"limit"},_hoisted_25=["disabled"],_hoisted_26={ref:"strokesContainer",class:"free-play-container lil-gui root"},_hoisted_27={class:"title"},_hoisted_28=_withScopeId$1(()=>createBaseVNode("span",null,"Strokes",-1)),_hoisted_29={class:"current-stroke-container"},_hoisted_30=_withScopeId$1(()=>createBaseVNode("span",{class:"label"},"Playing:",-1)),_hoisted_31={class:"current-stroke"},_hoisted_32={class:"limits lil-gui children",style:{"padding-top":"0"}},_hoisted_33={ref:"tempestStrokeContainer",class:"tempest-stroke-container"},_hoisted_34={class:"tempest-stroke"},_hoisted_35={class:"checkbox"},_hoisted_36=_withScopeId$1(()=>createBaseVNode("div",null,[createBaseVNode("div",{class:"info"}," Select or manually trigger a stroke. ")],-1)),_hoisted_37=_withScopeId$1(()=>createBaseVNode("div",{class:"stroke-actions"},null,-1)),_hoisted_38={class:"checkbox"},_hoisted_39=["title","onClick"],_hoisted_40={class:"stroke-actions"},_hoisted_41=["data-preview-stroke"],_hoisted_42={class:"lil-gui"},_hoisted_43={class:"lil-gui"};function _sfc_render$4(e,t,o,r,i,s){const n=resolveComponent("ayva-bpm-select"),a=resolveComponent("ayva-slider"),l=resolveComponent("ayva-checkbox"),d=resolveComponent("settings-icon"),m=resolveComponent("n-dropdown"),u=resolveComponent("eye-icon"),g=resolveComponent("n-popover"),S=resolveComponent("tempest-stroke-editor"),$=resolveComponent("n-modal"),V=resolveComponent("ayva-script-editor");return openBlock(),createElementBlock("div",_hoisted_1$g,[createBaseVNode("div",_hoisted_2$g,[createBaseVNode("div",_hoisted_3$f,[_hoisted_4$3,createBaseVNode("span",{class:"guide",onClick:t[0]||(t[0]=withModifiers(()=>{},["stop"]))},_hoisted_6$2)]),createBaseVNode("div",_hoisted_7$1,[createBaseVNode("div",_hoisted_8$1,[_hoisted_9$1,createVNode(n,{modelValue:i.bpmMode,"onUpdate:modelValue":t[1]||(t[1]=c=>i.bpmMode=c),"storage-key":"free-play-bpm-mode",onChange:t[2]||(t[2]=c=>s.onUpdate("bpm-mode",c))},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_10$1,[_hoisted_11$1,createVNode(a,{options:i.bpmOptions,"storage-key":"free-play-bpm",onUpdate:t[3]||(t[3]=c=>s.onUpdate("bpm",c))},null,8,["options"])]),createBaseVNode("div",_hoisted_12$1,[createBaseVNode("div",{class:"axis",disabled:s.disableAcceleration}," Acceleration (bpm/s) ",8,_hoisted_13$1),createVNode(a,{options:i.accelerationOptions,disabled:s.disableAcceleration,"storage-key":"free-play-acceleration",onUpdate:t[4]||(t[4]=c=>s.onUpdate("acceleration",c))},null,8,["options","disabled"])]),createBaseVNode("div",_hoisted_14,[_hoisted_15,createVNode(a,{options:i.patternDurationOptions,"storage-key":"free-play-pattern-duration",onUpdate:t[5]||(t[5]=c=>s.onUpdate("pattern-duration",c))},null,8,["options"])]),createBaseVNode("div",_hoisted_16,[_hoisted_17,createVNode(a,{options:i.transitionDurationOptions,"storage-key":"free-play-transition-duration",onUpdate:t[6]||(t[6]=c=>s.onUpdate("transition-duration",c))},null,8,["options"])]),createBaseVNode("div",_hoisted_18,[_hoisted_19,createBaseVNode("div",null,[createVNode(l,{modelValue:i.twist,"onUpdate:modelValue":t[7]||(t[7]=c=>i.twist=c),"storage-key":"free-play-enable-twist"},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_20,[createBaseVNode("div",{class:"axis",disabled:s.disableTwist}," Twist Range ",8,_hoisted_21),createVNode(a,{options:i.twistRangeOptions,disabled:s.disableTwist,"storage-key":"free-play-twist-range",onUpdate:t[8]||(t[8]=c=>s.onUpdate("twist-range",c))},null,8,["options","disabled"])]),createBaseVNode("div",_hoisted_22,[createBaseVNode("div",{class:"axis",disabled:s.disableTwist}," Twist Phase ",8,_hoisted_23),createVNode(a,{options:i.twistPhaseOptions,disabled:s.disableTwist,"storage-key":"free-play-twist-phase",onUpdate:t[9]||(t[9]=c=>s.onUpdate("twist-phase",c))},null,8,["options","disabled"])]),createBaseVNode("div",_hoisted_24,[createBaseVNode("div",{class:"axis",disabled:s.disableTwist}," Twist Eccentricity ",8,_hoisted_25),createVNode(a,{options:i.twistEccOptions,disabled:s.disableTwist,"storage-key":"free-play-twist-ecc",onUpdate:t[10]||(t[10]=c=>s.onUpdate("twist-ecc",c))},null,8,["options","disabled"])])])]),createBaseVNode("div",_hoisted_26,[createBaseVNode("div",_hoisted_27,[_hoisted_28,withDirectives(createBaseVNode("span",_hoisted_29,[_hoisted_30,createBaseVNode("span",_hoisted_31,toDisplayString(o.currentStrokeName),1)],512),[[vShow,o.currentStrokeName!=="None"]]),withDirectives(createBaseVNode("span",{class:"settings-container",onClick:t[12]||(t[12]=withModifiers(()=>{},["stop"]))},[createVNode(m,{placement:"bottom-start",trigger:"click",size:"small",options:i.settingsOptions,disabled:o.mode!=="Stopped",onSelect:s.onSettings},{default:withCtx(()=>[createVNode(d,{disabled:o.mode!=="Stopped"?"":null,class:"settings icon",onClick:t[11]||(t[11]=withModifiers(()=>{},["stop"]))},null,8,["disabled"])]),_:1},8,["options","disabled","onSelect"])],512),[[vShow,o.currentStrokeName==="None"]])]),createBaseVNode("div",_hoisted_32,[createBaseVNode("div",_hoisted_33,[createBaseVNode("div",_hoisted_34,[createBaseVNode("div",_hoisted_35,[createVNode(l,{modelValue:s.selectAllStrokes,"onUpdate:modelValue":t[13]||(t[13]=c=>s.selectAllStrokes=c)},null,8,["modelValue"])]),_hoisted_36,_hoisted_37]),(openBlock(!0),createElementBlock(Fragment,null,renderList(i.strokes,c=>(openBlock(),createElementBlock("div",{key:c.name,class:"tempest-stroke"},[createBaseVNode("div",_hoisted_38,[createVNode(l,{modelValue:c.enabled,"onUpdate:modelValue":v=>c.enabled=v,"storage-key":`free-play-pattern-${c.name}`,onChange:s.fireUpdateStrokes},null,8,["modelValue","onUpdate:modelValue","storage-key","onChange"])]),createBaseVNode("div",null,[createBaseVNode("button",{title:c.name,onClick:v=>s.fireSelectStroke(c.name)},toDisplayString(c.name),9,_hoisted_39)]),createBaseVNode("div",_hoisted_40,[createVNode(g,{trigger:"hover",raw:"","show-arrow":!1,delay:250,"onUpdate:show":v=>s.previewStroke(c.name,v)},{trigger:withCtx(()=>[createVNode(u,{class:"preview icon",disabled:c.type!=="tempest-stroke"?"":void 0},null,8,["disabled"])]),default:withCtx(()=>[createBaseVNode("div",{"data-preview-stroke":c.name},null,8,_hoisted_41)]),_:2},1032,["onUpdate:show"]),createVNode(m,{placement:"bottom-start",trigger:"click",size:"small",options:i.customStrokeActions,disabled:o.mode!=="Stopped",onSelect:v=>s.onCustomStrokeAction(c,v)},{default:withCtx(()=>[withDirectives(createVNode(d,{class:"settings icon",disabled:o.mode!=="Stopped"?"":null},null,8,["disabled"]),[[vShow,c.custom]])]),_:2},1032,["options","disabled","onSelect"])])]))),128))],512)])],512),createVNode($,{show:i.showStrokeEditor,"auto-focus":!1},{default:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("div",_hoisted_42,[createVNode(S,{ref:"strokeEditor","edit-stroke":i.editStroke,onClose:t[14]||(t[14]=c=>i.showStrokeEditor=!1),onSave:s.refreshStrokes},null,8,["edit-stroke","onSave"])])])]),_:1},8,["show"]),createVNode($,{show:i.showScriptEditor,"auto-focus":!1},{default:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("div",_hoisted_43,[createVNode(V,{ref:"strokeEditor","edit-script":i.editScript,onClose:t[15]||(t[15]=c=>i.showScriptEditor=!1),onSave:s.refreshStrokes},null,8,["edit-script","onSave"])])])]),_:1},8,["show"])])}var AyvaFreePlay=_export_sfc(_sfc_main$4,[["render",_sfc_render$4],["__scopeId","data-v-7d27cf8c"]]);const _sfc_main$3={props:{mode:{type:String,default:""}},computed:{modeClass(){return`${this.mode.toLowerCase().replaceAll(/\s+/g,"-")}-mode`}}},_hoisted_1$f={class:"mode-container lil-gui"},_hoisted_2$f=createBaseVNode("span",null,"Mode:",-1);function _sfc_render$3(e,t,o,r,i,s){return openBlock(),createElementBlock("div",_hoisted_1$f,[_hoisted_2$f,createBaseVNode("span",{class:normalizeClass(["mode",s.modeClass])},toDisplayString(o.mode),3)])}var AyvaMode=_export_sfc(_sfc_main$3,[["render",_sfc_render$3]]);const STATE={TRANSITION_MANUAL:0,TRANSITION_FREE_PLAY:1,STROKING:2},scriptGlobals={};var P,w,M,B,C,N,G,he,W,pe,L,re,J,ue,D,ne,E,K,I,ae,j,le,z,ce,Y,_e,Z,me,Q,ve,X,fe,ee,ge,te,ye,oe,be;class Controller extends GeneratorBehavior{constructor(){super();y(this,G);y(this,W);y(this,L);y(this,J);y(this,D);y(this,E);y(this,I);y(this,j);y(this,z);y(this,Y);y(this,Z);y(this,Q);y(this,X);y(this,ee);y(this,te);y(this,oe);y(this,P,new CustomBehaviorStorage);y(this,w,null);y(this,M,null);y(this,B,!1);y(this,C,null);y(this,N,void 0);createConstantProperty(this,"bpmSliderState",{active:!1,updated:!1,value:null}),Object.keys(scriptGlobals).forEach(o=>{delete scriptGlobals[o]})}*generate(o){switch(b(this,G,he).call(this,o)){case STATE.TRANSITION_MANUAL:yield*b(this,L,re).call(this,o,f(this,M)),b(this,W,pe).call(this);break;case STATE.TRANSITION_FREE_PLAY:yield*b(this,L,re).call(this,o,b(this,te,ye).call(this));break;case STATE.STROKING:f(this,w)instanceof TempestStroke?yield*f(this,w):yield f(this,w).next();break;default:yield .1}}startManualMode(o){k(this,M,o)}startFreePlayMode(){k(this,B,!0),b(this,E,K).call(this)&&(f(this,w).complete=!0)}resetTimer(){if(f(this,B)){const[o,r]=this.parameters["pattern-duration"];o===r?k(this,C,new VariableDuration(o)):k(this,C,new VariableDuration(o,r))}}}P=new WeakMap,w=new WeakMap,M=new WeakMap,B=new WeakMap,C=new WeakMap,N=new WeakMap,G=new WeakSet,he=function(o){return f(this,M)?STATE.TRANSITION_MANUAL:f(this,B)&&b(this,Y,_e).call(this)?STATE.TRANSITION_FREE_PLAY:!f(this,B)&&b(this,D,ne).call(this)?(o.stop(),null):f(this,w)?STATE.STROKING:null},W=new WeakSet,pe=function(){k(this,M,null),k(this,C,null),k(this,B,!1)},L=new WeakSet,re=function*(o,r){var s;const i=f(this,P).load();((s=i[r])==null?void 0:s.type)==="ayvascript"?(k(this,w,b(this,oe,be).call(this,i[r].data.script).bind(o)),f(this,w).on("error",n=>this.$emit("script-error",r,n)),this.$emit("update-current-behavior",r),this.$emit("toggle-bpm-enabled",!1),this.resetTimer()):yield*b(this,J,ue).call(this,o,r)},J=new WeakSet,ue=function*(o,r){k(this,N,b(this,Q,ve).call(this));const i=b(this,ee,ge).call(this);if(f(this,w)instanceof TempestStroke||scriptGlobals.output instanceof TempestStroke){const s=f(this,w)instanceof TempestStroke?f(this,w):scriptGlobals.output,n=b(this,Z,me).call(this);k(this,w,s.transition(b(this,z,ce).call(this,r),i,n,b(this,I,ae).bind(this),(a,l)=>{b(this,j,le).call(this,r,l)})),scriptGlobals.output=null,yield*f(this,w)}else k(this,w,new TempestStroke(b(this,z,ce).call(this,r),i).bind(o)),b(this,I,ae).call(this,1,f(this,w).bpm),yield*f(this,w).start({duration:1,value:Ayva.RAMP_PARABOLIC}),b(this,j,le).call(this,r,f(this,w).bpm)},D=new WeakSet,ne=function(){return b(this,E,K).call(this)&&f(this,w).complete},E=new WeakSet,K=function(){return f(this,w)instanceof ScriptRunner},I=new WeakSet,ae=function(o,r){this.$emit("transition-start",o,r)},j=new WeakSet,le=function(o,r){this.$emit("transition-end",o,r),this.resetTimer()},z=new WeakSet,ce=function(o){var r;if(typeof o=="string"){const s=((r=f(this,P).load()[o])==null?void 0:r.data)||TempestStroke.library[o],n=s.twist||s.R0,a=!n||n.from===.5&&n.to===.5;if(this.parameters.twist&&a){const[l,d]=this.parameters["twist-range"],m=this.parameters["twist-phase"],u=this.parameters["twist-ecc"];s.R0={from:l,to:d,phase:m,ecc:u}}return s}return o},Y=new WeakSet,_e=function(){return(!f(this,C)||f(this,C).complete)&&this.strokes.length&&!this.bpmSliderState.active&&!b(this,E,K).call(this)||b(this,D,ne).call(this)},Z=new WeakSet,me=function(){const[o,r]=this.parameters["transition-duration"];return Ayva.map(Math.random(),0,1,o,r)},Q=new WeakSet,ve=function(){const[o,r]=this.parameters.bpm;return Math.floor(Ayva.map(Math.random(),0,1,o,r))},X=new WeakSet,fe=function(o){const[r,i]=this.parameters.bpm,[s,n]=this.parameters.acceleration,a=Ayva.map(Math.random(),0,1,s,n);return clamp(o+(Math.random()<.5?a:-a),r,i)},ee=new WeakSet,ge=function(){const o=()=>{if((!f(this,B)||this.bpmSliderState.active||this.bpmSliderState.updated)&&(k(this,N,this.bpmSliderState.value),this.bpmSliderState.updated=!1),this.parameters["bpm-mode"]==="continuous")if(!this.bpmSliderState.active&&o.initialized){const{startBpm:r,endBpm:i,startTime:s,endTime:n}=o,a=performance.now();a>=n?(k(this,N,i),o.startTime=performance.now(),o.endTime=o.startTime+1e3,o.startBpm=i,o.endBpm=b(this,X,fe).call(this,i)):k(this,N,Ayva.map(a,s,n,r,i)),this.$emit("update-bpm",f(this,N))}else o.startTime=0,o.endTime=0,o.startBpm=f(this,N),o.endBpm=f(this,N),o.initialized=!0;return f(this,N)};return o},te=new WeakSet,ye=function(){return this.strokes[Math.floor(Math.random()*this.strokes.length)]},oe=new WeakSet,be=function(o){const r=Object.keys(this.parameters).reduce((i,s)=>(Object.defineProperty(i,_.camelCase(s),{enumerable:!0,get:()=>this.parameters[s]}),i),{});return f(this,w)instanceof TempestStroke?scriptGlobals.input=f(this,w):f(this,w)instanceof ScriptRunner?scriptGlobals.input=scriptGlobals.output:scriptGlobals.input=null,scriptGlobals.output=null,scriptGlobals.parameters=r,Object.defineProperty(scriptGlobals,"mode",{configurable:!0,enumerable:!0,get:()=>f(this,B)?"freePlay":"manual"}),new ScriptRunner(o,{GLOBALS:scriptGlobals})};Object.assign(Controller.prototype,eventMixin);const fileOptions={types:[{description:"Ayva Stroker Lite Settings",accept:{"application/json":[".json"]}}],excludeAcceptAllOption:!0,multiple:!1,suggestedName:"ayva-stroker-settings.json"};var settingsStorage={async export(){let e;try{e=await window.showSaveFilePicker(fileOptions)}catch{return!1}const t=await e.createWritable();return await t.write(JSON.stringify(localStorage,null,2)),await t.close(),!0},async import(){let e;try{[e]=await window.showOpenFilePicker(fileOptions)}catch{return!1}const t=await e.getFile(),o=JSON.parse(await t.text());return localStorage.clear(),Object.entries(o).forEach(([r,i])=>localStorage.setItem(r,i)),!0}},AyvaReleaseNotes_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$2={emits:["close"],data(){return{settingsStorage}}},_withScopeId=e=>(pushScopeId("data-v-7005fd7e"),e=e(),popScopeId(),e),_hoisted_1$e={class:"header","hover-info":""},_hoisted_2$e={class:"toolbar"},_hoisted_3$e=_withScopeId(()=>createBaseVNode("span",{class:"toolbar-left"},[createBaseVNode("span",null,"Release Notes (1.42.0)")],-1)),_hoisted_4$2={class:"toolbar-right"},_hoisted_5$2=createStaticVNode('<div class="body" data-v-7005fd7e><div class="release-notes" data-v-7005fd7e><h2 data-v-7005fd7e>New Features</h2><ul style="margin-left:20px;margin-top:10px;" class="light-gray" data-v-7005fd7e><li data-v-7005fd7e>25 new stroke patterns.</li><li data-v-7005fd7e>Allow WebSocket output.</li><li data-v-7005fd7e> Create custom <a href="https://ayvajs.github.io/ayvajs-docs/tutorial-ayva-stroker-lite.html#ayvascripts" style="color:var(--ayva-text-color-blue);font-weight:bold;text-decoration:none;" target="_blank" data-v-7005fd7e>AyvaScripts</a>. </li><li data-v-7005fd7e>Import and export all site settings.</li><li data-v-7005fd7e>Maximum BPM increased to 200.</li><li data-v-7005fd7e>Minimum transition time decreased to 0.5 seconds.</li><li data-v-7005fd7e>Improved BPM performance (perfect timing).</li><li data-v-7005fd7e>Allow console output (for debugging).</li></ul></div><div class="release-notes light-gray" data-v-7005fd7e> View the updated guide <a style="color:var(--ayva-text-color-blue);" href="https://ayvajs.github.io/ayvajs-docs/tutorial-ayva-stroker-lite.html" target="_blank" data-v-7005fd7e>here.</a></div><div class="release-notes light-gray" data-v-7005fd7e><i data-v-7005fd7e>Note: Import, export, and these release notes can be accessed from the settings menu in the lower left corner of the app.</i></div></div>',1);function _sfc_render$2(e,t,o,r,i,s){const n=resolveComponent("close-icon");return openBlock(),createElementBlock("div",{class:"modal-body",onMouseover:t[1]||(t[1]=(...a)=>e.onHover&&e.onHover(...a))},[createBaseVNode("div",_hoisted_1$e,[createBaseVNode("div",_hoisted_2$e,[_hoisted_3$e,createBaseVNode("span",_hoisted_4$2,[createBaseVNode("span",null,[createVNode(n,{class:"close icon",onClick:t[0]||(t[0]=a=>e.$emit("close"))})])])])]),_hoisted_5$2],32)}var AyvaReleaseNotes=_export_sfc(_sfc_main$2,[["render",_sfc_render$2],["__scopeId","data-v-7005fd7e"]]);class WebSocketDevice{constructor(t,o,r=()=>{}){A(this,"connected",!1);A(this,"_host",null);A(this,"_port",null);A(this,"_socket",null);this._host=t,this._port=o,this._errorHandler=r}async requestConnection(){let t=!1;return new Promise((o,r)=>{const i=this._host==="localhost"?"ws":"wss",s=new WebSocket(`${i}://${this._host}:${this._port}/ws`);s.onopen=()=>{o(),t=!0,this.connected=!0},s.onclose=()=>{this.connected=!1},s.onerror=()=>{this._errorHandler(),this.connected=!1,t||r(new Error(`Unable to establish connection to host ${this._host} on port ${this._port}.`))},this._socket=s})}async disconnect(){this._socket.close()}write(t){if(this.connected)this._socket.send(t);else throw new Error("No device connected.")}}class ConsoleDevice{constructor(){A(this,"connected",!1)}async requestConnection(){this.connected=!0}async disconnect(){this.connected=!1}write(t){if(this.connected)console.log(t);else throw new Error("Not connected.")}}var main_css_vue_type_style_index_0_src_5370b8bc_lang="";const ayva=createAyva();let controller,emulator;const _sfc_main$1={components:{AyvaOutput,AyvaFreePlay,AyvaMode,AyvaSlider,AyvaReleaseNotes},provide(){return{globalAyva:ayva,globalDevice:computed(()=>this.device),globalParameters:computed(()=>this.parameters),globalEvents:computed(()=>this.events)}},inject:{spinner:{from:"globalSpinner"}},props:[],setup(){return{notify:useNotification()}},data(){return{stopped:!0,disconnectInterval:null,mode:"Stopped",strokes:[],parameters:{},bpmSliderActive:!1,currentBpm:60,currentStrokeName:"None",bpmDisabled:!1,bpmAnimationFrame:null,bpmSliderOptions:{start:[60],tooltips:!0,behaviour:"snap",connect:!0,padding:[10],step:1,range:{min:0,max:200},format:formatter()},device:new WebSerialDevice,showHud:!0,showReleaseNotes:!1,events:x({},eventMixin),settingsDropdownOptions:[{key:"release",label:"Release Notes"},{key:"import",label:"Import Settings"},{key:"export",label:"Export Settings"}],globalSettings:new Storage("global-settings")}},computed:{hudStyle(){return this.showHud?"":"visibility: hidden !important"}},watch:{"device.connected"(e){if(e)for(const t in ayva.$)ayva.$[t].value=ayva.$[t].defaultValue;else ayva.removeOutput(this.device),ayva.stop()}},beforeCreate(){new CustomBehaviorStorage().migrateLegacyStrokes();const e=ayva.stop.bind(ayva);ayva.stop=()=>{e(),this.onAyvaStop()}},mounted(){var t;emulator=new La(this.$refs.emulator),ayva.addOutput(emulator),["bpmSliderActive","currentBpm","strokes","parameters"].forEach(o=>this.$watch(o,()=>this.updateController(),{immediate:!0,deep:!0})),window.addEventListener("keyup",o=>{o.key==="Escape"&&ayva.stop()}),this.events.on("refresh-output-settings",()=>{this.refreshOutputSettings()}),this.refreshOutputSettings(),this.showReleaseNotes=(t=this.globalSettings.load("show-release-notes"))!=null?t:!0},methods:{onChange(){controller&&(controller.bpmSliderState.updated=!0)},onSelectSettings(e){e==="export"?settingsStorage.export():e==="import"?settingsStorage.import().then(t=>{t&&(new CustomBehaviorStorage().migrateLegacyStrokes(),this.spinner.show(new Promise(()=>{})),window.location.reload())}):e==="release"&&(this.showReleaseNotes=!0)},onCloseReleaseNotes(){this.showReleaseNotes=!1,this.globalSettings.save("show-release-notes",!1)},onClickEmulator(){triggerMouseEvent(this.$refs.emulator,"mousedown"),triggerMouseEvent(this.$refs.emulator,"mouseup")},updateLimits(e){ayva.updateLimits(e.name,e.limits.min,e.limits.max)},updateParameters(e){this.parameters[e.name]=e.value},updateStrokes(e){this.strokes=e},updateController(){controller&&(controller.strokes=this.strokes,controller.parameters=this.parameters,controller.bpmSliderState.active=this.bpmSliderActive,controller.bpmSliderState.value=this.currentBpm)},selectStroke(e){this.startController(),controller.startManualMode(e),this.mode="Manual"},freePlay(){this.startController(),controller.startFreePlayMode(),this.mode="Free Play"},getBpm(){return Number(this.$refs.bpmSlider.get())},setBpm(e){this.$refs.bpmSlider.set(e)},createBpmAnimation(e,t){const o=performance.now(),r=o+e*1e3,i=this.getBpm(),s=()=>{const n=Math.round(Ayva.map(performance.now(),o,r,i,t));this.setBpm(n),this.bpmAnimationFrame=requestAnimationFrame(s)};this.bpmAnimationFrame=requestAnimationFrame(s)},clearBpmAnimation(){cancelAnimationFrame(this.bpmAnimationFrame)},startController(){controller||(controller=new Controller,controller.on("transition-start",(e,t)=>{this.createBpmAnimation(e,t),this.currentStrokeName="Transitioning...",this.bpmDisabled=!0}),controller.on("transition-end",(e,t)=>{this.currentStrokeName=typeof e=="string"?e:"Custom",this.bpmDisabled=!1,this.clearBpmAnimation(),t&&this.setBpm(t)}),controller.on("update-bpm",e=>{this.setBpm(e)}),controller.on("update-current-behavior",e=>{this.currentStrokeName=e}),controller.on("toggle-bpm-enabled",e=>{this.bpmDisabled=!e}),controller.on("script-error",(e,t)=>{ayva.stop(),this.notify.error({content:`Exception occurred while running script ${e}:`,meta:t.message})}),this.updateController(),ayva.do(controller))},home(){ayva.stop(),ayva.home()},onStop(){ayva.stop()},onAyvaStop(){controller=null,this.mode="Stopped",this.currentStrokeName="None",this.bpmDisabled=!1,this.clearBpmAnimation()},requestConnection(){const e=this.device.requestConnection().then(()=>{ayva.addOutput(this.device)}).catch(t=>{t instanceof DOMException?console.warn(t):this.notify.error({content:t.message})});this.spinner.show(e)},disconnect(){ayva.removeOutput(this.device),this.device.disconnect()},refreshOutputSettings(){const e=new Storage("output-settings"),t=e.load("host")||"localhost",o=Number(e.load("port")||80),r=Number(e.load("frequency")||50),i=e.load("connectionType")||"serial";ayva.frequency=r,i==="websocket"?this.device=new WebSocketDevice(t,o):i==="console"?this.device=new ConsoleDevice:this.device=new WebSerialDevice}}},_hoisted_1$d={id:"main",class:"lil-gui"},_hoisted_2$d={class:"actions"},_hoisted_3$d=["disabled"],_hoisted_4$1=["disabled"],_hoisted_5$1=createBaseVNode("div",{class:"faux-bpm-track"},null,-1),_hoisted_6$1=["disabled"],_hoisted_7=createBaseVNode("span",null,"Current BPM",-1),_hoisted_8=[_hoisted_7],_hoisted_9={class:"lil-gui"},_hoisted_10={ref:"logo"},_hoisted_11=createTextVNode("Ayva Stroker "),_hoisted_12=createBaseVNode("span",{class:"ayva"},"Lite",-1),_hoisted_13=[_hoisted_11,_hoisted_12];function _sfc_render$1(e,t,o,r,i,s){const n=resolveComponent("ayva-output"),a=resolveComponent("ayva-free-play"),l=resolveComponent("ayva-mode"),d=resolveComponent("hud-on-icon"),m=resolveComponent("hud-off-icon"),u=resolveComponent("ayva-slider"),g=resolveComponent("ayva-release-notes"),S=resolveComponent("n-modal"),$=resolveComponent("settings-icon"),V=resolveComponent("n-dropdown");return openBlock(),createElementBlock(Fragment,null,[createVNode(n,{style:normalizeStyle(s.hudStyle),mode:i.mode,onUpdateLimits:s.updateLimits,onRequestConnection:s.requestConnection,onDisconnect:s.disconnect},null,8,["style","mode","onUpdateLimits","onRequestConnection","onDisconnect"]),createVNode(a,{mode:i.mode,"current-stroke-name":i.currentStrokeName,style:normalizeStyle(s.hudStyle),onUpdateParameters:s.updateParameters,onUpdateStrokes:s.updateStrokes,onSelectStroke:s.selectStroke},null,8,["mode","current-stroke-name","style","onUpdateParameters","onUpdateStrokes","onSelectStroke"]),createVNode(l,{mode:i.mode},null,8,["mode"]),createBaseVNode("div",_hoisted_1$d,[createBaseVNode("div",{id:"emulator",ref:"emulator",onClick:t[0]||(t[0]=(...c)=>s.onClickEmulator&&s.onClickEmulator(...c))},null,512),createBaseVNode("div",_hoisted_2$d,[createBaseVNode("div",{class:"hud-button",onClick:t[1]||(t[1]=c=>i.showHud=!i.showHud)},[withDirectives(createVNode(d,null,null,512),[[vShow,i.showHud]]),withDirectives(createVNode(m,null,null,512),[[vShow,!i.showHud]])]),createBaseVNode("button",{id:"home",onClick:t[2]||(t[2]=c=>s.home())}," Home Device "),createBaseVNode("button",{id:"start-free-play",disabled:i.mode==="Free Play"||!i.strokes.length,onClick:t[3]||(t[3]=c=>s.freePlay())}," Free Play ",8,_hoisted_3$d),createBaseVNode("button",{id:"stop",disabled:i.mode==="Stopped",onClick:t[4]||(t[4]=(...c)=>s.onStop&&s.onStop(...c))}," Stop (Esc) ",8,_hoisted_4$1)]),createBaseVNode("div",{id:"current-bpm",style:normalizeStyle(s.hudStyle)},[_hoisted_5$1,createVNode(u,{ref:"bpmSlider",options:i.bpmSliderOptions,disabled:i.bpmDisabled?"":null,onUpdate:t[5]||(t[5]=c=>i.currentBpm=c),onStart:t[6]||(t[6]=c=>i.bpmSliderActive=!0),onEnd:t[7]||(t[7]=c=>i.bpmSliderActive=!1),onChange:s.onChange},null,8,["options","disabled","onChange"]),createBaseVNode("div",{class:"label",disabled:i.bpmDisabled?"":null},_hoisted_8,8,_hoisted_6$1)],4),createVNode(S,{show:i.showReleaseNotes,"auto-focus":!1},{default:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("div",_hoisted_9,[createVNode(g,{ref:"strokeEditor",onClose:s.onCloseReleaseNotes},null,8,["onClose"])])])]),_:1},8,["show"]),createBaseVNode("div",{class:"logo",style:normalizeStyle(s.hudStyle)},[createBaseVNode("span",null,[createVNode(V,{ref:"appSettingsDropdown",placement:"bottom-start",trigger:"click",size:"small",options:i.settingsDropdownOptions,disabled:i.mode!=="Stopped",onSelect:s.onSelectSettings},{default:withCtx(()=>[createVNode($,{class:"app-settings",disabled:i.mode!=="Stopped"?"":null},null,8,["disabled"])]),_:1},8,["options","disabled","onSelect"])]),createBaseVNode("span",_hoisted_10,_hoisted_13,512)],4)])],64)}var App=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]);const _sfc_main={components:{App},provide(){return{globalSpinner:computed(()=>this.spinner)}},data(){return{showSpinner:!1,spinner:{show:e=>(this.showSpinner=!0,e.finally(()=>this.showSpinner=!1))}}}};function _sfc_render(e,t,o,r,i,s){const n=resolveComponent("App"),a=resolveComponent("n-spin"),l=resolveComponent("n-notification-provider");return openBlock(),createBlock(l,{placement:"bottom-right"},{default:withCtx(()=>[createVNode(a,{show:i.showSpinner,class:"app-spinner"},{default:withCtx(()=>[createVNode(n)]),_:1},8,["show"])]),_:1})}var Main=_export_sfc(_sfc_main,[["render",_sfc_render]]);const _hoisted_1$c={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},_hoisted_2$c=createBaseVNode("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 128h80M64 128h240M368 384h80M64 384h240M208 256h240M64 256h80"},null,-1),_hoisted_3$c=createBaseVNode("circle",{cx:"336",cy:"128",r:"32",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),_hoisted_4=createBaseVNode("circle",{cx:"176",cy:"256",r:"32",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),_hoisted_5=createBaseVNode("circle",{cx:"336",cy:"384",r:"32",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),_hoisted_6=[_hoisted_2$c,_hoisted_3$c,_hoisted_4,_hoisted_5];function render$c(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$c,_hoisted_6)}var axis={render:render$c},__glob_0_0=Object.freeze(Object.defineProperty({__proto__:null,render:render$c,default:axis},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$b={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},_hoisted_2$b=createBaseVNode("path",{d:"M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z",fill:"currentColor"},null,-1),_hoisted_3$b=[_hoisted_2$b];function render$b(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$b,_hoisted_3$b)}var chevronDropdown={render:render$b},__glob_0_1=Object.freeze(Object.defineProperty({__proto__:null,render:render$b,default:chevronDropdown},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$a={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},_hoisted_2$a=createBaseVNode("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z",fill:"currentColor"},null,-1),_hoisted_3$a=[_hoisted_2$a];function render$a(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$a,_hoisted_3$a)}var chevronLeft={render:render$a},__glob_0_2=Object.freeze(Object.defineProperty({__proto__:null,render:render$a,default:chevronLeft},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$9={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},_hoisted_2$9=createBaseVNode("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z",fill:"currentColor"},null,-1),_hoisted_3$9=[_hoisted_2$9];function render$9(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$9,_hoisted_3$9)}var chevronRight={render:render$9},__glob_0_3=Object.freeze(Object.defineProperty({__proto__:null,render:render$9,default:chevronRight},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$8={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},_hoisted_2$8=createBaseVNode("path",{d:"M24 9.4 22.6 8 16 14.6 9.4 8 8 9.4l6.6 6.6L8 22.6 9.4 24l6.6-6.6 6.6 6.6 1.4-1.4-6.6-6.6L24 9.4z",fill:"currentColor"},null,-1),_hoisted_3$8=[_hoisted_2$8];function render$8(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$8,_hoisted_3$8)}var close={render:render$8},__glob_0_4=Object.freeze(Object.defineProperty({__proto__:null,render:render$8,default:close},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$7={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"},_hoisted_2$7=createBaseVNode("path",{d:"M641.5 256c0 3.1-1.7 6.1-4.5 7.5L547.9 317c-1.4.8-2.8 1.4-4.5 1.4-1.4 0-3.1-.3-4.5-1.1-2.8-1.7-4.5-4.5-4.5-7.8v-35.6H295.7c25.3 39.6 40.5 106.9 69.6 106.9H392V354c0-5 3.9-8.9 8.9-8.9H490c5 0 8.9 3.9 8.9 8.9v89.1c0 5-3.9 8.9-8.9 8.9h-89.1c-5 0-8.9-3.9-8.9-8.9v-26.7h-26.7c-75.4 0-81.1-142.5-124.7-142.5H140.3c-8.1 30.6-35.9 53.5-69 53.5C32 327.3 0 295.3 0 256s32-71.3 71.3-71.3c33.1 0 61 22.8 69 53.5 39.1 0 43.9 9.5 74.6-60.4C255 88.7 273 95.7 323.8 95.7c7.5-20.9 27-35.6 50.4-35.6 29.5 0 53.5 23.9 53.5 53.5s-23.9 53.5-53.5 53.5c-23.4 0-42.9-14.8-50.4-35.6H294c-29.1 0-44.3 67.4-69.6 106.9h310.1v-35.6c0-3.3 1.7-6.1 4.5-7.8 2.8-1.7 6.4-1.4 8.9.3l89.1 53.5c2.8 1.1 4.5 4.1 4.5 7.2z",fill:"currentColor"},null,-1),_hoisted_3$7=[_hoisted_2$7];function render$7(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$7,_hoisted_3$7)}var connect={render:render$7},__glob_0_5=Object.freeze(Object.defineProperty({__proto__:null,render:render$7,default:connect},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$6={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12"},_hoisted_2$6=createBaseVNode("path",{d:"M1.974 6.659a.5.5 0 0 1-.948-.317c-.01.03 0-.001 0-.001a1.633 1.633 0 0 1 .062-.162c.04-.095.099-.226.18-.381.165-.31.422-.723.801-1.136C2.834 3.827 4.087 3 6 3c1.913 0 3.166.827 3.931 1.662a5.479 5.479 0 0 1 .98 1.517l.046.113c.003.008.013.06.023.11L11 6.5s.084.333-.342.474a.5.5 0 0 1-.632-.314v-.003l-.006-.016a3.678 3.678 0 0 0-.172-.376 4.477 4.477 0 0 0-.654-.927C8.584 4.673 7.587 4 6 4s-2.584.673-3.194 1.338a4.477 4.477 0 0 0-.795 1.225 2.209 2.209 0 0 0-.03.078l-.007.018zM6 5a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM5 7a1 1 0 1 1 2 0 1 1 0 0 1-2 0z",fill:"currentColor"},null,-1),_hoisted_3$6=[_hoisted_2$6];function render$6(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$6,_hoisted_3$6)}var eye={render:render$6},__glob_0_6=Object.freeze(Object.defineProperty({__proto__:null,render:render$6,default:eye},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$5={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},_hoisted_2$5=createBaseVNode("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[createBaseVNode("path",{d:"M14 10h1c1 0 1 1 2.016 3.527C18 16 18 17 19 17h1"}),createBaseVNode("path",{d:"M13 17c1.5 0 3-2 4-3.5s2.5-3.5 4-3.5M3 19c0 1.5.5 2 2 2s2-4 3-9 1.5-9 3-9 2 .5 2 2M5 12h6"})],-1),_hoisted_3$5=[_hoisted_2$5];function render$5(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$5,_hoisted_3$5)}var _function={render:render$5},__glob_0_7=Object.freeze(Object.defineProperty({__proto__:null,render:render$5,default:_function},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$4={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},_hoisted_2$4=createBaseVNode("path",{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z",fill:"currentColor"},null,-1),_hoisted_3$4=[_hoisted_2$4];function render$4(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$4,_hoisted_3$4)}var hudOff={render:render$4},__glob_0_8=Object.freeze(Object.defineProperty({__proto__:null,render:render$4,default:hudOff},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$3={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"},_hoisted_2$3=createBaseVNode("path",{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z",fill:"currentColor"},null,-1),_hoisted_3$3=[_hoisted_2$3];function render$3(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$3,_hoisted_3$3)}var hudOn={render:render$3},__glob_0_9=Object.freeze(Object.defineProperty({__proto__:null,render:render$3,default:hudOn},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$2={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},_hoisted_2$2=createBaseVNode("path",{d:"M424.4 214.7 72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z",fill:"currentColor"},null,-1),_hoisted_3$2=[_hoisted_2$2];function render$2(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$2,_hoisted_3$2)}var play={render:render$2},__glob_0_12=Object.freeze(Object.defineProperty({__proto__:null,render:render$2,default:play},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},_hoisted_2$1=createBaseVNode("path",{d:"m19.44 12.99-.01.02c.04-.33.08-.67.08-1.01 0-.34-.03-.66-.07-.99l.01.02 2.44-1.92-2.43-4.22-2.87 1.16.01.01c-.52-.4-1.09-.74-1.71-1h.01L14.44 2H9.57l-.44 3.07h.01c-.62.26-1.19.6-1.71 1l.01-.01-2.88-1.17-2.44 4.22 2.44 1.92.01-.02c-.04.33-.07.65-.07.99 0 .34.03.68.08 1.01l-.01-.02-2.1 1.65-.33.26 2.43 4.2 2.88-1.15-.02-.04c.53.41 1.1.75 1.73 1.01h-.03L9.58 22h4.85s.03-.18.06-.42l.38-2.65h-.01c.62-.26 1.2-.6 1.73-1.01l-.02.04 2.88 1.15 2.43-4.2s-.14-.12-.33-.26l-2.11-1.66zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z",fill:"currentColor"},null,-1),_hoisted_3$1=[_hoisted_2$1];function render$1(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$1,_hoisted_3$1)}var settings={render:render$1},__glob_0_13=Object.freeze(Object.defineProperty({__proto__:null,render:render$1,default:settings},Symbol.toStringTag,{value:"Module"}));const _hoisted_1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},_hoisted_2=createBaseVNode("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z",fill:"currentColor"},null,-1),_hoisted_3=[_hoisted_2];function render(e,t){return openBlock(),createElementBlock("svg",_hoisted_1,_hoisted_3)}var stop={render},__glob_0_15=Object.freeze(Object.defineProperty({__proto__:null,render,default:stop},Symbol.toStringTag,{value:"Module"})),icons={install(e){Object.entries({"../assets/icons/axis.svg":__glob_0_0,"../assets/icons/chevron-dropdown.svg":__glob_0_1,"../assets/icons/chevron-left.svg":__glob_0_2,"../assets/icons/chevron-right.svg":__glob_0_3,"../assets/icons/close.svg":__glob_0_4,"../assets/icons/connect.svg":__glob_0_5,"../assets/icons/eye.svg":__glob_0_6,"../assets/icons/function.svg":__glob_0_7,"../assets/icons/hud-off.svg":__glob_0_8,"../assets/icons/hud-on.svg":__glob_0_9,"../assets/icons/linear.svg":__glob_0_10,"../assets/icons/parabola.svg":__glob_0_11,"../assets/icons/play.svg":__glob_0_12,"../assets/icons/settings.svg":__glob_0_13,"../assets/icons/sine.svg":__glob_0_14,"../assets/icons/stop.svg":__glob_0_15}).forEach(([o,r])=>{const i=o.split("/").pop().replace(/\.\w+$/,"");e.component(`${i}-icon`,r.default)})}};const app=createApp(Main);app.use(naive);app.use(icons);app.config.unwrapInjectedRef=!0;app.mount("#app");
