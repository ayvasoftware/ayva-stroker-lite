import{s as showOpenFilePicker,a as showSaveFilePicker,A as Ayva,_,S as Slider,o as openBlock,c as createElementBlock,n as normalizeClass,r as resolveComponent,b as createBaseVNode,t as toDisplayString,d as createVNode,e as createBlock,w as withCtx,f as withDirectives,v as vShow,g as vModelText,p as pushScopeId,h as popScopeId,i as createTextVNode,j as renderSlot,k as withModifiers,F as Fragment,l as renderList,J as Joi,T as TempestStroke,W as WorkerWrapper,m as WorkerWrapper$1,q as WorkerWrapper$2,u as WorkerWrapper$3,x as WorkerWrapper$4,y as editor$2,z as languages,R as Range,G as GeneratorBehavior,B as ScriptBehavior,C as useNotification,D as useDialog,E as qo,H as jshint,I as h,K as createStaticVNode,L as nextTick,V as VariableDuration,M as computed,N as WebSerialDevice,O as WebSocketDevice,P as ConsoleDevice,Q as BLEDevice,U as normalizeStyle,X as createApp,Y as naive}from"./vendor.f8e71ae7.js";const p=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}};p();var editor$1="",lilGui="",main="",naiveUi="";window.showOpenFilePicker||(console.warn("Using ponyfills for File System Access API"),window.showOpenFilePicker=showOpenFilePicker,window.showSaveFilePicker=showSaveFilePicker);const ayvaConfig=Ayva.defaultConfiguration;function createAyva(){return new Ayva(ayvaConfig)}class Storage{namespace="";constructor(e){this.namespace=e}load(e){const o=localStorage.getItem(this.storageKey(e));return o!=null&&o!=="undefined"?JSON.parse(o):null}save(e,o){localStorage.setItem(this.storageKey(e),JSON.stringify(o))}storageKey(e){return`${this.namespace}--${e}`}remove(e){localStorage.removeItem(this.storageKey(e))}}function makeCollapsible(t){t._openAnimated=function(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{this.domElement.style.height=null;const o=this.$children.clientHeight;this.$children.style.height=`${o}px`,this.domElement.classList.add("transition");const r=i=>{i.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",r),window.dispatchEvent(new Event("resize")))};this.$children.addEventListener("transitionend",r);const s=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=`${s}px`})}),this},t.$title=t.querySelector(".title"),t.$children=t.querySelector(".children"),t.domElement=t,t._closed=!1,t.$title.addEventListener("click",()=>{t._openAnimated(t._closed)})}const formatter=(t=0,e="")=>({to(o){return`${o.toFixed(t)}${e}`},from(o){return Number(o.replace(",-",""))}});function has(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function clamp(t,e,o){return Math.max(e,Math.min(o,t))}function validNumber(t,e,o){return!(!Number.isFinite(t)||e!==void 0&&t<e||o!==void 0&&t>o)}function createConstantProperty(t,e,o){Object.defineProperty(t,e,{value:o,writeable:!1,configurable:!1,enumerable:!0})}function clampHeight(t,e,o){const r=t.getBoundingClientRect(),s=r.height+(window.innerHeight-(r.y+r.height));t.style.height=`${clamp(s,e,o)}px`}function mergeTooltips(t,e,o){const r=getComputedStyle(t).direction==="rtl",s=t.noUiSlider.options.direction==="rtl",i=t.noUiSlider.options.orientation==="vertical",a=t.noUiSlider.getTooltips(),n=t.noUiSlider.getOrigins();a.forEach(function(l,d){l&&n[d].appendChild(l)}),t.noUiSlider.on("update",function(l,d,m,v,f){const g=[[]],y=[[]],b=[[]];let u=0;a[0]&&(g[0][0]=0,[y[0][0]]=f,[b[0][0]]=l);for(let c=1;c<f.length;c++)(!a[c]||f[c]-f[c-1]>e)&&(u++,g[u]=[],b[u]=[],y[u]=[]),a[c]&&(g[u].push(c),b[u].push(l[c]),y[u].push(f[c]));g.forEach(function(c,w){const S=c.length;for(let $=0;$<S;$++){const k=c[$];if($===S-1){let N=0;y[w].forEach(function(C){N+=1e3-C});const B=i?"bottom":"right",V=s?0:S-1,x=1e3-y[w][V];N=(r&&!i?100:0)+N/S-x,a[k].innerHTML=b[w].join(o),a[k].style.display="block",a[k].style[B]=`${N}%`}else a[k].style.display="none"}})})}const eventMixin={on(t,e){this._eventHandlers||(this._eventHandlers={}),this._eventHandlers[t]||(this._eventHandlers[t]=[]),this._eventHandlers[t].push(e)},off(t,e){const o=this._eventHandlers?.[t];if(!!o)for(let r=0;r<o.length;r++)o[r]===e&&o.splice(r--,1)},$emit(t,...e){!this._eventHandlers?.[t]||this._eventHandlers[t].forEach(o=>o.apply(this,e))}};function triggerMouseEvent(t,e){const o=new MouseEvent(e);t.dispatchEvent(o)}var nouislider_css_vue_type_style_index_0_src_f6761d2a_lang="",ayvaSliders_css_vue_type_style_index_1_src_f6761d2a_lang="",_export_sfc=(t,e)=>{const o=t.__vccOpts||t;for(const[r,s]of e)o[r]=s;return o};const storage$6=new Storage("slider-value"),_sfc_main$i={expose:["set","get"],props:{options:{type:Object,default:()=>{}},activeTooltips:{type:Boolean,default:!1},storageKey:{type:String,default:null},modelValue:{type:[Number,Array],default:null},mergeTooltips:{type:Boolean,default:!0}},emits:["update","update:modelValue","change","start","end"],data(){return{value:null,defaultOptions:{tooltips:!0,connect:!0,orientation:"horizontal"},slider:null}},computed:{mergedOptions(){return{...this.defaultOptions,...this.options}},sliderClass(){return[this.mergedOptions.orientation,{"active-tooltips":this.activeTooltips}]}},watch:{mergedOptions(){this.initSlider()},modelValue(t){_.isEqual(t,this.value)||(t.length?this.slider.set(...t):this.slider.set(t))}},beforeMount(){this.storageKey&&(this.value=storage$6.load(this.storageKey))},mounted(){this.initSlider()},methods:{cleanValue(t){return Number(t.replaceAll(/[a-zA-Z]/g,""))},onUpdate(t){t.length===1?this.value=this.cleanValue(t[0]):this.value=t.map(e=>this.cleanValue(e)),this.storageKey&&this.save(),this.$emit("update",this.value),this.$emit("update:modelValue",this.value)},initSlider(){const t=this.value,e=this.$refs.slider;this.slider&&this.slider.destroy(),this.slider=Slider.create(e,this.mergedOptions),this.mergeTooltips&&mergeTooltips(e,10," - "),this.slider.on("update",this.onUpdate),this.slider.on("change",(...o)=>{this.onUpdate(...o),this.$emit("change",...o)}),this.slider.on("start",(...o)=>{this.$emit("start",...o)}),this.slider.on("end",(...o)=>{this.$emit("end",...o)}),e.querySelectorAll(".noUi-handle").forEach(o=>{o.addEventListener("dblclick",()=>{this.slider.reset()})}),t&&this.slider.set(t)},save(){storage$6.save(this.storageKey,this.value)},set(...t){this.slider.set(t)},get(){const t=this.slider.get();return t.length===1?t[0]:t}}};function _sfc_render$i(t,e,o,r,s,i){return openBlock(),createElementBlock("div",{ref:"slider",class:normalizeClass(["slider",i.sliderClass])},null,2)}var AyvaSlider=_export_sfc(_sfc_main$i,[["render",_sfc_render$i]]);const storage$5=new Storage("checkbox-value"),_sfc_main$h={props:{modelValue:{type:Boolean,default:!1},storageKey:{type:String,default:null}},emits:["update:modelValue","change"],data(){return{initialValue:null}},watch:{modelValue(t){this.storageKey&&storage$5.save(this.storageKey,t)}},beforeMount(){this.storageKey&&(this.initialValue=storage$5.load(this.storageKey))},mounted(){this.initialValue!==null&&this.initialValue!==void 0&&this.notifyChange(this.initialValue)},methods:{onChange(t){const{checked:e}=t.target;this.storageKey&&storage$5.save(this.storageKey,e),this.notifyChange(e)},notifyChange(t){this.$emit("update:modelValue",t),this.$emit("change",t)}}},_hoisted_1$y=["checked"];function _sfc_render$h(t,e,o,r,s,i){return openBlock(),createElementBlock("input",{type:"checkbox",checked:o.modelValue,onChange:e[0]||(e[0]=(...a)=>i.onChange&&i.onChange(...a))},null,40,_hoisted_1$y)}var AyvaCheckbox=_export_sfc(_sfc_main$h,[["render",_sfc_render$h]]);const _sfc_main$g={props:{connected:{type:Boolean,default:!1},mode:{type:String,default:""}},emits:["request-connection"],computed:{connectedClass(){return this.connected?"connected":"disconnected"},connectedText(){return this.connected?"Connected":"Disconnected"}}},_hoisted_1$x=["disabled"],_hoisted_2$v=createBaseVNode("span",{class:"connect-status-icon"},null,-1),_hoisted_3$s={class:"connect-status"},_hoisted_4$b={class:"connect-icon"};function _sfc_render$g(t,e,o,r,s,i){const a=resolveComponent("connect-icon");return openBlock(),createElementBlock("div",{class:normalizeClass(["connect-status-container lil-gui",i.connectedClass]),disabled:o.mode!=="Stopped"?"":null},[_hoisted_2$v,createBaseVNode("span",_hoisted_3$s,toDisplayString(i.connectedText),1),createBaseVNode("span",_hoisted_4$b,[createVNode(a)])],10,_hoisted_1$x)}var AyvaConnected=_export_sfc(_sfc_main$g,[["render",_sfc_render$g]]);const storage$4=new Storage("ayva-dropdown"),_sfc_main$f={props:{modelValue:{type:String,default:null},storageKey:{type:String,default:null},options:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],data(){return{initialValue:null}},computed:{label(){return this.options.reduce((e,o)=>(e[o.key]=o.label,e),{})[this.modelValue]||""}},watch:{modelValue(t){this.storageKey&&storage$4.save(this.storageKey,t)}},beforeMount(){this.storageKey&&(this.initialValue=storage$4.load(this.storageKey))},mounted(){this.initialValue!==null&&this.initialValue!==void 0&&this.notifyChange(this.initialValue)},methods:{onChange(t){this.storageKey&&storage$4.save(this.storageKey,t),this.notifyChange(t)},notifyChange(t){this.$emit("update:modelValue",t),this.$emit("change",t)}}},_hoisted_1$w={class:"ayva-dropdown-input"};function _sfc_render$f(t,e,o,r,s,i){const a=resolveComponent("chevron-dropdown-icon"),n=resolveComponent("n-dropdown");return openBlock(),createBlock(n,{class:"ayva-dropdown",placement:"bottom-start",trigger:"click",size:"small",options:o.options,onSelect:i.onChange},{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$w,[createBaseVNode("span",null,toDisplayString(i.label),1),createVNode(a,{class:"chevron"})])]),_:1},8,["options","onSelect"])}var AyvaDropdown=_export_sfc(_sfc_main$f,[["render",_sfc_render$f]]),ayvaModal_css_vue_type_style_index_0_src_cfa9d5ca_scoped_true_lang="",AyvaSettings_vue_vue_type_style_index_1_scoped_true_lang="";const storage$3=new Storage("output-settings"),_sfc_main$e={components:{AyvaDropdown},inject:["globalEvents"],emits:["close"],data(){return{deviceTypeOptions:[{key:"OSR2",label:"OSR2"},{key:"SR6",label:"SR6"},{key:"SSR1",label:"SSR1"}],deviceType:"OSR2",connectionTypeOptions:[{key:"serial",label:"Serial"},{key:"ble",label:"Bluetooth LE"},{key:"websocket",label:"WebSocket"},{key:"console",label:"Console"}],connectionType:"serial",host:storage$3.load("host")||"localhost",port:storage$3.load("port")||80,frequency:storage$3.load("frequency")||50}},computed:{portInvalid(){const t=Number(this.port);return!(Number.isFinite(t)&&t>=1&&t<=65535)},frequencyInvalid(){const t=Number(this.frequency);return!(Number.isFinite(t)&&t>=10&&t<=250)},hostInvalid(){return!this.host||!this.host.trim()}},methods:{restrictNumbers(t){const e=["Backspace","Delete","ArrowLeft","ArrowRight"];!t.key.match(/[0-9]/)&&e.indexOf(t.key)===-1&&t.preventDefault()},close(){this.frequencyInvalid||this.portInvalid||(storage$3.save("deviceType",this.deviceType),storage$3.save("connectionType",this.connectionType),storage$3.save("frequency",this.frequency),storage$3.save("host",this.host),storage$3.save("port",this.port),this.$emit("close"),this.globalEvents.$emit("refresh-output-settings"))}}},_withScopeId$6=t=>(pushScopeId("data-v-cfa9d5ca"),t=t(),popScopeId(),t),_hoisted_1$v={class:"modal-body-small"},_hoisted_2$u={class:"toolbar"},_hoisted_3$r=_withScopeId$6(()=>createBaseVNode("span",{class:"toolbar-left"},[createBaseVNode("span",null,"Output Settings")],-1)),_hoisted_4$a={class:"toolbar-right"},_hoisted_5$a={class:"limits lil-gui children"},_hoisted_6$7={class:"settings"},_hoisted_7$5=_withScopeId$6(()=>createBaseVNode("div",{class:"settings-label"}," Device: ",-1)),_hoisted_8$4={class:"settings"},_hoisted_9$4=_withScopeId$6(()=>createBaseVNode("div",{class:"settings-label"}," Connection: ",-1)),_hoisted_10$4={class:"settings"},_hoisted_11$4=_withScopeId$6(()=>createBaseVNode("div",{class:"settings-label"}," Host: ",-1)),_hoisted_12$4=createTextVNode(" Host cannot be blank. "),_hoisted_13$4={class:"settings"},_hoisted_14$4=_withScopeId$6(()=>createBaseVNode("div",{class:"settings-label"}," Port: ",-1)),_hoisted_15$5=createTextVNode(" Port must be a number between 1 and 65535. "),_hoisted_16$4={class:"settings"},_hoisted_17$4=_withScopeId$6(()=>createBaseVNode("div",{style:{"grid-column":"span 2","font-size":"14px","text-align":"center",color:"var(--ayva-color-error)"}},[createTextVNode(" Note: There currently is no firmware available that supports a secure WebSocket. You must connect to another application running on localhost, such as"),createBaseVNode("br"),createBaseVNode("a",{href:"https://osr.wiki/books/ayva-websocket-hub/page/overview",target:"_blank",style:{color:"var(--ayva-color-error)"}}," Ayva WebSocket Hub "),createTextVNode(". ")],-1)),_hoisted_18$4=[_hoisted_17$4];function _sfc_render$e(t,e,o,r,s,i){const a=resolveComponent("close-icon"),n=resolveComponent("ayva-dropdown"),l=resolveComponent("n-tooltip");return openBlock(),createElementBlock("div",_hoisted_1$v,[createBaseVNode("div",null,[createBaseVNode("div",_hoisted_2$u,[_hoisted_3$r,createBaseVNode("span",_hoisted_4$a,[createBaseVNode("span",null,[createVNode(a,{class:"close icon",disabled:i.frequencyInvalid||i.portInvalid?"":void 0,onClick:i.close},null,8,["disabled","onClick"])])])]),createBaseVNode("div",_hoisted_5$a,[createBaseVNode("div",_hoisted_6$7,[_hoisted_7$5,createVNode(n,{modelValue:s.deviceType,"onUpdate:modelValue":e[0]||(e[0]=d=>s.deviceType=d),class:"device-type",options:s.deviceTypeOptions,"storage-key":"device-type"},null,8,["modelValue","options"])]),createBaseVNode("div",_hoisted_8$4,[_hoisted_9$4,createVNode(n,{modelValue:s.connectionType,"onUpdate:modelValue":e[1]||(e[1]=d=>s.connectionType=d),class:"connection-type",options:s.connectionTypeOptions,"storage-key":"connection-type"},null,8,["modelValue","options"])]),withDirectives(createBaseVNode("div",_hoisted_10$4,[_hoisted_11$4,createBaseVNode("div",null,[createVNode(l,{show:i.hostInvalid,class:"error-tooltip"},{trigger:withCtx(()=>[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>s.host=d),class:normalizeClass(["host",i.hostInvalid?"error":""])},null,2),[[vModelText,s.host]])]),default:withCtx(()=>[_hoisted_12$4]),_:1},8,["show"])])],512),[[vShow,s.connectionType==="websocket"]]),withDirectives(createBaseVNode("div",_hoisted_13$4,[_hoisted_14$4,createBaseVNode("div",null,[createVNode(l,{show:i.portInvalid,class:"error-tooltip"},{trigger:withCtx(()=>[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":e[3]||(e[3]=d=>s.port=d),class:normalizeClass(["port",i.portInvalid?"error":""]),maxlength:"5",onKeydown:e[4]||(e[4]=(...d)=>i.restrictNumbers&&i.restrictNumbers(...d))},null,34),[[vModelText,s.port]])]),default:withCtx(()=>[_hoisted_15$5]),_:1},8,["show"])])],512),[[vShow,s.connectionType==="websocket"]]),withDirectives(createBaseVNode("div",_hoisted_16$4,_hoisted_18$4,512),[[vShow,s.connectionType==="websocket"]])])])])}var AyvaSettings=_export_sfc(_sfc_main$e,[["render",_sfc_render$e],["__scopeId","data-v-cfa9d5ca"]]);const _sfc_main$d={inject:["modals"],props:{show:{type:Boolean,value:!1},lilGui:{type:Boolean,value:!1}},watch:{show:{immediate:!0,handler(t,e){t?this.modals.count++:e===!0&&this.modals.count--}}}},_hoisted_1$u={key:0},_hoisted_2$t={class:"lil-gui"};function _sfc_render$d(t,e,o,r,s,i){const a=resolveComponent("n-modal");return openBlock(),createBlock(a,{show:o.show,"auto-focus":!1},{default:withCtx(()=>[o.lilGui?(openBlock(),createElementBlock("div",_hoisted_1$u,[createBaseVNode("div",_hoisted_2$t,[renderSlot(t.$slots,"default")])])):renderSlot(t.$slots,"default",{key:1})]),_:3},8,["show"])}var AyvaModal=_export_sfc(_sfc_main$d,[["render",_sfc_render$d]]),AyvaOutput_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$c={components:{AyvaSlider,AyvaConnected,AyvaSettings,AyvaModal},inject:{device:{from:"globalDevice"}},props:{mode:{type:String,default:null}},emits:["update-limits","request-connection","disconnect"],data(){return{axes:["stroke","surge","sway","twist","roll","pitch"],sliderOptions:{start:[.2,.8],tooltips:!0,margin:.1,connect:!0,range:{min:[0],max:[1]}},showSettings:!1}},mounted(){makeCollapsible(this.$el)},methods:{onUpdate(t,e){const[o,r]=e;this.updateLimit(t,o,r)},updateLimit(t,e,o){const r={min:Number(e),max:Number(o)};this.$emit("update-limits",{name:t,limits:r})},toggleConnection(){!this.device.connected&&this.mode==="Stopped"?this.$emit("request-connection"):this.device.connected&&this.mode==="Stopped"&&this.$emit("disconnect")}}},_withScopeId$5=t=>(pushScopeId("data-v-ece15ddc"),t=t(),popScopeId(),t),_hoisted_1$t={class:"limits-container lil-gui root"},_hoisted_2$s={class:"title",style:{"padding-right":"0"}},_hoisted_3$q=_withScopeId$5(()=>createBaseVNode("span",null,"Output",-1)),_hoisted_4$9={class:"limits lil-gui children"},_hoisted_5$9={class:"axis"};function _sfc_render$c(t,e,o,r,s,i){const a=resolveComponent("ayva-connected"),n=resolveComponent("edit-settings-icon"),l=resolveComponent("ayva-slider"),d=resolveComponent("ayva-settings"),m=resolveComponent("ayva-modal");return openBlock(),createElementBlock("div",_hoisted_1$t,[createBaseVNode("div",_hoisted_2$s,[_hoisted_3$q,createVNode(a,{connected:i.device.connected,mode:o.mode,onClick:withModifiers(i.toggleConnection,["stop"])},null,8,["connected","mode","onClick"]),createVNode(n,{disabled:o.mode!=="Stopped"||i.device.connected?"":null,class:"settings icon",onClick:e[0]||(e[0]=withModifiers(v=>o.mode!="Stopped"||i.device.connected?"":s.showSettings=!0,["stop"]))},null,8,["disabled"])]),createBaseVNode("div",_hoisted_4$9,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.axes,v=>(openBlock(),createElementBlock("div",{key:v,class:normalizeClass(["limit",v])},[createBaseVNode("div",_hoisted_5$9,toDisplayString(v),1),createVNode(l,{options:s.sliderOptions,"storage-key":`${v}-limit`,onUpdate:f=>i.onUpdate(v,f)},null,8,["options","storage-key","onUpdate"])],2))),128))]),createVNode(m,{show:s.showSettings,"lil-gui":""},{default:withCtx(()=>[createVNode(d,{ref:"ayvaSettings",onClose:e[1]||(e[1]=v=>s.showSettings=!1)},null,512)]),_:1},8,["show"])])}var AyvaOutput=_export_sfc(_sfc_main$c,[["render",_sfc_render$c],["__scopeId","data-v-ece15ddc"]]);const storage$2=new Storage("bpm-select"),_sfc_main$b={props:{modelValue:{type:String,default:null},storageKey:{type:String,default:null}},emits:["update:modelValue","change"],data(){return{initialValue:null,options:[{key:"transition",label:"On Transition"},{key:"continuous",label:"Continuously"}]}},computed:{label(){return this.options.reduce((e,o)=>(e[o.key]=o.label,e),{})[this.modelValue]||""}},watch:{modelValue(t){this.storageKey&&storage$2.save(this.storageKey,t)}},beforeMount(){this.storageKey&&(this.initialValue=storage$2.load(this.storageKey))},mounted(){this.initialValue!==null&&this.initialValue!==void 0&&this.notifyChange(this.initialValue)},methods:{onChange(t){this.storageKey&&storage$2.save(this.storageKey,t),this.notifyChange(t)},notifyChange(t){this.$emit("update:modelValue",t),this.$emit("change",t)}}},_hoisted_1$s={class:"ayva-dropdown-input"};function _sfc_render$b(t,e,o,r,s,i){const a=resolveComponent("chevron-dropdown-icon"),n=resolveComponent("n-dropdown");return openBlock(),createBlock(n,{class:"bpm-select ayva-dropdown",placement:"bottom-start",trigger:"click",size:"small",options:s.options,onSelect:i.onChange},{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$s,[createBaseVNode("span",null,toDisplayString(i.label),1),createVNode(a,{class:"chevron"})])]),_:1},8,["options","onSelect"])}var AyvaBpmSelect=_export_sfc(_sfc_main$b,[["render",_sfc_render$b]]);const keyPattern=/[a-z0-9-]+/,parametersSchema=Joi.object({from:Joi.number().required().min(0).max(1),to:Joi.number().required().min(0).max(1),phase:Joi.number(),ecc:Joi.number(),noise:Joi.any(),motion:Joi.string()}).required(),noiseSchema=Joi.object({from:Joi.number().min(0).max(1),to:Joi.number().min(0).max(1)}),behaviorSchema=Joi.object({name:Joi.string().required().pattern(keyPattern),type:Joi.string().required().pattern(/tempest-stroke|ayvascript/),data:Joi.object().required()}),scriptSchema=Joi.object({script:Joi.string().required()});function validateTempestStroke(t){const e=Object.keys(t);if(!e.length)return!1;for(const o of e){if(parametersSchema.validate(t[o]).error)return!1;if(has(t[o],"noise")){const{noise:r}=t[o];if(!validNumber(r,0,1)&&noiseSchema.validate(r).error)return!1}}return!0}function validateAyvaScript(t){return!scriptSchema.validate(t).error}var validator={validate(t){for(const e of t){if(behaviorSchema.validate(e).error)return!1;const{type:o,data:r}=e;if(o==="tempest-stroke")return validateTempestStroke(r);if(o==="ayvascript")return validateAyvaScript(r)}return!1}};const storage$1=new Storage("custom-behaviors"),fileOptions$1={types:[{description:"Ayva Behaviors",accept:{"application/json":[".json"]}}],excludeAcceptAllOption:!0,multiple:!1,suggestedName:"ayva-behaviors.json"};class CustomBehaviorStorage{migrateLegacyStrokes(){const e=new Storage("custom-tempest-strokes"),o=e.load("all");o&&(Object.entries(o).forEach(([r,s])=>{this.save(r,"tempest-stroke",s)}),e.remove("all"))}load(){const e=storage$1.load("all")||{},o=this.deserialize(e);return Object.entries(o).forEach(([r,s])=>{s.type==="tempest-stroke"&&TempestStroke.update(r,s.data)}),o}save(e,o,r){const s=this.load();s[e]={type:o,data:r},storage$1.save("all",this.serialize(s))}delete(e){const o=this.load();delete o[e],storage$1.save("all",o),TempestStroke.remove(e),localStorage.removeItem(`checkbox-value--free-play-pattern-${e}`)}async import(e){let o;try{[o]=await window.showOpenFilePicker(fileOptions$1)}catch{return}const r=await o.getFile(),s=JSON.parse(await r.text());if(!Array.isArray(s)||!validator.validate(s))throw new SyntaxError("Invalid behavior file.");const i=this.load(),a=[];for(const n of s){let{name:l}=n;if(i[l]){let d=2;for(;i[l];)l=`${n.name}-${d++}`;a.push(l)}this.save(l,n.type,n.data)}a.length&&e instanceof Function&&e(a)}async export(){let e;try{e=await window.showSaveFilePicker(fileOptions$1)}catch{return}const o=await e.createWritable(),r=this.serialize(this.load()),s=Object.entries(r).map(([i,a])=>({name:i,type:a.type,data:a.data}));await o.write(JSON.stringify(s,null,2)),await o.close()}async exportOne(e){let o;try{o=await window.showSaveFilePicker({...fileOptions$1,suggestedName:`${e}.json`})}catch{return}const r=await o.createWritable(),s=this.serialize(this.load()),{type:i,data:a}=s[e],n=[{name:e,type:i,data:a}];await r.write(JSON.stringify(n,null,2)),await r.close()}serialize(e){const o=_.cloneDeep(e);return Object.values(o).forEach(r=>{r.type==="tempest-stroke"&&Object.values(r.data).forEach(s=>{if(s.motion instanceof Function)switch(s.motion.name){case"tempestMotion":s.motion="Ayva.tempestMotion";break;case"parabolicMotion":s.motion="Ayva.parabolicMotion";break;case"linearMotion":s.motion="Ayva.linearMotion";break;default:console.warn("Invalid motion property:",s.motion),delete s.motion}else s.motion!==void 0&&typeof s.motion!="string"&&(console.warn("Invalid motion property:",s.motion),delete s.motion)})}),o}deserialize(e){const o=_.cloneDeep(e);return Object.values(o).forEach(r=>{r.type==="tempest-stroke"&&Object.values(r.data).forEach(s=>{switch(s.motion){case"Ayva.tempestMotion":s.motion=Ayva.tempestMotion;break;case"Ayva.parabolicMotion":s.motion=Ayva.parabolicMotion;break;case"Ayva.linearMotion":s.motion=Ayva.linearMotion;break;default:s.motion&&(console.warn("Invalid motion property:",s.motion),delete s.motion)}})}),o}}self.MonacoEnvironment={getWorker(t,e){return e==="json"?new WorkerWrapper:e==="css"||e==="scss"||e==="less"?new WorkerWrapper$1:e==="html"||e==="handlebars"||e==="razor"?new WorkerWrapper$2:e==="typescript"||e==="javascript"?new WorkerWrapper$3:new WorkerWrapper$4}};const ayvascriptTheme={base:"vs-dark",inherit:!0,colors:{"editor.background":"#111111"},rules:[],settings:[]};editor$2.defineTheme("ayvascript",ayvascriptTheme);languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!0});var ayvascriptEditor={create(t,e=""){return editor$2.create(t,{value:e,theme:"ayvascript",language:"javascript",hover:!1,tabSize:2,quickSuggestions:!1,lightbulb:{enabled:!1},minimap:{enabled:!1}})},syntaxError(t,e,o){return t.deltaDecorations([],[{range:new Range(e,o-1,e,o),options:{className:"squiggly-error",glyphMarginClassName:"syntax-error"}}])}};class ScriptRunner extends GeneratorBehavior{#o;constructor(e,o){super(),this.#o=new ScriptBehavior(e,o)}get complete(){return this.#o.complete}set complete(e){this.#o.complete=e}*generate(e){try{yield this.#o.perform(e).then(()=>{this.complete&&this.$emit("complete")}).catch(this.handleError.bind(this))}catch(o){this.handleError(o)}}handleError(e){this.complete=!0,this.$emit("error",e),this.$emit("complete")}}Object.assign(ScriptRunner.prototype,eventMixin);var ayvaModal_css_vue_type_style_index_0_src_0d14c037_scoped_true_lang="",AyvaScriptEditor_vue_vue_type_style_index_1_scoped_true_lang="";const customBehaviorStorage$2=new CustomBehaviorStorage,ayva$2=createAyva();let emulator$2,editor;const _sfc_main$a={components:{AyvaCheckbox},inject:{globalAyva:{from:"globalAyva"},device:{from:"globalDevice"},parameters:{from:"globalParameters"},deviceType:{from:"deviceType"}},props:{editScript:{type:String,default:null}},emits:["close","save"],setup(){const t=useNotification();return{dialog:useDialog(),notify:t}},data(){return{playing:!1,tempestStrokeLibrary:TempestStroke.library,customBehaviorLibrary:{},previewOnDevice:!1,scriptName:"",script:"",originalScript:"",originalScriptName:"",isScriptValid:!1,decorations:[]}},computed:{edit(){return!!this.editScript},saveText(){return this.edit?"Save":"Add to Library"},disabled(){return this.playing?"":void 0},scriptNameDuplicate(){return this.editScript&&this.scriptName===this.editScript?!1:!!this.tempestStrokeLibrary[this.scriptName]||!!this.customBehaviorLibrary[this.scriptName]},scriptNameValid(){return this.scriptName.length&&!this.scriptNameDuplicate&&!this.scriptNameReserved},scriptNameReserved(){return this.scriptName==="default"||this.scriptName==="header"},scriptValid(){return!!this.script.trim()&&this.validateScript(this.script)}},watch:{previewOnDevice(){this.previewOnDevice?ayva$2.addOutput(this.device):(ayva$2.removeOutput(this.device),this.resetGlobalDevicePosition())},"device.connected"(t){t||(ayva$2.removeOutput(this.device),this.previewOnDevice=!1)},scriptName(t){this.scriptName=t.replaceAll(/[^a-zA-Z0-9-]/g,"").toLowerCase()}},beforeMount(){this.customBehaviorLibrary=customBehaviorStorage$2.load()},mounted(){emulator$2=new qo(this.$refs.emulator,{model:this.deviceType}),ayva$2.addOutput(emulator$2),Object.keys(ayva$2.axes).forEach(e=>{ayva$2.updateLimits(e,this.globalAyva.$[e].min,this.globalAyva.$[e].max)}),this.editScript?(this.scriptName=this.editScript,this.script=this.customBehaviorLibrary[this.scriptName].data.script):this.script=`/**
 * Enter AyvaScript here...
 */`,editor=ayvascriptEditor.create(this.$refs.editor,this.script),editor.getModel().onDidChangeContent(()=>{this.script=editor.getValue();for(const e of this.decorations)editor.deltaDecorations(e,[]);this.validateScript(this.script)});const t=ayva$2.stop.bind(ayva$2);ayva$2.stop=()=>{t(),this.onAyvaStop()},this.originalScript=this.script,this.originalScriptName=this.scriptName},unmounted(){ayva$2.stop(),ayva$2.removeOutput(emulator$2),ayva$2.removeOutput(this.device),emulator$2.destroy(),this.previewOnDevice&&this.resetGlobalDevicePosition()},methods:{togglePlaying(){this.playing?ayva$2.stop():this.validateScript(this.script,!0)&&this.play()},save(){this.editScript&&customBehaviorStorage$2.delete(this.editScript),customBehaviorStorage$2.save(this.scriptName,"ayvascript",{script:this.script}),this.$emit("close"),this.$emit("save")},close(){this.$emit("close")},onClose(){this.originalScript!==this.script||this.originalScriptName!==this.scriptName?this.dialog.warning({title:"Confirm",content:"You have unsaved changes. These changes will be lost if you continue.",positiveText:"Continue",negativeText:"Cancel",class:"unsaved-changes",autoFocus:!1,onPositiveClick:()=>{this.close()}}):this.close()},play(){this.playing=!0,editor.updateOptions({readOnly:!0});const t=Object.keys(this.parameters).reduce((o,r)=>(o[_.camelCase(r)]=_.cloneDeep(this.parameters[r]),o),{}),e=new ScriptRunner(this.script,{GLOBALS:{input:null,output:null,parameters:t,mode:"manual"}});e.on("complete",()=>{ayva$2.stop()}),e.on("error",o=>{this.notify.error({content:"Exception occurred while running script:",meta:o.message})}),ayva$2.do(e)},onAyvaStop(){ayva$2.home(1),this.playing=!1,editor.updateOptions({readOnly:!1})},validateScript(t,e=!1){const o=["function* generate() {",...t.split(`
`),"}"],r=jshint.JSHINT(o,{esversion:11,noyield:!0,debug:!0}),s=Object.values(jshint.JSHINT.errors.filter(i=>i.line!==1&&i.line!==o.length).map(i=>({...i,line:i.line-1})).reduce((i,a)=>(i[a.line]=i[a.line]||a,i),{}));if(!r){const i=[];for(const a of s)this.decorations.push(ayvascriptEditor.syntaxError(editor,a.line,a.character)),i.push(h("div",[`Line ${a.line}: ${a.reason}`])),i.push(h("br"));e&&this.notify.error({content:"Syntax error(s):",meta:()=>h("div",i)})}return r},resetGlobalDevicePosition(){for(const t in ayva$2.$)this.globalAyva.$[t].value=ayva$2.$[t].value}}},_withScopeId$4=t=>(pushScopeId("data-v-0d14c037"),t=t(),popScopeId(),t),_hoisted_1$r={class:"header","hover-info":""},_hoisted_2$r={class:"toolbar"},_hoisted_3$p={class:"toolbar-left"},_hoisted_4$8={class:"toolbar-right"},_hoisted_5$8={class:"main-inputs"},_hoisted_6$6={class:"setup"},_hoisted_7$4=["disabled"],_hoisted_8$3={key:0,class:"device"},_hoisted_9$3=_withScopeId$4(()=>createBaseVNode("label",{for:"preview-on-device"},"Send preview to actual device.",-1)),_hoisted_10$3={key:1,class:"device"},_hoisted_11$3=_withScopeId$4(()=>createBaseVNode("label",{disabled:""},"No device connected. Preview only available on emulator.",-1)),_hoisted_12$3=[_hoisted_11$3],_hoisted_13$3={class:"editor-column"},_hoisted_14$3={class:"emulator-column","hover-info":""},_hoisted_15$4={ref:"emulator",class:"emulator"},_hoisted_16$3={class:"save-container","hover-info":""},_hoisted_17$3=_withScopeId$4(()=>createBaseVNode("label",null,"Name:",-1)),_hoisted_18$3=createTextVNode(" A behavior with that name already exists. "),_hoisted_19$3=["disabled"];function _sfc_render$a(t,e,o,r,s,i){const a=resolveComponent("close-icon"),n=resolveComponent("play-icon"),l=resolveComponent("stop-icon"),d=resolveComponent("ayva-checkbox"),m=resolveComponent("n-tooltip");return openBlock(),createElementBlock("div",{class:"modal-body",onMouseover:e[4]||(e[4]=(...v)=>t.onHover&&t.onHover(...v))},[createBaseVNode("div",_hoisted_1$r,[createBaseVNode("div",_hoisted_2$r,[createBaseVNode("span",_hoisted_3$p,[createBaseVNode("span",null,toDisplayString(i.edit?"Edit":"Create")+" AyvaScript",1)]),createBaseVNode("span",_hoisted_4$8,[createBaseVNode("span",null,[createVNode(a,{class:"close icon",onClick:i.onClose},null,8,["onClick"])])])]),createBaseVNode("div",_hoisted_5$8,[createBaseVNode("div",_hoisted_6$6,[createBaseVNode("button",{class:"play",disabled:!s.script.trim(),onClick:e[0]||(e[0]=(...v)=>i.togglePlaying&&i.togglePlaying(...v))},[createBaseVNode("span",null,[withDirectives(createVNode(n,{class:"play-icon"},null,512),[[vShow,!s.playing]]),withDirectives(createVNode(l,{class:"stop-icon"},null,512),[[vShow,s.playing]])]),createBaseVNode("span",null,toDisplayString(s.playing?"Stop":"Play"),1)],8,_hoisted_7$4)]),i.device&&i.device.connected?(openBlock(),createElementBlock("div",_hoisted_8$3,[createBaseVNode("span",null,[createVNode(d,{id:"preview-on-device",modelValue:s.previewOnDevice,"onUpdate:modelValue":e[1]||(e[1]=v=>s.previewOnDevice=v)},null,8,["modelValue"]),_hoisted_9$3])])):(openBlock(),createElementBlock("div",_hoisted_10$3,_hoisted_12$3))])]),createBaseVNode("div",_hoisted_13$3,[createBaseVNode("div",{ref:"editor",class:normalizeClass(["editor",s.playing?"readonly":""])},null,2)]),createBaseVNode("div",_hoisted_14$3,[createBaseVNode("div",_hoisted_15$4,null,512)]),createBaseVNode("div",_hoisted_16$3,[createBaseVNode("div",null,[_hoisted_17$3,createVNode(m,{show:i.scriptNameDuplicate,class:"error-tooltip"},{trigger:withCtx(()=>[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":e[2]||(e[2]=v=>s.scriptName=v),class:normalizeClass(["name",i.scriptNameDuplicate?"error":""])},null,2),[[vModelText,s.scriptName]])]),default:withCtx(()=>[_hoisted_18$3]),_:1},8,["show"]),createBaseVNode("button",{class:"ayva-button primary",disabled:!i.scriptNameValid||!i.scriptValid||s.playing,onClick:e[3]||(e[3]=(...v)=>i.save&&i.save(...v))},toDisplayString(i.saveText),9,_hoisted_19$3)])])],32)}var AyvaScriptEditor=_export_sfc(_sfc_main$a,[["render",_sfc_render$a],["__scopeId","data-v-0d14c037"]]),AyvaKnob_vue_vue_type_style_index_0_scoped_true_lang="";const storage=new Storage("knob-value"),_sfc_main$9={props:{modelValue:{type:Number,default:0},storageKey:{type:String,default:null},size:{type:Number,default:18}},emits:["update:modelValue","change"],data(){return{initialValue:0,active:!1}},computed:{center(){return this.size/2},radius(){return this.size/2-1},arcLength(){return 2*Math.PI*this.radius},arcOffset(){return this.arcLength*(1-this.modelValue)}},watch:{modelValue(t){this.storageKey&&storage.save(this.storageKey,t)}},beforeMount(){this.storageKey&&(this.initialValue=storage.load(this.storageKey))},mounted(){this.initialValue!==null&&this.initialValue!==void 0&&this.notifyChange(this.initialValue),document.addEventListener("pointerlockchange",this.onPointerLockChange),document.addEventListener("mouseup",this.stop)},unmounted(){document.removeEventListener("pointerlockchange",this.onPointerLockChange),document.removeEventListener("mouseup",this.stop)},methods:{setValue(t){this.storageKey&&storage.save(this.storageKey,t),this.notifyChange(t)},notifyChange(t){this.$emit("update:modelValue",t),this.$emit("change",t)},update(t){if(this.active){const e=clamp(Number((-t.movementY/100).toFixed(2)),-1,1),o=clamp(this.modelValue+e,0,1);this.setValue(o)}},start(){this.active=!0,this.$refs.knob.requestPointerLock()},stop(){this.active&&(this.active=!1,document.exitPointerLock())},wheel(t){const e=clamp(Number((-t.deltaY/200).toFixed(2)),-1,1),o=clamp(this.modelValue+e,0,1);this.setValue(o)},onPointerLockChange(){document.pointerLockElement!==this.$refs.knob&&this.stop()}}},_hoisted_1$q=["width","height"],_hoisted_2$q=createStaticVNode('<defs data-v-abf81582><radialGradient id="trackGradient" data-v-abf81582><stop offset="0%" stop-color="black" data-v-abf81582></stop><stop offset="95%" stop-color="var(--ayva-background-medium)" data-v-abf81582></stop></radialGradient><linearGradient id="knobGradient" x1="0%" y1="0%" x2="100%" y2="0" data-v-abf81582><stop offset="0%" stop-color="rgb(100, 100, 100)" data-v-abf81582></stop><stop offset="50%" stop-color="rgb(48, 48, 48)" data-v-abf81582></stop></linearGradient></defs>',1),_hoisted_3$o=["cx","cy","r"],_hoisted_4$7=["cx","cy","r"],_hoisted_5$7=["cx","cy","r","stroke-dasharray","stroke-dashoffset"];function _sfc_render$9(t,e,o,r,s,i){return openBlock(),createElementBlock("svg",{ref:"knob",xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:o.size,height:o.size,class:"container",onMousedown:e[0]||(e[0]=withModifiers((...a)=>i.start&&i.start(...a),["left"])),onMousemove:e[1]||(e[1]=(...a)=>i.update&&i.update(...a)),onWheel:e[2]||(e[2]=withModifiers((...a)=>i.wheel&&i.wheel(...a),["prevent"]))},[_hoisted_2$q,createBaseVNode("circle",{cx:i.center,cy:i.center,r:i.radius,fill:"url('#trackGradient')"},null,8,_hoisted_3$o),createBaseVNode("circle",{class:"knob",cx:i.center,cy:i.center,r:i.radius-2,fill:"url('#knobGradient')"},null,8,_hoisted_4$7),createBaseVNode("circle",{cx:i.center,cy:i.center,r:i.radius,"stroke-dasharray":i.arcLength,"stroke-dashoffset":i.arcOffset,stroke:"rgb(138, 99, 131)","stroke-width":"2",fill:"none"},null,8,_hoisted_5$7)],40,_hoisted_1$q)}var AyvaKnob=_export_sfc(_sfc_main$9,[["render",_sfc_render$9],["__scopeId","data-v-abf81582"]]);const _hoisted_1$p={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 34"},_hoisted_2$p=createBaseVNode("path",{d:"M1 17q5.25-17 11.5 0T25 17",fill:"transparent",stroke:"#8A6383","stroke-width":"2"},null,-1),_hoisted_3$n=[_hoisted_2$p];function render$h(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$p,_hoisted_3$n)}var SineIcon={render:render$h},__glob_0_16=Object.freeze(Object.defineProperty({__proto__:null,render:render$h,default:SineIcon},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$o={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 34"},_hoisted_2$o=createBaseVNode("path",{d:"M2 25q10.5-30 21 0",fill:"transparent",stroke:"#8A6383","stroke-width":"2"},null,-1),_hoisted_3$m=[_hoisted_2$o];function render$g(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$o,_hoisted_3$m)}var ParabolaIcon={render:render$g},__glob_0_12=Object.freeze(Object.defineProperty({__proto__:null,render:render$g,default:ParabolaIcon},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$n={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 34"},_hoisted_2$n=createBaseVNode("path",{fill:"transparent",stroke:"#8A6383","stroke-width":"2",d:"m0 25 12.5-15L25 25"},null,-1),_hoisted_3$l=[_hoisted_2$n];function render$f(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$n,_hoisted_3$l)}var LinearIcon={render:render$f},__glob_0_11=Object.freeze(Object.defineProperty({__proto__:null,render:render$f,default:LinearIcon},Symbol.toStringTag,{value:"Module"})),TempestMotion_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$8={components:{AyvaSlider,AyvaKnob},props:{modelValue:{type:Object,default:()=>({from:.5,to:.5,phase:0,ecc:0,noise:{from:0,to:0},motion:Ayva.tempestMotion})},displayName:{type:String,default:""},angle:{type:Number,default:0},scrollElement:{type:Object,default:null}},emits:["update:modelValue"],data(){return{rangeOptions:{animate:!1,range:{min:0,max:1},start:[.5,.5],orientation:"vertical",direction:"rtl",behaviour:"unconstrained",step:.01},phaseOptions:{range:{min:-4,max:4},start:[0],step:.05},eccOptions:{range:{min:-1,max:1},start:[0],step:.05},motionOptions:[{label:"Sinusoidal",value:"Ayva.tempestMotion"},{label:"Parabolic",value:"Ayva.parabolicMotion"},{label:"Linear",value:"Ayva.linearMotion"}],from:.5,to:.5,phase:0,ecc:0,motion:Ayva.tempestMotion,noise:{from:0,to:0},current:{from:.5,to:.5},selectedMotion:"Ayva.tempestMotion",lastFromDirection:1,lastToDirection:-1}},computed:{range:{get(){return[this.from,this.to]},set(t){[this.from,this.to]=t}}},watch:{modelValue:{immediate:!0,deep:!0,handler(t){nextTick(()=>{if(this.changed(t)){const{rangeSlider:e,phaseSlider:o,eccSlider:r}=this.$refs;e.set(t.from,t.to),o.set(t.phase),r.set(t.ecc),this.motion=t.motion,this.noise=typeof t.noise=="object"?t.noise:{from:t.noise,to:t.noise},this.current=t.$current,this.motion?this.selectedMotion=`Ayva.${this.motion.name}`:this.selectedMotion="Ayva.tempestMotion"}})},flush:"post"},angle(){this.plot()},selectedMotion(updatedMotion){this.motion=eval(updatedMotion),this.updateModelValue()}},mounted(){["from","to","phase","ecc","noise.from","noise.to"].forEach(e=>this.$watch(e,o=>{e==="from"?this.current.from=o:e==="to"&&(this.current.to=o),this.plot(),this.updateModelValue()}))},methods:{onWheel(t){const e=t.deltaY*.003,o=(this.from+this.to)/2,r=f=>f>0?{min:0,max:o}:{min:o,max:1},s=(f,g)=>clamp(f,g.min,g.max),i=f=>{const g=o-f;return g>0?1:g<0?-1:0};let a,n;const l=i(this.from)||this.lastFromDirection,d=i(this.to)||this.lastToDirection,m=r(l),v=r(d);a=this.from+e*l,n=this.to+e*d,a=s(a,m),n=s(n,v),this.$refs.rangeSlider.set(a,n),this.lastFromDirection=l,this.lastToDirection=d},plot(){if(this.scrollElement){const v=this.scrollElement.getBoundingClientRect(),f=this.$refs.wave.getBoundingClientRect();if(f.top+f.height<v.top||f.top>v.top+v.height)return}const{from:t,to:e,phase:o,ecc:r,motion:s,noise:i,current:a}=this,n=this.createPlotFunction(t,e,o,r,s),{width:l,height:d}=this.getScale();if(this.getContext().clearRect(0,0,l,d),this.plotMotion(n,this.getPlotColor()),this.plotProgressDot(this.createPlotFunction(a.from,a.to,o,r,s)),i.from||i.to)for(let v=0;v<1;v+=.1){const f=t+(e-t)/2*((i.from||0)*v),g=e+(t-e)/2*((i.to||0)*(1-v)),y=this.createPlotFunction(f,g,o,r,s);this.plotMotion(y,this.getPlotColor(.1))}},plotMotion(t,e){const o=this.getContext(),{width:r,height:s,widthScale:i,heightScale:a}=this.getScale();o.beginPath();let n=!0;for(let l=0;l<r;l++){const d=l/i;let m=(t(d)-0)*a;m=s-6-m,n?(o.moveTo(l,m),n=!1):o.lineTo(l,m)}o.lineCap="round",o.setLineDash([3,3]),o.strokeStyle=e,o.lineWidth=2,o.stroke(),o.closePath()},plotProgressDot(t){const e=this.getContext(),{width:o,height:r,widthScale:s,heightScale:i}=this.getScale(),n=this.angle%(Math.PI*2)/(Math.PI*2)*o,l=r-6-(t(n/s)-0)*i;e.beginPath(),e.arc(n,l,4,0,2*Math.PI),e.fillStyle=this.getPlotColor(),e.fill()},createPlotFunction(t,e,o,r,s){return i=>s&&s.name==="parabolicMotion"?this.parabolicMotion(t,e,o,r,i):s&&s.name==="linearMotion"?this.linearMotion(t,e,o,r,i):this.sinMotion(t,e,o,r,i)},getContext(){return this.$refs.wave.getContext("2d")},getScale(){const{width:t,height:e}=this.$refs.wave,o=t/(Math.PI*2),r=e-12;return{width:t,height:e,widthScale:o,heightScale:r}},getPlotColor(t=1){return`rgba(138, 99, 131, ${t})`},sinMotion(t,e,o,r,s){const i=.5*(e-t),a=.5*(e+t),n=s+.5*Math.PI*o;return a-i*Math.cos(n+r*Math.sin(n))},parabolicMotion(t,e,o,r,s){const{sin:i,PI:a}=Math,n=e-t,l=e,d=s+.5*a*o,m=this.mod(d,2*a)/a-1+r/a*i(d);return l-n*m*m},linearMotion(t,e,o,r,s){const{abs:i,sin:a,PI:n}=Math,l=e-t,d=e,m=s+.5*n*o,v=this.mod(m,2*n)/n-1+r/n*a(m);return d-l*i(v)},mod(t,e){return(t%e+e)%e},updateModelValue(){const{from:t,to:e,phase:o,ecc:r,motion:s,noise:i,current:a}=this;this.$emit("update:modelValue",{from:t,to:e,phase:o,ecc:r,motion:s,noise:i,$current:a})},changed(t){return!!Object.keys(t).filter(o=>o==="$current"?t.$current.from!==this.current.from||t.$current.to!==this.current.to:t[o]!==this[o]).length},renderMotionLabel(t){let e;switch(t.label){case"Sinusoidal":e=SineIcon;break;case"Parabolic":e=ParabolaIcon;break;case"Linear":e=LinearIcon;break}return h("div",{style:"display: flex"},[h(e,{style:"width: 25px; height: 20px; position: relative; left: -2px;"}),h("span",[t.label])])}}},_hoisted_1$m={class:"tempest-motion"},_hoisted_2$m={class:"range"},_hoisted_3$k={class:"wave"},_hoisted_4$6={class:"display-name"},_hoisted_5$6={class:"phase"},_hoisted_6$5={class:"ecc"};function _sfc_render$8(t,e,o,r,s,i){const a=resolveComponent("ayva-slider"),n=resolveComponent("ayva-knob"),l=resolveComponent("function-icon"),d=resolveComponent("n-popselect");return openBlock(),createElementBlock("div",_hoisted_1$m,[createBaseVNode("div",_hoisted_2$m,[createVNode(a,{ref:"rangeSlider",modelValue:i.range,"onUpdate:modelValue":e[0]||(e[0]=m=>i.range=m),options:s.rangeOptions,"merge-tooltips":!1,"active-tooltips":"","hover-info":"Range"},null,8,["modelValue","options"])]),createBaseVNode("div",_hoisted_3$k,[createBaseVNode("canvas",{ref:"wave",width:"435",height:"100",onWheel:e[1]||(e[1]=withModifiers((...m)=>i.onWheel&&i.onWheel(...m),["prevent"]))},null,544)]),createBaseVNode("div",_hoisted_4$6,[createBaseVNode("label",null,toDisplayString(o.displayName),1)]),createBaseVNode("div",_hoisted_5$6,[createVNode(a,{ref:"phaseSlider",modelValue:s.phase,"onUpdate:modelValue":e[2]||(e[2]=m=>s.phase=m),options:s.phaseOptions,"active-tooltips":"","hover-info":"Phase"},null,8,["modelValue","options"])]),createBaseVNode("div",_hoisted_6$5,[createVNode(a,{ref:"eccSlider",modelValue:s.ecc,"onUpdate:modelValue":e[3]||(e[3]=m=>s.ecc=m),options:s.eccOptions,"active-tooltips":"","hover-info":"Eccentricity"},null,8,["modelValue","options"])]),createVNode(n,{modelValue:s.noise.from,"onUpdate:modelValue":e[4]||(e[4]=m=>s.noise.from=m),class:"noise from","hover-info":"Noise (From)"},null,8,["modelValue"]),createVNode(n,{modelValue:s.noise.to,"onUpdate:modelValue":e[5]||(e[5]=m=>s.noise.to=m),class:"noise to","hover-info":"Noise (To)"},null,8,["modelValue"]),createVNode(d,{value:s.selectedMotion,"onUpdate:value":e[6]||(e[6]=m=>s.selectedMotion=m),placement:"bottom-start",class:"motion",trigger:"click",options:s.motionOptions,"render-label":i.renderMotionLabel},{default:withCtx(()=>[createVNode(l,{class:"function icon","hover-info":"Function"})]),_:1},8,["value","options","render-label"])])}var TempestMotion=_export_sfc(_sfc_main$8,[["render",_sfc_render$8],["__scopeId","data-v-77818888"]]),ayvaModal_css_vue_type_style_index_0_src_6b84f524_scoped_true_lang="";const customBehaviorStorage$1=new CustomBehaviorStorage,ayva$1=createAyva();let emulator$1;const defaultStroke={stroke:{from:.5,to:.5,phase:0,ecc:0}},_sfc_main$7={components:{TempestMotion,AyvaSlider,AyvaCheckbox},inject:{globalAyva:{from:"globalAyva"},device:{from:"globalDevice"},deviceType:{from:"deviceType"}},props:{editStroke:{type:String,default:null}},emits:["close","save"],data(){return{active:{type:Boolean,default:!0},axes:this.createAxes("default",defaultStroke),availableAxes:ayvaConfig.axes.map(t=>({...t,label:`${t.alias} (${t.name})`,value:t.name,emulator:["L0","R0","R1","R2"].indexOf(t.name)!==-1})),previewAngle:0,previewBpm:60,previewBpmOptions:{start:[60],tooltips:!0,connect:!0,padding:[10],step:1,range:{min:0,max:200},format:formatter()},tempestStrokeLibrary:TempestStroke.library,customBehaviorLibrary:{},transitionDuration:.5,presetIndex:0,presetLabel:"Presets",previewOnDevice:!1,axisScrollTop:0,strokeName:"",contextClue:"",contextClueTimeout:null,axisScrollElement:null}},computed:{edit(){return!!this.editStroke},saveText(){return this.edit?"Save":"Add to Library"},axesByAlias(){return(this.axes||[]).reduce((t,e)=>(t[e.alias]=e,t),{})},selectedAxes:{get(){return this.axes.map(t=>t.name)},set(t){const e=new Set(t),o=new Set(this.axes.map(i=>i.name)),r=new Set([...o].filter(i=>!e.has(i))),s=this.axes.reduce((i,a)=>(i.set(a.name,a),i),new Map);this.axes=this.availableAxes.filter(i=>e.has(i.name)).map(i=>{const a=s.get(i.name);if(!a){const n=ayva$1.getAxis(i.name).type==="auxiliary"?0:.5;return this.createAxis(i.name,{from:n,to:n,phase:0,ecc:0})}return a});for(const i of r){const a=ayva$1.getAxis(i).type==="auxiliary"?0:.5;ayva$1.$[i].value=a}}},tempestStrokeOptions(){const t=Object.keys(this.tempestStrokeLibrary).filter(e=>!this.customBehaviorLibrary[e]).reduce((e,o)=>(e[o]=this.tempestStrokeLibrary[o],e),{});return Object.keys(t).sort().map(e=>({key:e,label:e}))},customStrokeOptions(){return Object.keys(this.customStrokeLibrary).sort().map(t=>({key:t,label:t}))},strokeLibraryDropdownOptions(){return[{key:"default",label:"Default",props:{class:"default-option"}},{key:"header",type:"render",render:()=>h("div",{class:"stroke-library-heading"},h("div",{disabled:this.customStrokeOptions.length?void 0:""},"Custom"))},...this.customStrokeOptions,{key:"header",type:"render",render:()=>h("div",{class:"stroke-library-heading"},"Library")},...this.tempestStrokeOptions]},strokeLibraryOptions(){return this.strokeLibraryDropdownOptions.filter(t=>t.key!=="header")},disabled(){return this.active?void 0:""},strokeNameDuplicate(){return this.editStroke&&this.strokeName===this.editStroke?!1:!!this.tempestStrokeLibrary[this.strokeName]||!!this.customBehaviorLibrary[this.strokeName]},strokeNameValid(){return this.strokeName.length&&!this.strokeNameDuplicate&&!this.strokeNameReserved},strokeNameReserved(){return this.strokeName==="default"||this.strokeName==="header"},customStrokeLibrary(){const t={};return Object.entries(this.customBehaviorLibrary).forEach(([e,o])=>{o.type==="tempest-stroke"&&(t[e]=o.data)}),t}},watch:{active:{immediate:!0,handler(t){ayva$1.stop(),t&&nextTick(()=>{this.animatePreview()})}},previewOnDevice(){this.previewOnDevice?ayva$1.addOutput(this.device):(ayva$1.removeOutput(this.device),this.resetGlobalDevicePosition())},"device.connected"(t){t||(ayva$1.removeOutput(this.device),this.previewOnDevice=!1)},strokeName(t){this.strokeName=t.replaceAll(/[^a-zA-Z0-9-]/g,"").toLowerCase()}},beforeMount(){this.customBehaviorLibrary=customBehaviorStorage$1.load()},mounted(){if(emulator$1=new qo(this.$refs.emulator,{model:this.deviceType}),ayva$1.addOutput(emulator$1),Object.keys(ayva$1.axes).forEach(t=>{ayva$1.updateLimits(t,this.globalAyva.$[t].min,this.globalAyva.$[t].max)}),window.addEventListener("scroll",this.onAxisScroll,{passive:!0,capture:!0}),this.editStroke){this.strokeName=this.editStroke;const t=this.strokeLibraryOptions.find(e=>e.key===this.editStroke);this.selectPreset(this.editStroke,t)}this.axisScrollElement=this.$refs.axisScrollParent},unmounted(){ayva$1.stop(),ayva$1.removeOutput(emulator$1),ayva$1.removeOutput(this.device),emulator$1.destroy(),window.removeEventListener("scroll",this.onAxisScroll),this.previewOnDevice&&this.resetGlobalDevicePosition()},methods:{animatePreview(){const{granularity:t}=TempestStroke,e=30/t,o=Math.PI/t,r=[];for(const s of this.availableAxes)r.push({axis:s.name,value:this.createPreviewValueProvider(s),duration:e/this.previewBpm});ayva$1.move(...r).then(s=>{s&&(this.previewAngle+=o,this.active&&this.animatePreview())})},createPreviewValueProvider(t){const e=o=>{const r=this.axesByAlias[t.alias];if(r&&r.parameters){const{from:s,to:i,phase:a,ecc:n,motion:l,$current:d}=r.parameters,m=(l||Ayva.tempestMotion)(d?.from||s,d?.to||i,a,n,this.previewBpm,this.previewAngle)(o);return d&&r.parameters.noise&&this.generateNoise(r.parameters),m}return null};return o=>e(o)},generateNoise(t){const{PI:e}=Math,o=e/TempestStroke.granularity,r=v=>v*180/e,s=v=>validNumber(t.noise)?t.noise:t.noise[v]||0,a=t.phase*e/2+this.previewAngle,n=Math.round(r(a%(e*2))),l=Math.round(n+r(o)),d=n<360&&l>=360,m=n<180&&l>=180;if(d){const v=s("to"),f=(t.from-t.to)/2;t.$current.to=t.to+v*f*Math.random()}else if(m){const v=s("from"),f=(t.to-t.from)/2;t.$current.from=t.from+v*f*Math.random()}},selectPreset(t,e){const o=this.customStrokeLibrary[t]||this.tempestStrokeLibrary[t]||defaultStroke;o&&(this.presetLabel=e.label,this.presetIndex=this.strokeLibraryOptions.findIndex(r=>r.key===t),this.active=!1,this.previewAngle=0,this.$refs.axisScroll.scrollTo(0),nextTick(()=>{this.axes=this.createAxes(t,o);const r=this.getResetMoves(o);ayva$1.move(...r).then(()=>{this.active=!0})}))},nextPreset(){let t;this.presetIndex===null?t=0:t=(this.presetIndex+1)%this.strokeLibraryOptions.length;const e=this.strokeLibraryOptions[t];this.selectPreset(e.key,e)},previousPreset(){let t;this.presetIndex===null||this.presetIndex===0?t=this.strokeLibraryOptions.length-1:t=this.presetIndex-1;const e=this.strokeLibraryOptions[t];this.selectPreset(e.key,e)},getResetMoves(t){const e=this.transitionDuration,o=new TempestStroke(t).getStartMoves(ayva$1,{duration:e}),r=o.reduce((a,n)=>(a.add(n.axis),a),new Set),i=ayvaConfig.axes.filter(a=>!r.has(a.name)&&!r.has(a.alias)).map(a=>({to:a.type==="auxiliary"?0:.5,duration:e,axis:a.name}));return[...o,...i]},createAxes(t,e){return Object.keys(e).map(r=>{const s={...e[r]};return this.createAxis(r,s)}).filter(r=>t==="default"||!(r.parameters.from===.5&&r.parameters.to===.5))},createAxis(t,e){const{alias:o,name:r}=ayva$1.getAxis(t);return e.$current={from:e.from,to:e.to},{alias:o,name:r,parameters:e,label:`${o} (${r})`}},onAxisScroll(){this.axisScrollTop=this.$el.querySelector(".n-scrollbar-container").scrollTop},onHover(t){const e=t.composedPath().find(o=>o.hasAttribute&&o.hasAttribute("hover-info"));e&&(this.contextClue=e.getAttribute("hover-info"))},save(){this.editStroke&&customBehaviorStorage$1.delete(this.editStroke);const t=this.axes.reduce((e,o)=>(e[o.name]=o.parameters,delete e[o.name].$current,e),{});customBehaviorStorage$1.save(this.strokeName,"tempest-stroke",t),this.$emit("close"),this.$emit("save")},resetGlobalDevicePosition(){for(const t in ayva$1.$)this.globalAyva.$[t].value=ayva$1.$[t].value}}},_withScopeId$3=t=>(pushScopeId("data-v-6b84f524"),t=t(),popScopeId(),t),_hoisted_1$l={class:"header","hover-info":""},_hoisted_2$l={class:"toolbar"},_hoisted_3$j={class:"toolbar-left"},_hoisted_4$5={class:"toolbar-right"},_hoisted_5$5=["disabled"],_hoisted_6$4={class:"presets-button"},_hoisted_7$3={class:"main-inputs"},_hoisted_8$2={class:"setup"},_hoisted_9$2={class:"context-clue"},_hoisted_10$2={class:"select-axes"},_hoisted_11$2=createTextVNode("Axes "),_hoisted_12$2={key:0,class:"device"},_hoisted_13$2=_withScopeId$3(()=>createBaseVNode("label",{for:"preview-on-device"},"Send preview to actual device.",-1)),_hoisted_14$2={key:1,class:"device"},_hoisted_15$3=_withScopeId$3(()=>createBaseVNode("label",{disabled:""},"No device connected. Preview only available on emulator.",-1)),_hoisted_16$2=[_hoisted_15$3],_hoisted_17$2={ref:"axisScrollParent",class:"axis-column"},_hoisted_18$2={class:"axis-scroll"},_hoisted_19$2={class:"emulator-column","hover-info":""},_hoisted_20$2={ref:"emulator",class:"emulator"},_hoisted_21$1={class:"preview-bpm"},_hoisted_22$1=["disabled"],_hoisted_23$1={class:"save-container","hover-info":""},_hoisted_24$1=_withScopeId$3(()=>createBaseVNode("label",null,"Name:",-1)),_hoisted_25$1=createTextVNode(" A behavior with that name already exists. "),_hoisted_26$1=["disabled"];function _sfc_render$7(t,e,o,r,s,i){const a=resolveComponent("n-dropdown"),n=resolveComponent("chevron-left-icon"),l=resolveComponent("chevron-right-icon"),d=resolveComponent("close-icon"),m=resolveComponent("axis-icon"),v=resolveComponent("n-popselect"),f=resolveComponent("ayva-checkbox"),g=resolveComponent("tempest-motion"),y=resolveComponent("n-scrollbar"),b=resolveComponent("ayva-slider"),u=resolveComponent("n-tooltip");return openBlock(),createElementBlock("div",{class:"modal-body",onMouseover:e[8]||(e[8]=(...c)=>i.onHover&&i.onHover(...c))},[createBaseVNode("div",_hoisted_1$l,[createBaseVNode("div",_hoisted_2$l,[createBaseVNode("span",_hoisted_3$j,[createBaseVNode("span",null,toDisplayString(i.edit?"Edit":"Create")+" TempestStroke",1)]),createBaseVNode("span",_hoisted_4$5,[createBaseVNode("span",{class:"presets",disabled:i.disabled},[createVNode(a,{placement:"bottom-start",trigger:"click",size:"small",options:i.strokeLibraryDropdownOptions,onSelect:i.selectPreset},{default:withCtx(()=>[createBaseVNode("span",_hoisted_6$4,toDisplayString(s.presetLabel),1)]),_:1},8,["options","onSelect"]),createBaseVNode("span",null,[createVNode(n,{class:"icon",onClick:e[0]||(e[0]=c=>i.previousPreset())}),createVNode(l,{class:"icon",onClick:e[1]||(e[1]=c=>i.nextPreset())})])],8,_hoisted_5$5),createBaseVNode("span",null,[createVNode(d,{class:"close icon",onClick:e[2]||(e[2]=c=>t.$emit("close"))})])])]),createBaseVNode("div",_hoisted_7$3,[createBaseVNode("div",_hoisted_8$2,[createBaseVNode("span",_hoisted_9$2,toDisplayString(s.contextClue),1),createVNode(v,{value:i.selectedAxes,"onUpdate:value":e[3]||(e[3]=c=>i.selectedAxes=c),trigger:"click",multiple:"",options:s.availableAxes},{default:withCtx(()=>[createBaseVNode("span",_hoisted_10$2,[createVNode(m,{class:"icon"}),_hoisted_11$2])]),_:1},8,["value","options"])]),i.device&&i.device.connected?(openBlock(),createElementBlock("div",_hoisted_12$2,[createBaseVNode("span",null,[createVNode(f,{id:"preview-on-device",modelValue:s.previewOnDevice,"onUpdate:modelValue":e[4]||(e[4]=c=>s.previewOnDevice=c)},null,8,["modelValue"]),_hoisted_13$2])])):(openBlock(),createElementBlock("div",_hoisted_14$2,_hoisted_16$2))])]),createBaseVNode("div",_hoisted_17$2,[createVNode(y,{ref:"axisScroll","data-scroll":s.axisScrollTop,trigger:"none"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_18$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.axes,c=>(openBlock(),createElementBlock("div",{key:c.name,class:"tempest-motion-container"},[createVNode(g,{modelValue:c.parameters,"onUpdate:modelValue":w=>c.parameters=w,"display-name":c.label,angle:s.previewAngle,disabled:i.disabled,"scroll-element":s.axisScrollElement},null,8,["modelValue","onUpdate:modelValue","display-name","angle","disabled","scroll-element"])]))),128))])]),_:1},8,["data-scroll"])],512),createBaseVNode("div",_hoisted_19$2,[createBaseVNode("div",_hoisted_20$2,null,512),createBaseVNode("div",_hoisted_21$1,[createVNode(b,{modelValue:s.previewBpm,"onUpdate:modelValue":e[5]||(e[5]=c=>s.previewBpm=c),options:s.previewBpmOptions,disabled:i.disabled},null,8,["modelValue","options","disabled"]),createBaseVNode("div",{class:"label",disabled:i.disabled}," Preview BPM ",8,_hoisted_22$1)])]),createBaseVNode("div",_hoisted_23$1,[createBaseVNode("div",null,[_hoisted_24$1,createVNode(u,{show:i.strokeNameDuplicate,class:"error-tooltip"},{trigger:withCtx(()=>[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":e[6]||(e[6]=c=>s.strokeName=c),class:normalizeClass(["name",i.strokeNameDuplicate?"error":""])},null,2),[[vModelText,s.strokeName]])]),default:withCtx(()=>[_hoisted_25$1]),_:1},8,["show"]),createBaseVNode("button",{class:"ayva-button primary",disabled:!i.strokeNameValid,onClick:e[7]||(e[7]=(...c)=>i.save&&i.save(...c))},toDisplayString(i.saveText),9,_hoisted_26$1)])])],32)}var TempestStrokeEditor=_export_sfc(_sfc_main$7,[["render",_sfc_render$7],["__scopeId","data-v-6b84f524"]]),AyvaFreePlay_vue_vue_type_style_index_0_scoped_true_lang="";let previewAyva=null,previewEmulator=null;const customBehaviorStorage=new CustomBehaviorStorage,_sfc_main$6={components:{AyvaSlider,AyvaCheckbox,AyvaBpmSelect,AyvaScriptEditor,TempestStrokeEditor,AyvaModal},inject:["globalAyva","deviceType"],props:{currentStrokeName:{type:String,default:null},mode:{type:String,default:null}},emits:["update-parameters","update-strokes","select-stroke"],setup(){return{notify:useNotification()}},data(){return{twist:!1,bpmOptions:{range:{min:0,max:200},start:[20,60],padding:[10],step:1,format:formatter()},accelerationOptions:{range:{min:0,max:200},start:[0,20],step:1,format:formatter()},patternDurationOptions:{range:{min:0,max:30},start:[5,10],padding:[1],step:.1,format:formatter(1,"s")},transitionDurationOptions:{range:{min:0,max:30},start:[2,5],padding:[.5],step:.1,format:formatter(1,"s")},twistRangeOptions:{range:{min:0,max:1},start:[0,1],margin:.1},twistPhaseOptions:{range:{min:-4,max:4},start:[0]},twistEccOptions:{range:{min:-1,max:1},start:[0]},strokes:[],customBehaviorLibrary:{},previewElement:null,previewParent:null,showScriptEditor:!1,editScript:null,showStrokeEditor:!1,editStroke:null,bpmMode:"transition",settingsOptions:[{key:"create-stroke",label:"Create TempestStroke"},{key:"create-script",label:"Create AyvaScript"},{key:"import",label:"Import"},{key:"export",label:"Export"}],customStrokeActions:[{key:"edit",label:"Edit"},{key:"export",label:"Export"},{key:"delete",label:"Delete"}]}},computed:{disableTwist(){return this.twist?null:""},disableAcceleration(){return this.bpmMode!=="continuous"?"":null},selectAllStrokes:{get(){return this.strokes.reduce((t,e)=>t&&e.enabled,!0)},set(t){this.strokes.forEach(e=>{e.enabled=!!t})}}},watch:{twist:{immediate:!0,handler(t){this.fireUpdateParameter("twist",t)}},strokes:{immediate:!0,handler(){this.fireUpdateStrokes()}},selectAllStrokes(){this.fireUpdateStrokes()},deviceType(){this.resetEmulator()}},mounted(){this.$el.querySelectorAll(".free-play-container").forEach(t=>{makeCollapsible(t)}),this.previewElement=document.createElement("div"),this.previewElement.classList.add("preview-popup"),this.resetEmulator(),window.addEventListener("resize",this.onResize),this.refreshStrokes(),this.onResize(),this.fireUpdateParameter("bpm-mode",this.bpmMode)},unmounted(){window.removeEventListener("resize",this.onResize)},methods:{refreshStrokes(){const t=this.strokes.reduce((s,i)=>(s[i.name]=i.enabled,s),{});this.customBehaviorLibrary=customBehaviorStorage.load();const e=(s,i=!1)=>Object.keys(s).sort().map(a=>({name:a,custom:i,type:s[a].type||"tempest-stroke",enabled:t[a]??!0})),o=TempestStroke.library,r=Object.keys(o).filter(s=>!this.customBehaviorLibrary[s]).reduce((s,i)=>(s[i]=o[i],s),{});this.strokes=[...e(this.customBehaviorLibrary,!0),...e(r)],this.onResize()},onResize(){nextTick(()=>{if(!this.$refs.strokesContainer.classList.contains("closed")){const t=this.$refs.tempestStrokeContainer.getBoundingClientRect().height;clampHeight(this.$refs.strokesContainer,200,t+50)}})},onUpdate(t,e){this.fireUpdateParameter(t,e)},onSettings(t){if(t==="create-stroke")this.openStrokeEditor();else if(t==="create-script")this.openScriptEditor();else if(t==="import"){const e=o=>{this.notify.warning({content:"Some strokes renamed due to conflicts:",meta:()=>h("div",o.map(r=>h("div",r)))})};customBehaviorStorage.import(e).then(()=>{this.refreshStrokes()}).catch(o=>{console.error(o?.stack),this.notify.error({content:"Error importing stroke:",meta:o.message})})}else t==="export"&&customBehaviorStorage.export()},onCustomStrokeAction(t,e){e==="delete"?(customBehaviorStorage.delete(t.name),this.refreshStrokes()):e==="edit"&&t.type==="tempest-stroke"?this.openStrokeEditor(t.name):e==="edit"&&t.type==="ayvascript"?this.openScriptEditor(t.name):e==="export"&&customBehaviorStorage.exportOne(t.name)},openScriptEditor(t=null){this.editScript=t,this.showScriptEditor=!0,this.animateEditorResize(1e3)},openStrokeEditor(t=null){this.editStroke=t,this.showStrokeEditor=!0,this.animateEditorResize(1e3)},animateEditorResize(t,e){if(window.dispatchEvent(new Event("resize")),!e)requestAnimationFrame(this.animateEditorResize.bind(this,t,performance.now()));else{const o=performance.now()-e,r=t-o;r>0&&requestAnimationFrame(this.animateEditorResize.bind(this,r,performance.now()))}},fireUpdateStrokes(){const t=this.strokes.filter(e=>e.enabled).map(e=>e.name);this.$emit("update-strokes",t)},fireUpdateParameter(t,e){this.$emit("update-parameters",{name:t,value:e})},fireSelectStroke(t){this.$emit("select-stroke",t)},previewStroke(t,e){this.destroyPreview(),e&&setTimeout(()=>{const o=TempestStroke.library[t],r=o?{name:t,type:"tempest-stroke",data:o}:this.customBehaviorLibrary[t];if(r.type!=="tempest-stroke")return;this.previewParent=document.querySelector(`[data-preview-stroke="${t}"]`),this.previewParent.appendChild(this.previewElement),this.previewParent.closest(".v-binder-follower-content").classList.add("preview-popup-container"),previewAyva=this.createPreviewAyva(),previewAyva.addOutput(previewEmulator);const i=Object.keys(previewAyva.axes).reduce((a,n)=>{const l=previewAyva.axes[n];return a[l.name]=l,a},{});Object.entries(i).forEach(([a])=>{previewAyva.$[a].value=.5}),previewAyva.do(new TempestStroke(r.data))},100)},createPreviewAyva(){const t=createAyva();return Object.keys(t.axes).forEach(e=>{t.updateLimits(e,this.globalAyva.$[e].min,this.globalAyva.$[e].max)}),t},destroyPreview(){previewAyva&&(previewAyva.stop(),previewAyva=null),this.previewParent&&(this.previewParent.removeChild(this.previewElement),this.previewParent=null)},resetEmulator(){previewEmulator&&previewEmulator.destroy(),previewEmulator=new qo(this.previewElement,{model:this.deviceType})}}},_withScopeId$2=t=>(pushScopeId("data-v-04b05c2a"),t=t(),popScopeId(),t),_hoisted_1$k={class:"free-play"},_hoisted_2$k={class:"free-play-container lil-gui root"},_hoisted_3$i={class:"title"},_hoisted_4$4=_withScopeId$2(()=>createBaseVNode("span",null,"Parameters",-1)),_hoisted_5$4=_withScopeId$2(()=>createBaseVNode("a",{href:"https://ayvajs.github.io/ayvajs-docs/tutorial-ayva-stroker-lite.html",target:"_blank"},"Help",-1)),_hoisted_6$3=[_hoisted_5$4],_hoisted_7$2={class:"limits lil-gui children"},_hoisted_8$1={class:"limit"},_hoisted_9$1=_withScopeId$2(()=>createBaseVNode("div",{class:"axis"}," Change BPM ",-1)),_hoisted_10$1={class:"limit"},_hoisted_11$1=_withScopeId$2(()=>createBaseVNode("div",{class:"axis"}," BPM Range ",-1)),_hoisted_12$1={class:"limit"},_hoisted_13$1=["disabled"],_hoisted_14$1={class:"limit"},_hoisted_15$2=_withScopeId$2(()=>createBaseVNode("div",{class:"axis"}," Pattern Duration ",-1)),_hoisted_16$1={class:"limit"},_hoisted_17$1=_withScopeId$2(()=>createBaseVNode("div",{class:"axis"}," Transition Duration ",-1)),_hoisted_18$1={class:"limit twist"},_hoisted_19$1=_withScopeId$2(()=>createBaseVNode("div",{class:"axis"}," Default Twist ",-1)),_hoisted_20$1={class:"limit"},_hoisted_21=["disabled"],_hoisted_22={class:"limit"},_hoisted_23=["disabled"],_hoisted_24={class:"limit"},_hoisted_25=["disabled"],_hoisted_26={ref:"strokesContainer",class:"free-play-container lil-gui root"},_hoisted_27={class:"title"},_hoisted_28=_withScopeId$2(()=>createBaseVNode("span",null,"Strokes",-1)),_hoisted_29={class:"current-stroke-container"},_hoisted_30=_withScopeId$2(()=>createBaseVNode("span",{class:"label"},"Playing:",-1)),_hoisted_31={class:"current-stroke"},_hoisted_32={class:"limits lil-gui children",style:{"padding-top":"0"}},_hoisted_33={ref:"tempestStrokeContainer",class:"tempest-stroke-container"},_hoisted_34={class:"tempest-stroke"},_hoisted_35={class:"checkbox"},_hoisted_36=_withScopeId$2(()=>createBaseVNode("div",null,[createBaseVNode("div",{class:"info"}," Select or manually trigger a stroke. ")],-1)),_hoisted_37=_withScopeId$2(()=>createBaseVNode("div",{class:"stroke-actions"},null,-1)),_hoisted_38={class:"checkbox"},_hoisted_39=["title","onClick"],_hoisted_40={class:"stroke-actions"},_hoisted_41=["data-preview-stroke"];function _sfc_render$6(t,e,o,r,s,i){const a=resolveComponent("ayva-bpm-select"),n=resolveComponent("ayva-slider"),l=resolveComponent("ayva-checkbox"),d=resolveComponent("settings-icon"),m=resolveComponent("n-dropdown"),v=resolveComponent("eye-icon"),f=resolveComponent("n-popover"),g=resolveComponent("tempest-stroke-editor"),y=resolveComponent("ayva-modal"),b=resolveComponent("ayva-script-editor");return openBlock(),createElementBlock("div",_hoisted_1$k,[createBaseVNode("div",_hoisted_2$k,[createBaseVNode("div",_hoisted_3$i,[_hoisted_4$4,createBaseVNode("span",{class:"guide",onClick:e[0]||(e[0]=withModifiers(()=>{},["stop"]))},_hoisted_6$3)]),createBaseVNode("div",_hoisted_7$2,[createBaseVNode("div",_hoisted_8$1,[_hoisted_9$1,createVNode(a,{modelValue:s.bpmMode,"onUpdate:modelValue":e[1]||(e[1]=u=>s.bpmMode=u),"storage-key":"free-play-bpm-mode",onChange:e[2]||(e[2]=u=>i.onUpdate("bpm-mode",u))},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_10$1,[_hoisted_11$1,createVNode(n,{options:s.bpmOptions,"storage-key":"free-play-bpm",onUpdate:e[3]||(e[3]=u=>i.onUpdate("bpm",u))},null,8,["options"])]),createBaseVNode("div",_hoisted_12$1,[createBaseVNode("div",{class:"axis",disabled:i.disableAcceleration}," Acceleration (bpm/s) ",8,_hoisted_13$1),createVNode(n,{options:s.accelerationOptions,disabled:i.disableAcceleration,"storage-key":"free-play-acceleration",onUpdate:e[4]||(e[4]=u=>i.onUpdate("acceleration",u))},null,8,["options","disabled"])]),createBaseVNode("div",_hoisted_14$1,[_hoisted_15$2,createVNode(n,{options:s.patternDurationOptions,"storage-key":"free-play-pattern-duration",onUpdate:e[5]||(e[5]=u=>i.onUpdate("pattern-duration",u))},null,8,["options"])]),createBaseVNode("div",_hoisted_16$1,[_hoisted_17$1,createVNode(n,{options:s.transitionDurationOptions,"storage-key":"free-play-transition-duration",onUpdate:e[6]||(e[6]=u=>i.onUpdate("transition-duration",u))},null,8,["options"])]),createBaseVNode("div",_hoisted_18$1,[_hoisted_19$1,createBaseVNode("div",null,[createVNode(l,{modelValue:s.twist,"onUpdate:modelValue":e[7]||(e[7]=u=>s.twist=u),"storage-key":"free-play-enable-twist"},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_20$1,[createBaseVNode("div",{class:"axis",disabled:i.disableTwist}," Twist Range ",8,_hoisted_21),createVNode(n,{options:s.twistRangeOptions,disabled:i.disableTwist,"storage-key":"free-play-twist-range",onUpdate:e[8]||(e[8]=u=>i.onUpdate("twist-range",u))},null,8,["options","disabled"])]),createBaseVNode("div",_hoisted_22,[createBaseVNode("div",{class:"axis",disabled:i.disableTwist}," Twist Phase ",8,_hoisted_23),createVNode(n,{options:s.twistPhaseOptions,disabled:i.disableTwist,"storage-key":"free-play-twist-phase",onUpdate:e[9]||(e[9]=u=>i.onUpdate("twist-phase",u))},null,8,["options","disabled"])]),createBaseVNode("div",_hoisted_24,[createBaseVNode("div",{class:"axis",disabled:i.disableTwist}," Twist Eccentricity ",8,_hoisted_25),createVNode(n,{options:s.twistEccOptions,disabled:i.disableTwist,"storage-key":"free-play-twist-ecc",onUpdate:e[10]||(e[10]=u=>i.onUpdate("twist-ecc",u))},null,8,["options","disabled"])])])]),createBaseVNode("div",_hoisted_26,[createBaseVNode("div",_hoisted_27,[_hoisted_28,withDirectives(createBaseVNode("span",_hoisted_29,[_hoisted_30,createBaseVNode("span",_hoisted_31,toDisplayString(o.currentStrokeName),1)],512),[[vShow,o.currentStrokeName!=="None"]]),withDirectives(createBaseVNode("span",{class:"settings-container",onClick:e[12]||(e[12]=withModifiers(()=>{},["stop"]))},[createVNode(m,{placement:"bottom-start",trigger:"click",size:"small",options:s.settingsOptions,disabled:o.mode!=="Stopped",onSelect:i.onSettings},{default:withCtx(()=>[createVNode(d,{disabled:o.mode!=="Stopped"?"":null,class:"settings icon",onClick:e[11]||(e[11]=withModifiers(()=>{},["stop"]))},null,8,["disabled"])]),_:1},8,["options","disabled","onSelect"])],512),[[vShow,o.currentStrokeName==="None"]])]),createBaseVNode("div",_hoisted_32,[createBaseVNode("div",_hoisted_33,[createBaseVNode("div",_hoisted_34,[createBaseVNode("div",_hoisted_35,[createVNode(l,{modelValue:i.selectAllStrokes,"onUpdate:modelValue":e[13]||(e[13]=u=>i.selectAllStrokes=u)},null,8,["modelValue"])]),_hoisted_36,_hoisted_37]),(openBlock(!0),createElementBlock(Fragment,null,renderList(s.strokes,u=>(openBlock(),createElementBlock("div",{key:u.name,class:"tempest-stroke"},[createBaseVNode("div",_hoisted_38,[createVNode(l,{modelValue:u.enabled,"onUpdate:modelValue":c=>u.enabled=c,"storage-key":`free-play-pattern-${u.name}`,onChange:i.fireUpdateStrokes},null,8,["modelValue","onUpdate:modelValue","storage-key","onChange"])]),createBaseVNode("div",null,[createBaseVNode("button",{title:u.name,onClick:c=>i.fireSelectStroke(u.name)},toDisplayString(u.name),9,_hoisted_39)]),createBaseVNode("div",_hoisted_40,[createVNode(f,{trigger:"hover",raw:"","show-arrow":!1,delay:250,"onUpdate:show":c=>i.previewStroke(u.name,c)},{trigger:withCtx(()=>[createVNode(v,{class:"preview icon",disabled:u.type!=="tempest-stroke"?"":void 0},null,8,["disabled"])]),default:withCtx(()=>[createBaseVNode("div",{"data-preview-stroke":u.name},null,8,_hoisted_41)]),_:2},1032,["onUpdate:show"]),createVNode(m,{placement:"bottom-start",trigger:"click",size:"small",options:s.customStrokeActions,disabled:o.mode!=="Stopped",onSelect:c=>i.onCustomStrokeAction(u,c)},{default:withCtx(()=>[withDirectives(createVNode(d,{class:"settings icon",disabled:o.mode!=="Stopped"?"":null},null,8,["disabled"]),[[vShow,u.custom]])]),_:2},1032,["options","disabled","onSelect"])])]))),128))],512)])],512),createVNode(y,{show:s.showStrokeEditor,"lil-gui":""},{default:withCtx(()=>[createVNode(g,{ref:"strokeEditor","edit-stroke":s.editStroke,onClose:e[14]||(e[14]=u=>s.showStrokeEditor=!1),onSave:i.refreshStrokes},null,8,["edit-stroke","onSave"])]),_:1},8,["show"]),createVNode(y,{show:s.showScriptEditor,"lil-gui":""},{default:withCtx(()=>[createVNode(b,{ref:"strokeEditor","edit-script":s.editScript,onClose:e[15]||(e[15]=u=>s.showScriptEditor=!1),onSave:i.refreshStrokes},null,8,["edit-script","onSave"])]),_:1},8,["show"])])}var AyvaFreePlay=_export_sfc(_sfc_main$6,[["render",_sfc_render$6],["__scopeId","data-v-04b05c2a"]]);const _sfc_main$5={props:{mode:{type:String,default:""}},computed:{modeClass(){return`${this.mode.toLowerCase().replaceAll(/\s+/g,"-")}-mode`}}},_hoisted_1$j={class:"mode-container lil-gui"},_hoisted_2$j=createBaseVNode("span",null,"Mode:",-1);function _sfc_render$5(t,e,o,r,s,i){return openBlock(),createElementBlock("div",_hoisted_1$j,[_hoisted_2$j,createBaseVNode("span",{class:normalizeClass(["mode",i.modeClass])},toDisplayString(o.mode),3)])}var AyvaMode=_export_sfc(_sfc_main$5,[["render",_sfc_render$5]]);const STATE={TRANSITION_MANUAL:0,TRANSITION_FREE_PLAY:1,STROKING:2},scriptGlobals={};class Controller extends GeneratorBehavior{#o=new CustomBehaviorStorage;#e=null;#r=null;#s=!1;#i=null;#t;constructor(){super(),createConstantProperty(this,"bpmSliderState",{active:!1,updated:!1,value:null}),Object.keys(scriptGlobals).forEach(e=>{delete scriptGlobals[e]})}*generate(e){switch(this.#p(e)){case STATE.TRANSITION_MANUAL:yield*this.#n(e,this.#r),this.#u();break;case STATE.TRANSITION_FREE_PLAY:yield*this.#n(e,_.sample(this.strokes));break;case STATE.STROKING:this.#e instanceof TempestStroke?yield*this.#e:yield this.#e.next();break;default:yield .1}}startManualMode(e){this.#r=e}startFreePlayMode(){this.#s=!0,this.#a()&&(this.#e.complete=!0)}resetTimer(){if(this.#s){const[e,o]=this.parameters["pattern-duration"];e===o?this.#i=new VariableDuration(e):this.#i=new VariableDuration(e,o)}}#p(e){return this.#r?STATE.TRANSITION_MANUAL:this.#s&&this.#m()?STATE.TRANSITION_FREE_PLAY:!this.#s&&this.#l()?(e.stop(),null):this.#e?STATE.STROKING:null}#u(){this.#r=null,this.#i=null,this.#s=!1}*#n(e,o){const r=this.#o.load();r[o]?.type==="ayvascript"?(this.#e=this.#b(r[o].data.script).bind(e),this.#e.on("error",s=>this.$emit("script-error",o,s)),this.$emit("update-current-behavior",o),this.$emit("toggle-bpm-enabled",!1),this.resetTimer()):yield*this.#_(e,o)}*#_(e,o){this.#t=this.#f();const r=this.#y();if(this.#e instanceof TempestStroke||scriptGlobals.output instanceof TempestStroke){const s=this.#e instanceof TempestStroke?this.#e:scriptGlobals.output,i=this.#v();this.#e=s.transition(this.#h(o),r,i,this.#c.bind(this),(a,n)=>{this.#d(o,n)}),scriptGlobals.output=null,yield*this.#e}else this.#e=new TempestStroke(this.#h(o),r).bind(e),this.#c(1,this.#e.bpm),yield*this.#e.start({duration:1,value:Ayva.RAMP_PARABOLIC}),this.#d(o,this.#e.bpm)}#l(){return this.#a()&&this.#e.complete}#a(){return this.#e instanceof ScriptRunner}#c(e,o){this.$emit("transition-start",e,o)}#d(e,o){this.$emit("transition-end",e,o),this.resetTimer()}#h(e){if(typeof e=="string"){const r=this.#o.load()[e]?.data||TempestStroke.library[e],s=r.twist||r.R0,i=!s||s.from===.5&&s.to===.5;if(this.parameters.twist&&i){const[a,n]=this.parameters["twist-range"],l=this.parameters["twist-phase"],d=this.parameters["twist-ecc"];r.R0={from:a,to:n,phase:l,ecc:d}}return r}return e}#m(){return(!this.#i||this.#i.complete)&&this.strokes.length&&!this.bpmSliderState.active&&!this.#a()||this.#l()}#v(){const[e,o]=this.parameters["transition-duration"];return Ayva.map(Math.random(),0,1,e,o)}#f(){const[e,o]=this.parameters.bpm;return Math.floor(Ayva.map(Math.random(),0,1,e,o))}#g(e){const[o,r]=this.parameters.bpm,[s,i]=this.parameters.acceleration,a=Ayva.map(Math.random(),0,1,s,i);return clamp(e+(Math.random()<.5?a:-a),o,r)}#y(){const e=()=>{if((!this.#s||this.bpmSliderState.active||this.bpmSliderState.updated)&&(this.#t=this.bpmSliderState.value,this.bpmSliderState.updated=!1),this.parameters["bpm-mode"]==="continuous")if(!this.bpmSliderState.active&&e.initialized){const{startBpm:o,endBpm:r,startTime:s,endTime:i}=e,a=performance.now();a>=i?(this.#t=r,e.startTime=performance.now(),e.endTime=e.startTime+1e3,e.startBpm=r,e.endBpm=this.#g(r)):this.#t=Ayva.map(a,s,i,o,r),this.$emit("update-bpm",this.#t)}else e.startTime=0,e.endTime=0,e.startBpm=this.#t,e.endBpm=this.#t,e.initialized=!0;return this.#t};return e}#b(e){const o=Object.keys(this.parameters).reduce((r,s)=>(Object.defineProperty(r,_.camelCase(s),{enumerable:!0,get:()=>this.parameters[s]}),r),{});return this.#e instanceof TempestStroke?scriptGlobals.input=this.#e:this.#e instanceof ScriptRunner?scriptGlobals.input=scriptGlobals.output:scriptGlobals.input=null,scriptGlobals.output=null,scriptGlobals.parameters=o,Object.defineProperty(scriptGlobals,"mode",{configurable:!0,enumerable:!0,get:()=>this.#s?"freePlay":"manual"}),new ScriptRunner(e,{GLOBALS:scriptGlobals})}}Object.assign(Controller.prototype,eventMixin);const fileOptions={types:[{description:"Ayva Stroker Lite Settings",accept:{"application/json":[".json"]}}],excludeAcceptAllOption:!0,multiple:!1,suggestedName:"ayva-stroker-settings.json"};var settingsStorage={async export(){let t;try{t=await window.showSaveFilePicker(fileOptions)}catch{return!1}const e=await t.createWritable();return await e.write(JSON.stringify(localStorage,null,2)),await e.close(),!0},async import(){let t;try{[t]=await window.showOpenFilePicker(fileOptions)}catch{return!1}const e=await t.getFile(),o=JSON.parse(await e.text());return localStorage.clear(),Object.entries(o).forEach(([r,s])=>localStorage.setItem(r,s)),!0}},_imports_0="/img/ayva-remote.png",_imports_1="/img/sr6-example.gif",_imports_2="/img/ssr1-example.gif",AyvaReleaseNotes_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$4={emits:["close"],data(){return{settingsStorage}}},_withScopeId$1=t=>(pushScopeId("data-v-134a7534"),t=t(),popScopeId(),t),_hoisted_1$i={class:"header","hover-info":""},_hoisted_2$i={class:"toolbar"},_hoisted_3$h=_withScopeId$1(()=>createBaseVNode("span",{class:"toolbar-left"},null,-1)),_hoisted_4$3={class:"toolbar-right"},_hoisted_5$3=createStaticVNode('<div class="body" data-v-134a7534><div class="release-notes" data-v-134a7534><h2 style="text-align:center;" data-v-134a7534> A special announcement! </h2><a href="https://remote.ayvasoftware.io/about" target="_blank" data-v-134a7534><img src="'+_imports_0+'" style="width:460px;" data-v-134a7534></a><div class="light-gray" style="padding-top:5px;" data-v-134a7534> Ayva Remote is now FREE. Allow anyone in the world to control your device! <br data-v-134a7534><br data-v-134a7534>Now supporting the <b data-v-134a7534>SR6</b>, <b data-v-134a7534>SSR1</b>, <b data-v-134a7534>The Handy</b>, and <b data-v-134a7534>Keon</b>! </div></div><div class="release-notes" data-v-134a7534><div class="examples" data-v-134a7534><img src="'+_imports_1+'" data-v-134a7534><img src="'+_imports_2+'" data-v-134a7534></div></div><div class="release-notes light-gray" data-v-134a7534> More information about this announcement is available <a style="color:var(--ayva-text-color-blue);" href="https://discuss.eroscripts.com/t/ayva-remote-now-free-for-everyone-the-handy-and-sr6-modes-released/136271" target="_blank" data-v-134a7534>here.</a></div></div>',1);function _sfc_render$4(t,e,o,r,s,i){const a=resolveComponent("close-icon");return openBlock(),createElementBlock("div",{class:"modal-body",onMouseover:e[1]||(e[1]=(...n)=>t.onHover&&t.onHover(...n))},[createBaseVNode("div",_hoisted_1$i,[createBaseVNode("div",_hoisted_2$i,[_hoisted_3$h,createBaseVNode("span",_hoisted_4$3,[createBaseVNode("span",null,[createVNode(a,{class:"close icon",onClick:e[0]||(e[0]=n=>t.$emit("close"))})])])])]),_hoisted_5$3],32)}var AyvaReleaseNotes=_export_sfc(_sfc_main$4,[["render",_sfc_render$4],["__scopeId","data-v-134a7534"]]),AyvaLicense_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$3={emits:["close"],data(){return{license:""}},beforeMount(){fetch("./LICENSE").then(t=>t.text()).then(t=>{this.license=t})}},_withScopeId=t=>(pushScopeId("data-v-81aa09fa"),t=t(),popScopeId(),t),_hoisted_1$h={class:"modal-body"},_hoisted_2$h={class:"header"},_hoisted_3$g={class:"toolbar"},_hoisted_4$2=_withScopeId(()=>createBaseVNode("span",{class:"toolbar-left"},[createBaseVNode("span",null,"License")],-1)),_hoisted_5$2={class:"toolbar-right"},_hoisted_6$2={class:"body"},_hoisted_7$1={class:"release-notes light-gray",style:{"white-space":"pre","text-align":"center"}};function _sfc_render$3(t,e,o,r,s,i){const a=resolveComponent("close-icon");return openBlock(),createElementBlock("div",_hoisted_1$h,[createBaseVNode("div",_hoisted_2$h,[createBaseVNode("div",_hoisted_3$g,[_hoisted_4$2,createBaseVNode("span",_hoisted_5$2,[createBaseVNode("span",null,[createVNode(a,{class:"close icon",onClick:e[0]||(e[0]=n=>t.$emit("close"))})])])])]),createBaseVNode("div",_hoisted_6$2,[createBaseVNode("div",_hoisted_7$1,toDisplayString(s.license),1)])])}var AyvaLicense=_export_sfc(_sfc_main$3,[["render",_sfc_render$3],["__scopeId","data-v-81aa09fa"]]);const _hoisted_1$g={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},_hoisted_2$g=createBaseVNode("path",{d:"M512 194.8c0 101.3-82.4 183.8-183.8 183.8-101.7 0-184.4-82.4-184.4-183.8 0-101.6 82.7-184.3 184.4-184.3C429.6 10.5 512 93.2 512 194.8zM0 501.5h90v-491H0v491z",fill:"currentColor"},null,-1),_hoisted_3$f=[_hoisted_2$g];function render$e(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$g,_hoisted_3$f)}var PatreonIcon={render:render$e},__glob_0_13=Object.freeze(Object.defineProperty({__proto__:null,render:render$e,default:PatreonIcon},Symbol.toStringTag,{value:"Module"})),main_css_vue_type_style_index_0_src_20be0154_lang="",App_vue_vue_type_style_index_1_lang="";const ayva=createAyva();let controller,emulator;const _sfc_main$2={components:{AyvaOutput,AyvaFreePlay,AyvaMode,AyvaSlider,AyvaReleaseNotes,AyvaLicense,AyvaModal},provide(){return{globalAyva:ayva,globalDevice:computed(()=>this.device),globalParameters:computed(()=>this.parameters),globalEvents:computed(()=>this.events),modals:computed(()=>this.modals),deviceType:computed(()=>this.deviceType)}},inject:{spinner:{from:"globalSpinner"}},props:[],setup(){return{notify:useNotification()}},data(){return{stopped:!0,disconnectInterval:null,mode:"Stopped",strokes:[],parameters:{},bpmSliderActive:!1,currentBpm:60,currentStrokeName:"None",bpmDisabled:!1,bpmAnimationFrame:null,bpmSliderOptions:{start:[60],tooltips:!0,behaviour:"snap",connect:!0,padding:[10],step:1,range:{min:0,max:200},format:formatter()},device:new WebSerialDevice,deviceType:null,showHud:!0,showReleaseNotes:!1,showLicense:!1,patreonUrl:"https://patreon.com/soritesparadox",eggplantUrl:"https://www.buymeacoffee.com/soritesparadox",events:{...eventMixin},settingsDropdownOptions:[{key:"import",label:"Import Settings"},{key:"export",label:"Export Settings"},{key:"release",label:"Release Notes"},{key:"license",label:"License"},{key:"eggplant",label:"Buy Sorites Paradox an Eggplant \u{1F346}"},{key:"patreon",label:"Patreon"}],globalSettings:new Storage("global-settings"),modals:{count:0}}},computed:{hudStyle(){return this.showHud?"":"visibility: hidden !important"}},watch:{"device.connected"(t){if(t)for(const e in ayva.$)ayva.$[e].value=ayva.$[e].defaultValue;else ayva.removeOutput(this.device),ayva.stop()},deviceType(){emulator&&(emulator.destroy(),ayva.removeOutput(emulator),emulator=new qo(this.$refs.emulator,{model:this.deviceType}),ayva.addOutput(emulator))}},beforeCreate(){new CustomBehaviorStorage().migrateLegacyStrokes();const t=ayva.stop.bind(ayva);ayva.stop=()=>{t(),this.onAyvaStop()}},beforeMount(){this.refreshOutputSettings()},mounted(){["bpmSliderActive","currentBpm","strokes","parameters"].forEach(e=>this.$watch(e,()=>this.updateController(),{immediate:!0,deep:!0})),window.addEventListener("keyup",e=>{const o=this.modals.count===0;o&&e.key==="Escape"?this.stop():o&&e.key===" "&&(this.mode==="Free Play"?this.stop():this.freePlay())}),window.addEventListener("keydown",e=>{this.modals.count===0&&e.key===" "&&e.preventDefault()}),this.events.on("refresh-output-settings",()=>{this.refreshOutputSettings()}),emulator=new qo(this.$refs.emulator,{model:this.deviceType}),ayva.addOutput(emulator),this.showReleaseNotes=this.globalSettings.load("show-release-notes-1.45.1")??!0,this.patreonPromo()},methods:{onChange(){controller&&(controller.bpmSliderState.updated=!0)},onSelectSettings(t){t==="export"?settingsStorage.export():t==="import"?settingsStorage.import().then(e=>{e&&(new CustomBehaviorStorage().migrateLegacyStrokes(),this.spinner.show(new Promise(()=>{})),window.location.reload())}):t==="release"?this.showReleaseNotes=!0:t==="license"?this.showLicense=!0:t==="eggplant"?window.open(this.eggplantUrl,"_blank").focus():t==="patreon"&&window.open(this.patreonUrl,"_blank").focus()},onCloseReleaseNotes(){this.showReleaseNotes=!1,this.globalSettings.save("show-release-notes-1.45.1",!1)},onClickEmulator(){triggerMouseEvent(this.$refs.emulator,"mousedown"),triggerMouseEvent(this.$refs.emulator,"mouseup")},updateLimits(t){ayva.updateLimits(t.name,t.limits.min,t.limits.max)},updateParameters(t){this.parameters[t.name]=t.value},updateStrokes(t){this.strokes=t},updateController(){controller&&(controller.strokes=this.strokes,controller.parameters=this.parameters,controller.bpmSliderState.active=this.bpmSliderActive,controller.bpmSliderState.value=this.currentBpm)},selectStroke(t){this.startController(),controller.startManualMode(t),this.mode="Manual"},freePlay(){this.startController(),controller.startFreePlayMode(),this.mode="Free Play"},getBpm(){return Number(this.$refs.bpmSlider.get())},setBpm(t){this.$refs.bpmSlider.set(t)},createBpmAnimation(t,e){const o=performance.now(),r=o+t*1e3,s=this.getBpm(),i=()=>{const a=Math.round(Ayva.map(performance.now(),o,r,s,e));this.setBpm(a),this.bpmAnimationFrame=requestAnimationFrame(i)};this.bpmAnimationFrame=requestAnimationFrame(i)},clearBpmAnimation(){cancelAnimationFrame(this.bpmAnimationFrame)},startController(){controller||(controller=new Controller,controller.on("transition-start",(t,e)=>{this.createBpmAnimation(t,e),this.currentStrokeName="Transitioning...",this.bpmDisabled=!0}),controller.on("transition-end",(t,e)=>{this.currentStrokeName=typeof t=="string"?t:"Custom",this.bpmDisabled=!1,this.clearBpmAnimation(),e&&this.setBpm(e)}),controller.on("update-bpm",t=>{this.setBpm(t)}),controller.on("update-current-behavior",t=>{this.currentStrokeName=t}),controller.on("toggle-bpm-enabled",t=>{this.bpmDisabled=!t}),controller.on("script-error",(t,e)=>{ayva.stop(),this.notify.error({content:`Exception occurred while running script ${t}:`,meta:e.message})}),this.updateController(),ayva.do(controller))},home(){ayva.stop(),ayva.home()},stop(){ayva.stop()},onAyvaStop(){controller=null,this.mode="Stopped",this.currentStrokeName="None",this.bpmDisabled=!1,this.clearBpmAnimation()},requestConnection(){const t=this.device.requestConnection().then(()=>{ayva.addOutput(this.device)}).catch(e=>{e instanceof DOMException?console.warn(e):this.notify.error({content:e.message})});this.spinner.show(t)},disconnect(){ayva.removeOutput(this.device),this.device.disconnect()},refreshOutputSettings(){const t=new Storage("output-settings"),e=t.load("deviceType")||"OSR2",o=t.load("host")||"localhost",r=Number(t.load("port")||80),s=Number(t.load("frequency")||50),i=t.load("connectionType")||"serial";ayva.frequency=s,i==="websocket"?this.device=new WebSocketDevice(o,r):i==="console"?this.device=new ConsoleDevice:i==="ble"?this.device=new BLEDevice:this.device=new WebSerialDevice,this.deviceType=e},patreonPromo(){const t=new Storage("checkbox-value"),e=new Storage("promo-reset");if(e.load("patreon")||(t.save("patreon-promo-disabled",!1),e.save("patreon",!0)),t.load("patreon-promo-disabled"))return;const r={style:"color: rgb(255, 66, 77)"};setTimeout(()=>{this.notify.info({content:"Enjoy Ayva Stroker Lite?",meta:()=>h("div",["Support this software by becoming a ",h("a",{href:this.patreonUrl,target:"_blank",...r},"patron."),h("div",{class:"lil-gui patreon-promo-disable"},[h("span","Don't show this message again."),h(AyvaCheckbox,{storageKey:"patreon-promo-disabled"})])]),avatar:()=>h(PatreonIcon,r)})},3e4)}}},_hoisted_1$f={id:"main",class:"lil-gui"},_hoisted_2$f={class:"actions"},_hoisted_3$e=["disabled"],_hoisted_4$1=createBaseVNode("span",null,"Free Play",-1),_hoisted_5$1=createTextVNode(),_hoisted_6$1=createBaseVNode("span",{style:{"font-size":"12px"}},"(Space)",-1),_hoisted_7=[_hoisted_4$1,_hoisted_5$1,_hoisted_6$1],_hoisted_8=["disabled"],_hoisted_9=createBaseVNode("span",null,"Stop",-1),_hoisted_10=createTextVNode(),_hoisted_11=createBaseVNode("span",{style:{"font-size":"12px"}},"(Esc)",-1),_hoisted_12=[_hoisted_9,_hoisted_10,_hoisted_11],_hoisted_13=createBaseVNode("div",{class:"faux-bpm-track"},null,-1),_hoisted_14=["disabled"],_hoisted_15$1=createBaseVNode("span",null,"Current BPM",-1),_hoisted_16=[_hoisted_15$1],_hoisted_17={ref:"logo"},_hoisted_18=createTextVNode("Ayva Stroker "),_hoisted_19=createBaseVNode("span",{class:"ayva"},"Lite",-1),_hoisted_20=[_hoisted_18,_hoisted_19];function _sfc_render$2(t,e,o,r,s,i){const a=resolveComponent("ayva-mode"),n=resolveComponent("ayva-free-play"),l=resolveComponent("ayva-output"),d=resolveComponent("hud-on-icon"),m=resolveComponent("hud-off-icon"),v=resolveComponent("ayva-slider"),f=resolveComponent("ayva-release-notes"),g=resolveComponent("ayva-modal"),y=resolveComponent("ayva-license"),b=resolveComponent("settings-icon"),u=resolveComponent("n-dropdown");return openBlock(),createElementBlock("div",_hoisted_1$f,[createVNode(a,{mode:s.mode},null,8,["mode"]),createVNode(n,{mode:s.mode,"current-stroke-name":s.currentStrokeName,style:normalizeStyle(i.hudStyle),onUpdateParameters:i.updateParameters,onUpdateStrokes:i.updateStrokes,onSelectStroke:i.selectStroke},null,8,["mode","current-stroke-name","style","onUpdateParameters","onUpdateStrokes","onSelectStroke"]),createBaseVNode("div",{id:"emulator",ref:"emulator",onClick:e[0]||(e[0]=(...c)=>i.onClickEmulator&&i.onClickEmulator(...c))},null,512),createVNode(l,{style:normalizeStyle(i.hudStyle),mode:s.mode,onUpdateLimits:i.updateLimits,onRequestConnection:i.requestConnection,onDisconnect:i.disconnect},null,8,["style","mode","onUpdateLimits","onRequestConnection","onDisconnect"]),createBaseVNode("div",_hoisted_2$f,[createBaseVNode("div",{class:"hud-button",onClick:e[1]||(e[1]=c=>s.showHud=!s.showHud)},[withDirectives(createVNode(d,null,null,512),[[vShow,s.showHud]]),withDirectives(createVNode(m,null,null,512),[[vShow,!s.showHud]])]),createBaseVNode("button",{id:"home",onClick:e[2]||(e[2]=c=>i.home())}," Home Device "),createBaseVNode("button",{id:"start-free-play",disabled:s.mode==="Free Play"||!s.strokes.length,onClick:e[3]||(e[3]=c=>i.freePlay())},_hoisted_7,8,_hoisted_3$e),createBaseVNode("button",{id:"stop",disabled:s.mode==="Stopped",onClick:e[4]||(e[4]=(...c)=>i.stop&&i.stop(...c))},_hoisted_12,8,_hoisted_8)]),createBaseVNode("div",{id:"current-bpm",style:normalizeStyle(i.hudStyle)},[_hoisted_13,createVNode(v,{ref:"bpmSlider",options:s.bpmSliderOptions,disabled:s.bpmDisabled?"":null,onUpdate:e[5]||(e[5]=c=>s.currentBpm=c),onStart:e[6]||(e[6]=c=>s.bpmSliderActive=!0),onEnd:e[7]||(e[7]=c=>s.bpmSliderActive=!1),onChange:i.onChange},null,8,["options","disabled","onChange"]),createBaseVNode("div",{class:"label",disabled:s.bpmDisabled?"":null},_hoisted_16,8,_hoisted_14)],4),createVNode(g,{show:s.showReleaseNotes,"lil-gui":""},{default:withCtx(()=>[createVNode(f,{onClose:i.onCloseReleaseNotes},null,8,["onClose"])]),_:1},8,["show"]),createVNode(g,{show:s.showLicense,"lil-gui":""},{default:withCtx(()=>[createVNode(y,{ref:"licenseModal",onClose:e[8]||(e[8]=c=>s.showLicense=!1)},null,512)]),_:1},8,["show"]),createBaseVNode("div",{class:"logo",style:normalizeStyle(i.hudStyle)},[createBaseVNode("span",null,[createVNode(u,{ref:"appSettingsDropdown",placement:"bottom-start",trigger:"click",size:"small",options:s.settingsDropdownOptions,disabled:s.mode!=="Stopped",onSelect:i.onSelectSettings},{default:withCtx(()=>[createVNode(b,{class:"app-settings",disabled:s.mode!=="Stopped"?"":null},null,8,["disabled"])]),_:1},8,["options","disabled","onSelect"])]),createBaseVNode("span",_hoisted_17,_hoisted_20,512)],4)])}var App=_export_sfc(_sfc_main$2,[["render",_sfc_render$2]]),AyvaFundraiser_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$1={emits:["end-fundraiser"],data(){return{fundraiserTime:30}},mounted(){setTimeout(this.tickFundraiser,1e3)},methods:{tickFundraiser(){this.fundraiserTime--,this.fundraiserTime>0&&setTimeout(this.tickFundraiser,1e3)},endFundraiser(){this.fundraiserTime<=0&&this.$emit("end-fundraiser")}}},_hoisted_1$e={class:"special-message"},_hoisted_2$e=createStaticVNode('<h2 data-v-571fb43c> A special message from the creator of <span style="color:var(--ayva-blue);" data-v-571fb43c>Ayva </span><span style="color:indigo;" data-v-571fb43c>Software</span></h2><div data-v-571fb43c> Hello! </div><div data-v-571fb43c> This app has become quite popular. I love knowing that so many people have been able to have fun, learn, and experience lots of pleasure with it. \u{1F60A} </div><div data-v-571fb43c> I feel awkward asking, but I need your help. Most Ayva Software\u2014including Ayva Stroker Lite\u2014is <b data-v-571fb43c>free</b> and open source. I depend on donations to cover the associated costs (and to stay motivated to keep producing cool products for you to enjoy!). </div><div data-v-571fb43c>I tend to mostly come out of pocket to provide these services.</div><div data-v-571fb43c> If everyone who used Ayva Stroker Lite for more than ten minutes this month donated <b data-v-571fb43c>$3</b>, the cost of the <b data-v-571fb43c>ayva-stroker-lite.io</b> domain would be covered <u data-v-571fb43c>for over two years.</u></div><div data-v-571fb43c> That&#39;s right, about the price of an organic eggplant is all I am asking.<br data-v-571fb43c> Please support Ayva Software with a <b data-v-571fb43c>one time donation</b> <i data-v-571fb43c>today</i>: </div><div data-v-571fb43c><a href="https://www.buymeacoffee.com/soritesparadox" target="_blank" data-v-571fb43c>Buy Sorites Paradox an Eggplant</a> \u{1F346} </div><div data-v-571fb43c> If you would like to provide support on an ongoing basis, you can subscribe on <a href="https://patreon.com/soritesparadox" target="_blank" data-v-571fb43c>Patreon</a>. The subscriber tier includes unlimited access to <a target="_blank" href="https://remote.ayvasoftware.io/about" data-v-571fb43c>Ayva Remote</a> (an app that allows anyone in the world to <i data-v-571fb43c>anonymously</i> stroke you off!). </div><div data-v-571fb43c> I truly love what I do. I won&#39;t be stopping any time soon, and I greatly appreciate your support. </div><div data-v-571fb43c> Thank You and Happy Stroking! \u{1F499} </div><div data-v-571fb43c><i data-v-571fb43c>Sorites Paradox</i></div><div style="font-size:11px;font-style:italic;" data-v-571fb43c> P.S. &quot;This message won&#39;t appear again in this browser until the next Fundraiser \u{1F605}, but you can buy me an eggplant anytime from the settings menu in the lower left corner of the app.&quot; </div>',13),_hoisted_15=["disabled"];function _sfc_render$1(t,e,o,r,s,i){return openBlock(),createElementBlock("div",_hoisted_1$e,[_hoisted_2$e,createBaseVNode("div",null,[createBaseVNode("button",{class:"ayva-button primary",disabled:s.fundraiserTime>0,onClick:e[0]||(e[0]=(...a)=>i.endFundraiser&&i.endFundraiser(...a))}," Enter Ayva Stroker Lite "+toDisplayString(s.fundraiserTime?`(${s.fundraiserTime})`:""),9,_hoisted_15)])])}var AyvaFundraiser=_export_sfc(_sfc_main$1,[["render",_sfc_render$1],["__scopeId","data-v-571fb43c"]]);const fundraiserStorage=new Storage("fundraiser"),_sfc_main={components:{App,AyvaFundraiser},provide(){return{globalSpinner:computed(()=>this.spinner)}},data(){return{showSpinner:!1,spinner:{show:t=>(this.showSpinner=!0,t.finally(()=>this.showSpinner=!1))},fundraiserComplete:!1}},beforeMount(){this.fundraiserComplete=!0},methods:{onEndFundraiser(){this.fundraiserComplete=!0,fundraiserStorage.save("november-2023",!0)}}};function _sfc_render(t,e,o,r,s,i){const a=resolveComponent("App"),n=resolveComponent("AyvaFundraiser"),l=resolveComponent("n-spin"),d=resolveComponent("n-dialog-provider"),m=resolveComponent("n-notification-provider");return openBlock(),createBlock(m,{placement:"bottom-right"},{default:withCtx(()=>[createVNode(d,null,{default:withCtx(()=>[createVNode(l,{show:s.showSpinner,class:"app-spinner"},{default:withCtx(()=>[s.fundraiserComplete?(openBlock(),createBlock(a,{key:0})):(openBlock(),createBlock(n,{key:1,onEndFundraiser:i.onEndFundraiser},null,8,["onEndFundraiser"]))]),_:1},8,["show"])]),_:1})]),_:1})}var Main=_export_sfc(_sfc_main,[["render",_sfc_render]]);const _hoisted_1$d={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},_hoisted_2$d=createBaseVNode("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 128h80M64 128h240M368 384h80M64 384h240M208 256h240M64 256h80"},null,-1),_hoisted_3$d=createBaseVNode("circle",{cx:"336",cy:"128",r:"32",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),_hoisted_4=createBaseVNode("circle",{cx:"176",cy:"256",r:"32",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),_hoisted_5=createBaseVNode("circle",{cx:"336",cy:"384",r:"32",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),_hoisted_6=[_hoisted_2$d,_hoisted_3$d,_hoisted_4,_hoisted_5];function render$d(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$d,_hoisted_6)}var axis={render:render$d},__glob_0_0=Object.freeze(Object.defineProperty({__proto__:null,render:render$d,default:axis},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$c={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},_hoisted_2$c=createBaseVNode("path",{d:"M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z",fill:"currentColor"},null,-1),_hoisted_3$c=[_hoisted_2$c];function render$c(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$c,_hoisted_3$c)}var chevronDropdown={render:render$c},__glob_0_1=Object.freeze(Object.defineProperty({__proto__:null,render:render$c,default:chevronDropdown},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$b={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},_hoisted_2$b=createBaseVNode("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z",fill:"currentColor"},null,-1),_hoisted_3$b=[_hoisted_2$b];function render$b(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$b,_hoisted_3$b)}var chevronLeft={render:render$b},__glob_0_2=Object.freeze(Object.defineProperty({__proto__:null,render:render$b,default:chevronLeft},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$a={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},_hoisted_2$a=createBaseVNode("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z",fill:"currentColor"},null,-1),_hoisted_3$a=[_hoisted_2$a];function render$a(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$a,_hoisted_3$a)}var chevronRight={render:render$a},__glob_0_3=Object.freeze(Object.defineProperty({__proto__:null,render:render$a,default:chevronRight},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$9={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},_hoisted_2$9=createBaseVNode("path",{d:"M24 9.4 22.6 8 16 14.6 9.4 8 8 9.4l6.6 6.6L8 22.6 9.4 24l6.6-6.6 6.6 6.6 1.4-1.4-6.6-6.6L24 9.4z",fill:"currentColor"},null,-1),_hoisted_3$9=[_hoisted_2$9];function render$9(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$9,_hoisted_3$9)}var close={render:render$9},__glob_0_4=Object.freeze(Object.defineProperty({__proto__:null,render:render$9,default:close},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$8={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"},_hoisted_2$8=createBaseVNode("path",{d:"M641.5 256c0 3.1-1.7 6.1-4.5 7.5L547.9 317c-1.4.8-2.8 1.4-4.5 1.4-1.4 0-3.1-.3-4.5-1.1-2.8-1.7-4.5-4.5-4.5-7.8v-35.6H295.7c25.3 39.6 40.5 106.9 69.6 106.9H392V354c0-5 3.9-8.9 8.9-8.9H490c5 0 8.9 3.9 8.9 8.9v89.1c0 5-3.9 8.9-8.9 8.9h-89.1c-5 0-8.9-3.9-8.9-8.9v-26.7h-26.7c-75.4 0-81.1-142.5-124.7-142.5H140.3c-8.1 30.6-35.9 53.5-69 53.5C32 327.3 0 295.3 0 256s32-71.3 71.3-71.3c33.1 0 61 22.8 69 53.5 39.1 0 43.9 9.5 74.6-60.4C255 88.7 273 95.7 323.8 95.7c7.5-20.9 27-35.6 50.4-35.6 29.5 0 53.5 23.9 53.5 53.5s-23.9 53.5-53.5 53.5c-23.4 0-42.9-14.8-50.4-35.6H294c-29.1 0-44.3 67.4-69.6 106.9h310.1v-35.6c0-3.3 1.7-6.1 4.5-7.8 2.8-1.7 6.4-1.4 8.9.3l89.1 53.5c2.8 1.1 4.5 4.1 4.5 7.2z",fill:"currentColor"},null,-1),_hoisted_3$8=[_hoisted_2$8];function render$8(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$8,_hoisted_3$8)}var connect={render:render$8},__glob_0_5=Object.freeze(Object.defineProperty({__proto__:null,render:render$8,default:connect},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$7={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},_hoisted_2$7=createBaseVNode("path",{d:"M4.5 3a.5.5 0 0 0-.5.5v2.793L2.146 8.146A.5.5 0 0 0 2 8.5v5a.5.5 0 0 0 .5.5H4v2.5a.5.5 0 0 0 1 0V14h1v2.5a.5.5 0 0 0 1 0V14h1.5a.5.5 0 0 0 .5-.5v-5a.5.5 0 0 0-.146-.354L7 6.293V3.5a.5.5 0 0 0-.5-.5h-2zm11 14a.5.5 0 0 0 .5-.5v-2.793l1.854-1.853A.5.5 0 0 0 18 11.5v-5a.5.5 0 0 0-.5-.5H17V3.5a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 0-.5.5V6h-.5a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 .146.354L13 13.707V16.5a.5.5 0 0 0 .5.5h2zM13 6V4h3v2h-3z",fill:"currentColor"},null,-1),_hoisted_3$7=[_hoisted_2$7];function render$7(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$7,_hoisted_3$7)}var editSettings={render:render$7},__glob_0_6=Object.freeze(Object.defineProperty({__proto__:null,render:render$7,default:editSettings},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$6={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12"},_hoisted_2$6=createBaseVNode("path",{d:"M1.974 6.659a.5.5 0 0 1-.948-.317c-.01.03 0-.001 0-.001a1.633 1.633 0 0 1 .062-.162c.04-.095.099-.226.18-.381.165-.31.422-.723.801-1.136C2.834 3.827 4.087 3 6 3c1.913 0 3.166.827 3.931 1.662a5.479 5.479 0 0 1 .98 1.517l.046.113c.003.008.013.06.023.11L11 6.5s.084.333-.342.474a.5.5 0 0 1-.632-.314v-.003l-.006-.016a3.678 3.678 0 0 0-.172-.376 4.477 4.477 0 0 0-.654-.927C8.584 4.673 7.587 4 6 4s-2.584.673-3.194 1.338a4.477 4.477 0 0 0-.795 1.225 2.209 2.209 0 0 0-.03.078l-.007.018zM6 5a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM5 7a1 1 0 1 1 2 0 1 1 0 0 1-2 0z",fill:"currentColor"},null,-1),_hoisted_3$6=[_hoisted_2$6];function render$6(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$6,_hoisted_3$6)}var eye={render:render$6},__glob_0_7=Object.freeze(Object.defineProperty({__proto__:null,render:render$6,default:eye},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$5={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},_hoisted_2$5=createBaseVNode("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[createBaseVNode("path",{d:"M14 10h1c1 0 1 1 2.016 3.527C18 16 18 17 19 17h1"}),createBaseVNode("path",{d:"M13 17c1.5 0 3-2 4-3.5s2.5-3.5 4-3.5M3 19c0 1.5.5 2 2 2s2-4 3-9 1.5-9 3-9 2 .5 2 2M5 12h6"})],-1),_hoisted_3$5=[_hoisted_2$5];function render$5(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$5,_hoisted_3$5)}var _function={render:render$5},__glob_0_8=Object.freeze(Object.defineProperty({__proto__:null,render:render$5,default:_function},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$4={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},_hoisted_2$4=createBaseVNode("path",{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z",fill:"currentColor"},null,-1),_hoisted_3$4=[_hoisted_2$4];function render$4(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$4,_hoisted_3$4)}var hudOff={render:render$4},__glob_0_9=Object.freeze(Object.defineProperty({__proto__:null,render:render$4,default:hudOff},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$3={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"},_hoisted_2$3=createBaseVNode("path",{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z",fill:"currentColor"},null,-1),_hoisted_3$3=[_hoisted_2$3];function render$3(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$3,_hoisted_3$3)}var hudOn={render:render$3},__glob_0_10=Object.freeze(Object.defineProperty({__proto__:null,render:render$3,default:hudOn},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$2={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},_hoisted_2$2=createBaseVNode("path",{d:"M424.4 214.7 72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z",fill:"currentColor"},null,-1),_hoisted_3$2=[_hoisted_2$2];function render$2(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$2,_hoisted_3$2)}var play={render:render$2},__glob_0_14=Object.freeze(Object.defineProperty({__proto__:null,render:render$2,default:play},Symbol.toStringTag,{value:"Module"}));const _hoisted_1$1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},_hoisted_2$1=createBaseVNode("path",{d:"m19.44 12.99-.01.02c.04-.33.08-.67.08-1.01 0-.34-.03-.66-.07-.99l.01.02 2.44-1.92-2.43-4.22-2.87 1.16.01.01c-.52-.4-1.09-.74-1.71-1h.01L14.44 2H9.57l-.44 3.07h.01c-.62.26-1.19.6-1.71 1l.01-.01-2.88-1.17-2.44 4.22 2.44 1.92.01-.02c-.04.33-.07.65-.07.99 0 .34.03.68.08 1.01l-.01-.02-2.1 1.65-.33.26 2.43 4.2 2.88-1.15-.02-.04c.53.41 1.1.75 1.73 1.01h-.03L9.58 22h4.85s.03-.18.06-.42l.38-2.65h-.01c.62-.26 1.2-.6 1.73-1.01l-.02.04 2.88 1.15 2.43-4.2s-.14-.12-.33-.26l-2.11-1.66zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z",fill:"currentColor"},null,-1),_hoisted_3$1=[_hoisted_2$1];function render$1(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$1,_hoisted_3$1)}var settings={render:render$1},__glob_0_15=Object.freeze(Object.defineProperty({__proto__:null,render:render$1,default:settings},Symbol.toStringTag,{value:"Module"}));const _hoisted_1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},_hoisted_2=createBaseVNode("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z",fill:"currentColor"},null,-1),_hoisted_3=[_hoisted_2];function render(t,e){return openBlock(),createElementBlock("svg",_hoisted_1,_hoisted_3)}var stop={render},__glob_0_17=Object.freeze(Object.defineProperty({__proto__:null,render,default:stop},Symbol.toStringTag,{value:"Module"})),icons={install(t){Object.entries({"../assets/icons/axis.svg":__glob_0_0,"../assets/icons/chevron-dropdown.svg":__glob_0_1,"../assets/icons/chevron-left.svg":__glob_0_2,"../assets/icons/chevron-right.svg":__glob_0_3,"../assets/icons/close.svg":__glob_0_4,"../assets/icons/connect.svg":__glob_0_5,"../assets/icons/edit-settings.svg":__glob_0_6,"../assets/icons/eye.svg":__glob_0_7,"../assets/icons/function.svg":__glob_0_8,"../assets/icons/hud-off.svg":__glob_0_9,"../assets/icons/hud-on.svg":__glob_0_10,"../assets/icons/linear.svg":__glob_0_11,"../assets/icons/parabola.svg":__glob_0_12,"../assets/icons/patreon.svg":__glob_0_13,"../assets/icons/play.svg":__glob_0_14,"../assets/icons/settings.svg":__glob_0_15,"../assets/icons/sine.svg":__glob_0_16,"../assets/icons/stop.svg":__glob_0_17}).forEach(([o,r])=>{const s=o.split("/").pop().replace(/\.\w+$/,"");t.component(`${s}-icon`,r.default)})}};const app=createApp(Main);app.use(naive);app.use(icons);app.config.unwrapInjectedRef=!0;app.mount("#app");
